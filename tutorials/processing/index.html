<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
	

  <title>Processing Examples</title>
  <meta name="description" content="Processing ExamplesHere are eight Processing examples coded in C4.">
  <meta property="og:image" content="http://www.c4ios.com/images/banner.jpg">
  <meta property="og:url"   content="http://c4ios.com" />
  <meta property="og:title" content="Processing Examples"/>
  <meta name="og:description" content="Processing ExamplesHere are eight Processing examples coded in C4.">
  <meta property="og:type"  content="website"/>
  <meta property="og:site_name"  content="C4"/>

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@c4framework">
  <meta name="twitter:creator" content="@c4framework">
  <meta name="twitter:title" content="Processing Examples">
  <meta name="twitter:description" content="Processing ExamplesHere are eight Processing examples coded in C4.">
  <meta name="twitter:image" content="http://www.c4ios.com/images/banner.jpg">


  <link rel="stylesheet" type="text/css" href="/css/style.css" >
  <link rel="stylesheet" href="/css/syntax.css">
  <link href='https://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>

  <link rel="canonical" href="www.c4ios.com/tutorials/processing/">
  <link rel="alternate" type="application/rss+xml" title="C4 website" href="www.c4ios.com/feed.xml">
</head>

    <body class="processing examples" data-spy="scroll" data-target="#toc">

    <header>
  <nav class="navbar navbar-default" role="navigation"> 
    <div class="navbar-header container">
      <div class="row"> 
        <div class="col-xs-12 col-sm-12 col-md-12 navlist">
          <a class="navbar-brand" href="/">
            <span><img src="/images/c4logo.png"></span>
          </a>
          <ul class="nav navbar-nav navbar-left">
            <li><a href="/install" >Install</a></li>
            <li><a href="/tutorials" class='active'>Tutorials</a></li>
            <li><a href="/cosmos" >COSMOS</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/examples" >Examples</a></li>
            <li><a href="http://discourse.c4ios.com">Forums</a></li>
            <li><a href="http://cocoadocs.org/docsets/C4/1.1.0/">Documentation</a></li>
          </ul>
        </div>
      </div>  
    </div>        
  </nav>      
</header>

    <div class="container content processing examples" >
      <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 breadcrumb">
          <h1><a href="/tutorials">Tutorials</a><div class="bread-caret">></div>Processing Examples</h1>
        </div>
      </div>

      <div class="row">
        <div class="col-xs-3 col-sm-3 col-md-3">
          <span class="img large">
            <img src="/images/tutorials/processing/poster.png" />
          </span>
          <p>Author<br /><span class="lighter">Travis Kirton</span></p>
          <p>Tags<br /><a href="/tag/getting started">getting started</a>, <a href="/tag/basics">basics</a>, <a href="/tag/introduction">introduction</a>, <a href="/tag/easy">easy</a>, <a href="/tag/c4">c4</a>, </p>
          <p>Estimated Time<br /><span class="lighter">10 - 20 minutes</span></p>

          <hr />

          <div id="toc"></div>
        </div>

        <div class="col-xs-9 col-sm-9 col-md-9 tutorial">
          <h1 id="processing-examples">Processing Examples</h1>
<p>Here are eight Processing examples coded in C4.</p>

<h2 id="pie-chart">Pie Chart</h2>
<p>Creating shapes in C4 is very similar to Processing. Here you’ll see that C4 has an <code class="highlighter-rouge">Arc</code> shape that corresponds to Processing’s <code class="highlighter-rouge">arc()</code> function.</p>

<h3 class="toc-omit" id="processing">Processing</h3>
<p><img src="PieChart_P5.png" alt="" /></p>

<p>From: <a href="https://processing.org/examples/piechart.html">Pie Chart</a></p>

<blockquote>
  <p>Uses the arc() function to generate a pie chart from the data stored in an array.</p>
</blockquote>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="n">int</span><span class="p">[]</span> <span class="n">angles</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">38</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">67</span> <span class="p">};</span>

<span class="n">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="nf">size</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span> <span class="mi">360</span><span class="p">);</span>
  <span class="nf">noStroke</span><span class="p">();</span>
  <span class="nf">noLoop</span><span class="p">();</span>  <span class="c1">// Run once and stop</span>
<span class="p">}</span>

<span class="n">void</span> <span class="nf">draw</span><span class="p">()</span> <span class="p">{</span>
  <span class="nf">background</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span>
  <span class="nf">pieChart</span><span class="p">(</span><span class="mi">300</span><span class="p">,</span> <span class="n">angles</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">void</span> <span class="nf">pieChart</span><span class="p">(</span><span class="n">float</span> <span class="n">diameter</span><span class="p">,</span> <span class="n">int</span><span class="p">[]</span> <span class="n">data</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">float</span> <span class="n">lastAngle</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">data</span><span class="o">.</span><span class="n">length</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">float</span> <span class="n">gray</span> <span class="o">=</span> <span class="nf">map</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">data</span><span class="o">.</span><span class="n">length</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">);</span>
    <span class="nf">fill</span><span class="p">(</span><span class="n">gray</span><span class="p">);</span>
    <span class="nf">arc</span><span class="p">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">diameter</span><span class="p">,</span> <span class="n">diameter</span><span class="p">,</span> <span class="n">lastAngle</span><span class="p">,</span> <span class="n">lastAngle</span><span class="o">+</span><span class="nf">radians</span><span class="p">(</span><span class="n">angles</span><span class="p">[</span><span class="n">i</span><span class="p">]));</span>
    <span class="n">lastAngle</span> <span class="o">+=</span> <span class="nf">radians</span><span class="p">(</span><span class="n">angles</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<h3 class="toc-omit" id="c4">C4</h3>
<p><img src="PieChart_C4.png" alt="" /></p>

<p>There are many math functions that are common between both projects. This example also shows that using C4’s <code class="highlighter-rouge">map</code> function is almost identical.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">override</span> <span class="kd">func</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">angles</span><span class="p">:</span> <span class="p">[</span><span class="kt">Double</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="mf">30.0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">45</span><span class="p">,</span> <span class="mi">35</span><span class="p">,</span> <span class="mi">60</span><span class="p">,</span> <span class="mi">38</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">67</span><span class="p">]</span>
    <span class="k">var</span> <span class="nv">pΘ</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">0</span><span class="o">..&lt;</span><span class="n">angles</span><span class="o">.</span><span class="n">count</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">c</span> <span class="o">=</span> <span class="nf">map</span><span class="p">(</span><span class="kt">Double</span><span class="p">(</span><span class="n">i</span><span class="p">),</span> <span class="nv">min</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">max</span><span class="p">:</span> <span class="kt">Double</span><span class="p">(</span><span class="n">angles</span><span class="o">.</span><span class="n">count</span><span class="p">),</span> <span class="nv">toMin</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">toMax</span><span class="p">:</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">let</span> <span class="nv">Θ</span> <span class="o">=</span> <span class="nf">degToRad</span><span class="p">(</span><span class="n">angles</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
        <span class="k">let</span> <span class="nv">a</span> <span class="o">=</span> <span class="kt">Wedge</span><span class="p">(</span><span class="nv">center</span><span class="p">:</span> <span class="n">canvas</span><span class="o">.</span><span class="n">center</span><span class="p">,</span> <span class="nv">radius</span><span class="p">:</span> <span class="mi">150</span><span class="p">,</span> <span class="nv">start</span><span class="p">:</span> <span class="n">pΘ</span><span class="p">,</span> <span class="nv">end</span><span class="p">:</span> <span class="n">pΘ</span><span class="o">+</span><span class="kt">Θ</span><span class="p">)</span>
        <span class="n">a</span><span class="o">.</span><span class="n">fillColor</span> <span class="o">=</span> <span class="kt">Color</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="n">c</span><span class="p">,</span> <span class="nv">green</span><span class="p">:</span> <span class="n">c</span><span class="p">,</span> <span class="nv">blue</span><span class="p">:</span> <span class="n">c</span><span class="p">,</span> <span class="nv">alpha</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="n">a</span><span class="o">.</span><span class="n">lineWidth</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="n">pΘ</span> <span class="o">+=</span> <span class="kt">Θ</span>
        <span class="n">canvas</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<h2 id="array2d">Array2D</h2>
<p>The effect of the Array 2D example shows how to create a fading grid of points. This example shows you how to create the same effect, even though the C4 version doesn’t actually use arrays.</p>

<h3 class="toc-omit" id="processing-1">Processing</h3>
<p><img src="Array2D_P5.png" alt="" /></p>

<p>From: <a href="https://processing.org/examples/array2d.html">Array 2D</a></p>

<blockquote>
  <p>Demonstrates the syntax for creating a two-dimensional (2D) array. Values in a 2D array are accessed through two index values. 2D arrays are useful for storing images. In this example, each dot is colored in relation to its distance from the center of the image.</p>
</blockquote>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="n">float</span><span class="p">[][]</span> <span class="n">distances</span><span class="p">;</span>
<span class="n">float</span> <span class="n">maxDistance</span><span class="p">;</span>
<span class="n">int</span> <span class="n">spacer</span><span class="p">;</span>

<span class="n">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="nf">size</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span> <span class="mi">360</span><span class="p">);</span>
  <span class="n">maxDistance</span> <span class="o">=</span> <span class="nf">dist</span><span class="p">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="p">);</span>
  <span class="n">distances</span> <span class="o">=</span> <span class="k">new</span> <span class="n">float</span><span class="p">[</span><span class="n">width</span><span class="p">][</span><span class="n">height</span><span class="p">];</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">height</span><span class="p">;</span> <span class="n">y</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">width</span><span class="p">;</span> <span class="n">x</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">float</span> <span class="n">distance</span> <span class="o">=</span> <span class="nf">dist</span><span class="p">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
      <span class="n">distances</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">distance</span><span class="o">/</span><span class="n">maxDistance</span> <span class="o">*</span> <span class="mi">255</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="n">spacer</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
  <span class="nf">noLoop</span><span class="p">();</span>  <span class="c1">// Run once and stop</span>
<span class="p">}</span>

<span class="n">void</span> <span class="nf">draw</span><span class="p">()</span> <span class="p">{</span>
  <span class="nf">background</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="k">for</span> <span class="p">(</span><span class="n">int</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">height</span><span class="p">;</span> <span class="n">y</span> <span class="o">+=</span> <span class="n">spacer</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">for</span> <span class="p">(</span><span class="n">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">width</span><span class="p">;</span> <span class="n">x</span> <span class="o">+=</span> <span class="n">spacer</span><span class="p">)</span> <span class="p">{</span>
      <span class="nf">stroke</span><span class="p">(</span><span class="n">distances</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">y</span><span class="p">]);</span>
      <span class="nf">point</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">spacer</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">spacer</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<h3 class="toc-omit" id="c4-1">C4</h3>
<p><img src="Array2D_C4.png" alt="" /></p>

<p>Instead of points, we create <code class="highlighter-rouge">Circle</code> shapes that are <code class="highlighter-rouge">1pt</code> in diameter.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">override</span> <span class="kd">func</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">maxDistance</span> <span class="o">=</span> <span class="nf">distance</span><span class="p">(</span><span class="kt">Point</span><span class="p">(),</span> <span class="nv">rhs</span><span class="p">:</span> <span class="n">canvas</span><span class="o">.</span><span class="n">center</span><span class="p">)</span>
    <span class="n">canvas</span><span class="o">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="n">black</span>
    <span class="k">var</span> <span class="nv">pt</span> <span class="o">=</span> <span class="kt">Point</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>

    <span class="k">repeat</span> <span class="p">{</span>
        <span class="k">repeat</span> <span class="p">{</span>
            <span class="k">let</span> <span class="nv">c</span> <span class="o">=</span> <span class="kt">Circle</span><span class="p">(</span><span class="nv">center</span><span class="p">:</span> <span class="n">pt</span><span class="p">,</span> <span class="nv">radius</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">)</span>
            <span class="k">let</span> <span class="nv">d</span> <span class="o">=</span> <span class="nf">distance</span><span class="p">(</span><span class="n">pt</span><span class="p">,</span> <span class="nv">rhs</span><span class="p">:</span> <span class="n">canvas</span><span class="o">.</span><span class="n">center</span><span class="p">)</span> <span class="o">/</span> <span class="n">maxDistance</span>
            <span class="n">c</span><span class="o">.</span><span class="n">lineWidth</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="n">c</span><span class="o">.</span><span class="n">fillColor</span> <span class="o">=</span> <span class="kt">Color</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="n">d</span><span class="p">,</span> <span class="nv">green</span><span class="p">:</span> <span class="n">d</span><span class="p">,</span> <span class="nv">blue</span><span class="p">:</span> <span class="n">d</span><span class="p">,</span> <span class="nv">alpha</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span>
            <span class="n">canvas</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
            <span class="n">pt</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="mf">10.0</span>
        <span class="p">}</span> <span class="k">while</span> <span class="n">pt</span><span class="o">.</span><span class="n">x</span> <span class="o">&lt;</span> <span class="n">canvas</span><span class="o">.</span><span class="n">width</span>
        <span class="n">pt</span><span class="o">.</span><span class="n">y</span> <span class="o">+=</span> <span class="mf">10.0</span>
        <span class="n">pt</span><span class="o">.</span><span class="n">x</span> <span class="o">=</span> <span class="mf">8.0</span>
    <span class="p">}</span> <span class="k">while</span> <span class="n">pt</span><span class="o">.</span><span class="n">y</span> <span class="o">&lt;</span> <span class="n">canvas</span><span class="o">.</span><span class="n">height</span>
<span class="p">}</span></code></pre></figure>

<h2 id="mousefunctions">MouseFunctions</h2>
<p>There is no mouse in C4, but there are gesture recognizers. This example shows how you can add a long press gesture recognizer to an object to achieve a similar effect to <code class="highlighter-rouge">mousePressed</code>, <code class="highlighter-rouge">mouseDragged</code> and <code class="highlighter-rouge">mouseReleased</code>.</p>

<h3 class="toc-omit" id="processing-2">Processing</h3>
<p><img src="MouseFunctions_P5.png" alt="" /></p>

<p>From: <a href="https://processing.org/examples/mousefunctions.html">Mouse Functions</a></p>

<blockquote>
  <p>Click on the box and drag it across the screen.</p>
</blockquote>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="n">float</span> <span class="n">bx</span><span class="p">;</span>
<span class="n">float</span> <span class="n">by</span><span class="p">;</span>
<span class="n">int</span> <span class="n">boxSize</span> <span class="o">=</span> <span class="mi">75</span><span class="p">;</span>
<span class="n">boolean</span> <span class="n">overBox</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="n">boolean</span> <span class="n">locked</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="n">float</span> <span class="n">xOffset</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span> 
<span class="n">float</span> <span class="n">yOffset</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span> 

<span class="n">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="nf">size</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span> <span class="mi">360</span><span class="p">);</span>
  <span class="n">bx</span> <span class="o">=</span> <span class="n">width</span><span class="o">/</span><span class="mf">2.0</span><span class="p">;</span>
  <span class="n">by</span> <span class="o">=</span> <span class="n">height</span><span class="o">/</span><span class="mf">2.0</span><span class="p">;</span>
  <span class="nf">rectMode</span><span class="p">(</span><span class="kt">RADIUS</span><span class="p">);</span>  
<span class="p">}</span>

<span class="n">void</span> <span class="nf">draw</span><span class="p">()</span> <span class="p">{</span> 
  <span class="nf">background</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  
  <span class="k">if</span> <span class="p">(</span><span class="n">mouseX</span> <span class="o">&gt;</span> <span class="n">bx</span><span class="o">-</span><span class="n">boxSize</span> <span class="o">&amp;&amp;</span> <span class="n">mouseX</span> <span class="o">&lt;</span> <span class="n">bx</span><span class="o">+</span><span class="n">boxSize</span> <span class="o">&amp;&amp;</span> 
      <span class="n">mouseY</span> <span class="o">&gt;</span> <span class="n">by</span><span class="o">-</span><span class="n">boxSize</span> <span class="o">&amp;&amp;</span> <span class="n">mouseY</span> <span class="o">&lt;</span> <span class="n">by</span><span class="o">+</span><span class="n">boxSize</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">overBox</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>  
    <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">locked</span><span class="p">)</span> <span class="p">{</span> 
      <span class="nf">stroke</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span> 
      <span class="nf">fill</span><span class="p">(</span><span class="mi">153</span><span class="p">);</span>
    <span class="p">}</span> 
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nf">stroke</span><span class="p">(</span><span class="mi">153</span><span class="p">);</span>
    <span class="nf">fill</span><span class="p">(</span><span class="mi">153</span><span class="p">);</span>
    <span class="n">overBox</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
  
  <span class="nf">rect</span><span class="p">(</span><span class="n">bx</span><span class="p">,</span> <span class="n">by</span><span class="p">,</span> <span class="n">boxSize</span><span class="p">,</span> <span class="n">boxSize</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">void</span> <span class="nf">mousePressed</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="n">overBox</span><span class="p">)</span> <span class="p">{</span> 
    <span class="n">locked</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span> 
    <span class="nf">fill</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">,</span> <span class="mi">255</span><span class="p">);</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="n">locked</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="n">xOffset</span> <span class="o">=</span> <span class="n">mouseX</span><span class="o">-</span><span class="n">bx</span><span class="p">;</span> 
  <span class="n">yOffset</span> <span class="o">=</span> <span class="n">mouseY</span><span class="o">-</span><span class="n">by</span><span class="p">;</span> 

<span class="p">}</span>

<span class="n">void</span> <span class="nf">mouseDragged</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span><span class="p">(</span><span class="n">locked</span><span class="p">)</span> <span class="p">{</span>
    <span class="n">bx</span> <span class="o">=</span> <span class="n">mouseX</span><span class="o">-</span><span class="n">xOffset</span><span class="p">;</span> 
    <span class="n">by</span> <span class="o">=</span> <span class="n">mouseY</span><span class="o">-</span><span class="n">yOffset</span><span class="p">;</span> 
  <span class="p">}</span>
<span class="p">}</span>

<span class="n">void</span> <span class="nf">mouseReleased</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">locked</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="p">}</span></code></pre></figure>

<h3 id="c4-2">C4</h3>
<p><img src="MouseFunctions_C4.png" alt="" /></p>

<p>To achieve a similar effect in C4 requires a lot less code because iOS handles the gesture for you. Simply let the system track touch positions for you.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">override</span> <span class="kd">func</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">rect</span> <span class="o">=</span> <span class="kt">Rectangle</span><span class="p">(</span><span class="nv">frame</span><span class="p">:</span> <span class="kt">Rect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">))</span>
    <span class="n">rect</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">canvas</span><span class="o">.</span><span class="n">center</span>
    <span class="n">rect</span><span class="o">.</span><span class="n">strokeColor</span> <span class="o">=</span> <span class="n">clear</span>
    <span class="n">canvas</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">rect</span><span class="p">)</span>

    <span class="k">var</span> <span class="nv">position</span> <span class="o">=</span> <span class="kt">Point</span><span class="p">()</span>
    <span class="k">let</span> <span class="nv">press</span> <span class="o">=</span> <span class="n">rect</span><span class="o">.</span><span class="n">addLongPressGestureRecognizer</span> <span class="p">{</span> <span class="p">(</span><span class="n">locations</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">()</span> <span class="k">in</span>
        <span class="k">switch</span> <span class="n">state</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="kt">Began</span><span class="p">:</span>
            <span class="kt">ShapeLayer</span><span class="o">.</span><span class="n">disableActions</span> <span class="o">=</span> <span class="kc">true</span>
            <span class="n">rect</span><span class="o">.</span><span class="n">strokeColor</span> <span class="o">=</span> <span class="kt">C4Pink</span>
            <span class="n">rect</span><span class="o">.</span><span class="n">fillColor</span> <span class="o">=</span> <span class="n">white</span>
            <span class="n">position</span> <span class="o">=</span> <span class="n">center</span>
        <span class="k">case</span> <span class="o">.</span><span class="kt">Changed</span><span class="p">:</span>
            <span class="k">let</span> <span class="nv">dxdy</span> <span class="o">=</span> <span class="kt">Vector</span><span class="p">(</span><span class="n">center</span><span class="p">)</span> <span class="o">-</span> <span class="kt">Vector</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
            <span class="n">rect</span><span class="o">.</span><span class="n">center</span> <span class="o">+=</span> <span class="n">dxdy</span>
        <span class="k">case</span> <span class="o">.</span><span class="kt">Ended</span><span class="p">:</span>
            <span class="n">rect</span><span class="o">.</span><span class="n">strokeColor</span> <span class="o">=</span> <span class="n">clear</span>
            <span class="n">rect</span><span class="o">.</span><span class="n">fillColor</span> <span class="o">=</span> <span class="kt">C4Blue</span>
        <span class="k">default</span><span class="p">:</span>
            <span class="n">_</span> <span class="o">=</span> <span class="s">""</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">press</span><span class="o">.</span><span class="n">minimumPressDuration</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="p">}</span></code></pre></figure>

<h2 id="storing-input">Storing Input</h2>
<p>I really like the aesthetic of how the circles fade away as you move your mouse around the screen. In C4, there are no draw loops and we cannot rely on frame-based updating. However, we can create animations that give us the same effect!</p>

<h3 id="processing-3">Processing</h3>
<p><img src="StoringInput_P5.png" alt="" /></p>

<p>From: <a href="https://processing.org/examples/storinginput.html">Storing Input</a></p>

<blockquote>
  <p>Move the mouse across the screen to change the position of the circles. The positions of the mouse are recorded into an array and played back every frame. Between each frame, the newest value are added to the end of each array and the oldest value is deleted.</p>
</blockquote>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="n">int</span> <span class="n">num</span> <span class="o">=</span> <span class="mi">60</span><span class="p">;</span>
<span class="n">float</span> <span class="n">mx</span><span class="p">[]</span> <span class="o">=</span> <span class="k">new</span> <span class="n">float</span><span class="p">[</span><span class="n">num</span><span class="p">];</span>
<span class="n">float</span> <span class="n">my</span><span class="p">[]</span> <span class="o">=</span> <span class="k">new</span> <span class="n">float</span><span class="p">[</span><span class="n">num</span><span class="p">];</span>

<span class="n">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="nf">size</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span> <span class="mi">360</span><span class="p">);</span>
  <span class="nf">noStroke</span><span class="p">();</span>
  <span class="nf">fill</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">153</span><span class="p">);</span> 
<span class="p">}</span>

<span class="n">void</span> <span class="nf">draw</span><span class="p">()</span> <span class="p">{</span>
  <span class="nf">background</span><span class="p">(</span><span class="mi">51</span><span class="p">);</span> 
  
  <span class="c1">// Cycle through the array, using a different entry on each frame. </span>
  <span class="c1">// Using modulo (%) like this is faster than moving all the values over.</span>
  <span class="n">int</span> <span class="n">which</span> <span class="o">=</span> <span class="n">frameCount</span> <span class="o">%</span> <span class="n">num</span><span class="p">;</span>
  <span class="n">mx</span><span class="p">[</span><span class="n">which</span><span class="p">]</span> <span class="o">=</span> <span class="n">mouseX</span><span class="p">;</span>
  <span class="n">my</span><span class="p">[</span><span class="n">which</span><span class="p">]</span> <span class="o">=</span> <span class="n">mouseY</span><span class="p">;</span>
  
  <span class="k">for</span> <span class="p">(</span><span class="n">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">num</span><span class="p">;</span> <span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// which+1 is the smallest (the oldest in the array)</span>
    <span class="n">int</span> <span class="n">index</span> <span class="o">=</span> <span class="p">(</span><span class="n">which</span><span class="o">+</span><span class="mi">1</span> <span class="o">+</span> <span class="n">i</span><span class="p">)</span> <span class="o">%</span> <span class="n">num</span><span class="p">;</span>
    <span class="nf">ellipse</span><span class="p">(</span><span class="n">mx</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="n">my</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="n">i</span><span class="p">,</span> <span class="n">i</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<h3 id="c4-3">C4</h3>
<p><img src="StoringInput_C4.png" alt="" /></p>

<p>Here you’ll see how we create an animation for every circle which, upon completion, removes that circle from the canvas.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">override</span> <span class="kd">func</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">canvas</span><span class="o">.</span><span class="n">addPanGestureRecognizer</span> <span class="p">{</span> <span class="n">locations</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">translation</span><span class="p">,</span> <span class="n">velocity</span><span class="p">,</span> <span class="n">state</span> <span class="k">in</span>
        <span class="kt">ShapeLayer</span><span class="o">.</span><span class="n">disableActions</span> <span class="o">=</span> <span class="kc">true</span>
        <span class="k">let</span> <span class="nv">circle</span> <span class="o">=</span> <span class="kt">Circle</span><span class="p">(</span><span class="nv">center</span><span class="p">:</span> <span class="n">center</span><span class="p">,</span> <span class="nv">radius</span><span class="p">:</span> <span class="mi">30</span><span class="p">)</span>
        <span class="k">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">circle</span><span class="p">)</span>
        <span class="kt">ShapeLayer</span><span class="o">.</span><span class="n">disableActions</span> <span class="o">=</span> <span class="kc">false</span>

        <span class="k">let</span> <span class="nv">a</span> <span class="o">=</span> <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span> <span class="p">{</span>
            <span class="n">circle</span><span class="o">.</span><span class="n">opacity</span> <span class="o">=</span> <span class="mf">0.0</span>
            <span class="n">circle</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="nf">scale</span><span class="p">(</span><span class="mf">0.01</span><span class="p">,</span> <span class="mf">0.01</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="n">a</span><span class="o">.</span><span class="n">addCompletionObserver</span> <span class="p">{</span>
            <span class="n">circle</span><span class="o">.</span><span class="nf">removeFromSuperview</span><span class="p">()</span>
        <span class="p">}</span>
        <span class="n">a</span><span class="o">.</span><span class="n">curve</span> <span class="o">=</span> <span class="o">.</span><span class="kt">Linear</span>
        <span class="n">a</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<h2 id="continuous-lines">Continuous Lines</h2>
<p>Drawing a line in Processing is dead-easy. In C4, there’s a bit more complexity because a line is actually a <code class="highlighter-rouge">Shape</code> object. The major difference is that in C4 you end up with an object whose properties can be animated, copied, manipulated and styled rather than a bitmap.</p>

<h3 id="processing-4">Processing</h3>
<p><img src="ContinuousLine_P5.png" alt="" /></p>

<p>From: <a href="https://processing.org/examples/continuouslines.html">Continuous Lines</a></p>

<blockquote>
  <p>Click and drag the mouse to draw a line.</p>
</blockquote>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="n">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="nf">size</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span> <span class="mi">360</span><span class="p">);</span>
  <span class="nf">background</span><span class="p">(</span><span class="mi">102</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">void</span> <span class="nf">draw</span><span class="p">()</span> <span class="p">{</span>
  <span class="nf">stroke</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">mousePressed</span> <span class="o">==</span> <span class="kc">true</span><span class="p">)</span> <span class="p">{</span>
    <span class="nf">line</span><span class="p">(</span><span class="n">mouseX</span><span class="p">,</span> <span class="n">mouseY</span><span class="p">,</span> <span class="n">pmouseX</span><span class="p">,</span> <span class="n">pmouseY</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<h3 id="c4-4">C4</h3>
<p><img src="ContinuousLine_C4.png" alt="" /></p>

<p>Here you’ll see things are slightly more cumbersome because you have to create a shape object. But, it’s not <em>that</em> much more code <strong>and</strong> you can do a lot with the shape object.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">override</span> <span class="kd">func</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">p</span> <span class="o">=</span> <span class="kt">Path</span><span class="p">()</span>
    <span class="k">let</span> <span class="nv">poly</span> <span class="o">=</span> <span class="kt">Polygon</span><span class="p">()</span>
    <span class="n">canvas</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">poly</span><span class="p">)</span>
    <span class="n">canvas</span><span class="o">.</span><span class="n">addPanGestureRecognizer</span> <span class="p">{</span> <span class="n">locations</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">translation</span><span class="p">,</span> <span class="n">velocity</span><span class="p">,</span> <span class="n">state</span> <span class="k">in</span>
        <span class="k">if</span> <span class="n">state</span> <span class="o">==</span> <span class="o">.</span><span class="kt">Began</span> <span class="p">{</span>
            <span class="n">p</span><span class="o">.</span><span class="nf">moveToPoint</span><span class="p">(</span><span class="n">center</span><span class="p">)</span>
        <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
            <span class="n">p</span><span class="o">.</span><span class="nf">addLineToPoint</span><span class="p">(</span><span class="n">center</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="n">poly</span><span class="o">.</span><span class="n">path</span> <span class="o">=</span> <span class="n">p</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<h2 id="pattern">Pattern</h2>
<p>Tracking the speed of mouse movement requires you to store the previous position and do a little displacement calculation. In C4, the gesture recognizer handles that kind of thing for you.</p>

<h3 id="processing-5">Processing</h3>
<p><img src="Pattern_P5.png" alt="" /></p>

<p>From: <a href="https://processing.org/examples/pattern.html">Patterns</a></p>

<blockquote>
  <p>Move the cursor over the image to draw with a software tool which responds to the speed of the mouse.</p>
</blockquote>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="n">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="nf">size</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span> <span class="mi">360</span><span class="p">);</span>
  <span class="nf">background</span><span class="p">(</span><span class="mi">102</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">void</span> <span class="nf">draw</span><span class="p">()</span> <span class="p">{</span>
  <span class="nf">variableEllipse</span><span class="p">(</span><span class="n">mouseX</span><span class="p">,</span> <span class="n">mouseY</span><span class="p">,</span> <span class="n">pmouseX</span><span class="p">,</span> <span class="n">pmouseY</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">void</span> <span class="nf">variableEllipse</span><span class="p">(</span><span class="n">int</span> <span class="n">x</span><span class="p">,</span> <span class="n">int</span> <span class="n">y</span><span class="p">,</span> <span class="n">int</span> <span class="n">px</span><span class="p">,</span> <span class="n">int</span> <span class="n">py</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">float</span> <span class="n">speed</span> <span class="o">=</span> <span class="nf">abs</span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="n">px</span><span class="p">)</span> <span class="o">+</span> <span class="nf">abs</span><span class="p">(</span><span class="n">y</span><span class="o">-</span><span class="n">py</span><span class="p">);</span>
  <span class="nf">stroke</span><span class="p">(</span><span class="n">speed</span><span class="p">);</span>
  <span class="nf">ellipse</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">speed</span><span class="p">,</span> <span class="n">speed</span><span class="p">);</span>
<span class="p">}</span></code></pre></figure>

<h3 id="c4-5">C4</h3>
<p><img src="Pattern_C4.png" alt="" /></p>

<p>Here we grab the <code class="highlighter-rouge">velocity</code> of the pan gesture and use its values <code class="highlighter-rouge">x</code> and <code class="highlighter-rouge">y</code> to manipulate the size of a new circle as well as its <code class="highlighter-rouge">lineWidth</code>.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">override</span> <span class="kd">func</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">circles</span> <span class="o">=</span> <span class="p">[</span><span class="kt">Circle</span><span class="p">]()</span>
    <span class="n">canvas</span><span class="o">.</span><span class="n">addPanGestureRecognizer</span> <span class="p">{</span> <span class="n">locations</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">translation</span><span class="p">,</span> <span class="n">velocity</span><span class="p">,</span> <span class="n">state</span> <span class="k">in</span>
        <span class="k">let</span> <span class="nv">c</span> <span class="o">=</span> <span class="kt">Circle</span><span class="p">(</span><span class="nv">center</span><span class="p">:</span> <span class="n">center</span><span class="p">,</span> <span class="nv">radius</span><span class="p">:</span> <span class="nf">abs</span><span class="p">(</span><span class="n">velocity</span><span class="o">.</span><span class="n">x</span><span class="o">/</span><span class="mf">50.0</span><span class="p">))</span>
        <span class="n">c</span><span class="o">.</span><span class="n">lineWidth</span> <span class="o">=</span> <span class="nf">abs</span><span class="p">(</span><span class="n">velocity</span><span class="o">.</span><span class="n">y</span><span class="o">/</span><span class="mf">100.0</span><span class="p">)</span>
        <span class="k">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="n">circles</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">circles</span><span class="o">.</span><span class="n">count</span> <span class="o">&gt;</span> <span class="mi">100</span> <span class="p">{</span>
            <span class="n">circles</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="nf">removeFromSuperview</span><span class="p">()</span>
            <span class="n">circles</span><span class="o">.</span><span class="nf">removeAtIndex</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<h2 id="vectormath">VectorMath</h2>
<p>Vector math is a powerful component of Processing, and C4 too.</p>

<h3 id="processing-6">Processing</h3>
<p><img src="VectorMath_P5.png" alt="" /></p>

<p>From: <a href="https://processing.org/examples/vectormath.html">Vector Math</a></p>

<blockquote>
  <p>Demonstrating some basic vector math: subtraction, normalization, scaling.  Normalizing a vector sets its length to 1.</p>
</blockquote>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="n">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="nf">size</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span><span class="mi">360</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">void</span> <span class="nf">draw</span><span class="p">()</span> <span class="p">{</span>
  <span class="nf">background</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  
  <span class="kt">PVector</span> <span class="n">mouse</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">PVector</span><span class="p">(</span><span class="n">mouseX</span><span class="p">,</span><span class="n">mouseY</span><span class="p">);</span>
  <span class="kt">PVector</span> <span class="n">center</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">PVector</span><span class="p">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span>
  <span class="n">mouse</span><span class="o">.</span><span class="nf">sub</span><span class="p">(</span><span class="n">center</span><span class="p">);</span>
  <span class="n">mouse</span><span class="o">.</span><span class="nf">normalize</span><span class="p">();</span>
  <span class="n">mouse</span><span class="o">.</span><span class="nf">mult</span><span class="p">(</span><span class="mi">150</span><span class="p">);</span>

  <span class="nf">translate</span><span class="p">(</span><span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span>

  <span class="nf">stroke</span><span class="p">(</span><span class="mi">255</span><span class="p">);</span>
  <span class="nf">strokeWeight</span><span class="p">(</span><span class="mi">4</span><span class="p">);</span>
  <span class="nf">line</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">mouse</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">mouse</span><span class="o">.</span><span class="n">y</span><span class="p">);</span>
  
<span class="p">}</span></code></pre></figure>

<h3 id="c4-6">C4</h3>
<p><img src="VectorMath_C4.png" alt="" /></p>

<p>Setting the <code class="highlighter-rouge">anchorPoint</code> to <code class="highlighter-rouge"><span class="p">{</span><span class="err">0,</span><span class="w"> </span><span class="err">0</span><span class="p">}</span></code> allows for rotating the shape around the beginning of the line, rather than its <code class="highlighter-rouge">center</code>.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">override</span> <span class="kd">func</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">line</span> <span class="o">=</span> <span class="kt">Line</span><span class="p">((</span><span class="kt">Point</span><span class="p">(),</span><span class="kt">Point</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">0</span><span class="p">)))</span>
    <span class="n">line</span><span class="o">.</span><span class="n">opacity</span> <span class="o">=</span> <span class="mf">0.25</span>
    <span class="n">line</span><span class="o">.</span><span class="n">anchorPoint</span> <span class="o">=</span> <span class="kt">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">line</span><span class="o">.</span><span class="n">lineWidth</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="n">line</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">canvas</span><span class="o">.</span><span class="n">center</span>
    <span class="n">canvas</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

    <span class="k">let</span> <span class="nv">vc</span> <span class="o">=</span> <span class="kt">Vector</span><span class="p">(</span><span class="n">canvas</span><span class="o">.</span><span class="n">center</span><span class="p">)</span>
    <span class="n">canvas</span><span class="o">.</span><span class="n">addPanGestureRecognizer</span> <span class="p">{</span> <span class="n">locations</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">translation</span><span class="p">,</span> <span class="n">velocity</span><span class="p">,</span> <span class="n">state</span> <span class="k">in</span>
        <span class="k">let</span> <span class="nv">vl</span> <span class="o">=</span> <span class="kt">Vector</span><span class="p">(</span><span class="n">center</span><span class="p">)</span>
        <span class="k">let</span> <span class="nv">Θ</span> <span class="o">=</span> <span class="p">(</span><span class="n">vl</span><span class="o">-</span><span class="n">vc</span><span class="p">)</span><span class="o">.</span><span class="n">heading</span>

        <span class="kt">ShapeLayer</span><span class="o">.</span><span class="n">disableActions</span> <span class="o">=</span> <span class="kc">true</span>
        <span class="n">line</span><span class="o">.</span><span class="n">rotation</span> <span class="o">=</span> <span class="kt">Θ</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<h2 id="follow1">Follow1</h2>
<p>This builds on the <code class="highlighter-rouge">VectorMath</code> example by showing how you can embed objects in one another.</p>

<h3 id="processing-7">Processing</h3>
<p><img src="Follow1_P5.png" alt="" /></p>

<p>From: <a href="https://processing.org/examples/follow1.html">Follow 1</a></p>

<blockquote>
  <p>A line segment is pushed and pulled by the cursor.</p>
</blockquote>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="n">float</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
<span class="n">float</span> <span class="n">y</span> <span class="o">=</span> <span class="mi">100</span><span class="p">;</span>
<span class="n">float</span> <span class="n">angle1</span> <span class="o">=</span> <span class="mf">0.0</span><span class="p">;</span>
<span class="n">float</span> <span class="n">segLength</span> <span class="o">=</span> <span class="mi">50</span><span class="p">;</span>

<span class="n">void</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="nf">size</span><span class="p">(</span><span class="mi">640</span><span class="p">,</span> <span class="mi">360</span><span class="p">);</span>
  <span class="nf">strokeWeight</span><span class="p">(</span><span class="mf">20.0</span><span class="p">);</span>
  <span class="nf">stroke</span><span class="p">(</span><span class="mi">255</span><span class="p">,</span> <span class="mi">100</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">void</span> <span class="nf">draw</span><span class="p">()</span> <span class="p">{</span>
  <span class="nf">background</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  
  <span class="n">float</span> <span class="n">dx</span> <span class="o">=</span> <span class="n">mouseX</span> <span class="o">-</span> <span class="n">x</span><span class="p">;</span>
  <span class="n">float</span> <span class="n">dy</span> <span class="o">=</span> <span class="n">mouseY</span> <span class="o">-</span> <span class="n">y</span><span class="p">;</span>
  <span class="n">angle1</span> <span class="o">=</span> <span class="nf">atan2</span><span class="p">(</span><span class="n">dy</span><span class="p">,</span> <span class="n">dx</span><span class="p">);</span>  
  <span class="n">x</span> <span class="o">=</span> <span class="n">mouseX</span> <span class="o">-</span> <span class="p">(</span><span class="nf">cos</span><span class="p">(</span><span class="n">angle1</span><span class="p">)</span> <span class="o">*</span> <span class="n">segLength</span><span class="p">);</span>
  <span class="n">y</span> <span class="o">=</span> <span class="n">mouseY</span> <span class="o">-</span> <span class="p">(</span><span class="nf">sin</span><span class="p">(</span><span class="n">angle1</span><span class="p">)</span> <span class="o">*</span> <span class="n">segLength</span><span class="p">);</span>
 
  <span class="nf">segment</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">angle1</span><span class="p">);</span> 
  <span class="nf">ellipse</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">20</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">void</span> <span class="nf">segment</span><span class="p">(</span><span class="n">float</span> <span class="n">x</span><span class="p">,</span> <span class="n">float</span> <span class="n">y</span><span class="p">,</span> <span class="n">float</span> <span class="n">a</span><span class="p">)</span> <span class="p">{</span>
  <span class="nf">pushMatrix</span><span class="p">();</span>
  <span class="nf">translate</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span>
  <span class="nf">rotate</span><span class="p">(</span><span class="n">a</span><span class="p">);</span>
  <span class="nf">line</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">segLength</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  <span class="nf">popMatrix</span><span class="p">();</span>
<span class="p">}</span></code></pre></figure>

<h3 id="c4-7">C4</h3>
<p><img src="Follow1_C4.png" alt="" /></p>

<p>You’ll see here that the <code class="highlighter-rouge">Vector</code> class has many functions that are identical to Processing. The difference between these two examples is that we don’t have calls to <code class="highlighter-rouge">pushMatrix()</code> and <code class="highlighter-rouge">popMatrix()</code>. Instead, we position the circle (which has the line embedded as a subview).</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><span class="k">override</span> <span class="kd">func</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">circle</span> <span class="o">=</span> <span class="kt">Circle</span><span class="p">(</span><span class="nv">center</span><span class="p">:</span> <span class="kt">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="nv">radius</span><span class="p">:</span> <span class="mi">10</span><span class="p">)</span>
    <span class="n">circle</span><span class="o">.</span><span class="n">strokeColor</span> <span class="o">=</span> <span class="kt">C4Purple</span><span class="o">.</span><span class="nf">colorWithAlpha</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span>
    <span class="n">circle</span><span class="o">.</span><span class="n">lineWidth</span> <span class="o">=</span> <span class="mf">20.0</span>

    <span class="k">let</span> <span class="nv">line</span> <span class="o">=</span> <span class="kt">Line</span><span class="p">((</span><span class="kt">Point</span><span class="p">(),</span><span class="kt">Point</span><span class="p">(</span><span class="mi">50</span><span class="p">,</span><span class="mi">0</span><span class="p">)))</span>
    <span class="n">line</span><span class="o">.</span><span class="n">opacity</span> <span class="o">=</span> <span class="mf">0.25</span>
    <span class="n">line</span><span class="o">.</span><span class="n">anchorPoint</span> <span class="o">=</span> <span class="kt">Point</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">line</span><span class="o">.</span><span class="n">lineWidth</span> <span class="o">=</span> <span class="mi">20</span>
    <span class="n">line</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">circle</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">center</span>

    <span class="n">circle</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
    <span class="n">canvas</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">circle</span><span class="p">)</span>

    <span class="k">var</span> <span class="nv">v</span> <span class="o">=</span> <span class="kt">Vector</span><span class="p">()</span>
    <span class="n">canvas</span><span class="o">.</span><span class="n">addPanGestureRecognizer</span> <span class="p">{</span> <span class="n">locations</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">translation</span><span class="p">,</span> <span class="n">velocity</span><span class="p">,</span> <span class="n">state</span> <span class="k">in</span>
        <span class="k">let</span> <span class="nv">vl</span> <span class="o">=</span> <span class="kt">Vector</span><span class="p">(</span><span class="n">center</span><span class="p">)</span>
        <span class="k">let</span> <span class="nv">dxdy</span> <span class="o">=</span> <span class="n">vl</span><span class="o">-</span><span class="n">v</span>
        <span class="k">let</span> <span class="nv">Θ</span> <span class="o">=</span> <span class="n">dxdy</span><span class="o">.</span><span class="n">heading</span>

        <span class="n">v</span> <span class="o">=</span> <span class="n">vl</span> <span class="o">-</span> <span class="kt">Vector</span><span class="p">(</span><span class="nv">x</span><span class="p">:</span> <span class="nf">cos</span><span class="p">(</span><span class="kt">Θ</span><span class="p">)</span> <span class="o">*</span> <span class="mi">50</span><span class="p">,</span> <span class="nv">y</span><span class="p">:</span> <span class="nf">sin</span><span class="p">(</span><span class="kt">Θ</span><span class="p">)</span> <span class="o">*</span> <span class="mi">50</span><span class="p">)</span>

        <span class="kt">ShapeLayer</span><span class="o">.</span><span class="n">disableActions</span> <span class="o">=</span> <span class="kc">true</span>
        <span class="n">circle</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="kt">Point</span><span class="p">(</span><span class="n">v</span><span class="o">.</span><span class="n">x</span><span class="p">,</span> <span class="n">v</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>
        <span class="n">line</span><span class="o">.</span><span class="n">rotation</span> <span class="o">=</span> <span class="kt">Θ</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<h3 id="want-to-contribute">Want to Contribute?</h3>
<p>We’d love to have a bigger list of comparisons to other open-source projects. If you’ve created some comparison examples let us know and we can publish them here with you as the author.</p>

        </div>
      </div>
    </div>

    <div class="container">
      <div class="row related-tutorial">
        <div class="col-xs-12 col-md-12">
          <h1 class="text-center blue">Nice Work! Explore More Tutorials?</h1>
          <ul class="examples-list list-unstyled">
            
            
              <li>
                <a href="/tutorials/slack-logo/">
                  <div>
                    <span class="img">
                      <img src="/images/tutorials/slack-logo/poster.png" />
                    </span>
                    <div class="text">
                      <p><span>Slack Logo</span><br />Animating the Slack Logo.</p>
                    </div>                    
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/tutorials/customizing-switch/">
                  <div>
                    <span class="img">
                      <img src="/images/tutorials/customizing-switch/poster.png" />
                    </span>
                    <div class="text">
                      <p><span>Customizing A Switch</span><br />We've already hacked UISwitch, now let's add animations!</p>
                    </div>                    
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/tutorials/skype/">
                  <div>
                    <span class="img">
                      <img src="/images/tutorials/skype/poster.png" />
                    </span>
                    <div class="text">
                      <p><span>Skype Loader</span><br />A View within a View within a View.</p>
                    </div>                    
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/tutorials/checkmark/">
                  <div>
                    <span class="img">
                      <img src="/images/tutorials/checkmark/poster.png" />
                    </span>
                    <div class="text">
                      <p><span>Checkmark</span><br />An sweetly timed animation.</p>
                    </div>                    
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/tutorials/hacking-uiswitch/">
                  <div>
                    <span class="img">
                      <img src="/images/tutorials/hacking-uiswitch/poster.png" />
                    </span>
                    <div class="text">
                      <p><span>Hacking UISwitch</span><br />How to hack a UIKit component.</p>
                    </div>                    
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/tutorials/processing/">
                  <div>
                    <span class="img">
                      <img src="/images/tutorials/processing/poster.png" />
                    </span>
                    <div class="text">
                      <p><span>Processing Examples</span><br />A brief comparison of Processing and C4.</p>
                    </div>                    
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/tutorials/basics/">
                  <div>
                    <span class="img">
                      <img src="/images/tutorials/basics/poster.png" />
                    </span>
                    <div class="text">
                      <p><span>Basics</span><br />An intro to C4's basic objects and features.</p>
                    </div>                    
                  </div>
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-md-3 col-sm-3 col-xs-6">
        <ul class="list-unstyled">
          <li class="title"><a href="/#overview">About</a></li>
          <li><a href="/#overview">Features</a></li>
          <!-- <li><a href="/about#history">History</a></li> -->
          <!-- <li><a href="/about/contributors">Contributors</a></li> -->
        </ul>
      </div>
      <div class="col-md-3 col-sm-3 col-xs-6">
        <ul class="list-unstyled">
          <li class="title"><a href="/learn">Learn + Explore</a></li>
          <li><a href="/install">Install C4</a></li>
          <li><a href="/examples">Examples</a></li>
          <li><a href="/tutorials">Tutorials</a></li>
          <li><a href="http://cocoadocs.org/docsets/C4/1.1.0/">Docs</a></li>
        </ul>
      </div>
      <div class="col-md-3 col-sm-3 col-xs-6">
        <ul class="list-unstyled">
          <li class="title"><a href="/contact">Connect</a></li>
          <li><a href="http://discourse.c4ios.com">Forums</a></li>
          <li><a href="http://www.medium.com/@c4framework" target="_blank">Medium</a></li>
          <li><a href="http://www.twitter.com/c4framework" target="_blank">Twitter</a></li>
          <li><a href="https://join-c4.herokuapp.com/" target="_blank">Slack</a></li>
          <li><a href="https://vimeo.com/c4ios" target="_blank">Vimeo</a></li>
          <li><a href="http://github.com/c4framework" target="_blank">GitHub</a></li>
        </ul>
      </div>
      <div class="col-md-3 col-sm-3 col-xs-6">
        <ul class="list-unstyled">
          <!-- <li class="title"><a href="/about">Sign Up for Newsletter</a></li>
          <li><input type="text" placeholder="Enter Email + Press Enter"></li> -->
          <li>© 2016 C4</li>
          <li><a href="/terms">Terms of Use</a></li>
          <li><a href="mailto:info@c4ios.com">Contact</a></li>
        </ul>    
      </div>
    </div>
  </div>
</footer>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-18444113-4', 'auto');
  ga('send', 'pageview');
</script>


    <script type="text/javascript" src="/js/toc.js"></script>
    <script>
     (function(d, t) {
        var g = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        g.src = 'http://assets.gfycat.com/js/gfyajax-0.517d.js';
        s.parentNode.insertBefore(g, s);
      }(document, 'script'));
    </script>
    <script type="text/javascript">
      $(document).ready(function() {
        $('#toc').width($('#toc').parents().width());

        $('#toc').toc({
          elementClass: 'toc',
          ulClass: 'nav',
          heading: 'Contents',
          indexingFormats: 'number',
          selector: 'h2:not(.toc-omit), h3:not(.toc-omit), h4:not(.toc-omit)'
        });

        $('body').scrollspy({
          target: '#toc',
          offset: $('#headerNav').outerHeight(true)
        });

        setTimeout(function() {
          var $sideBar = $('#toc');
          $sideBar.affix({
            offset: {
              top: function() {
                var offsetTop = $sideBar.offset().top,
                sideBarMargin  = parseInt($sideBar.children(0).css('margin-top'), 10),
                navOuterHeight = $('#headerNav').height();
                return (this.top = offsetTop - navOuterHeight - sideBarMargin);
              },
              bottom: function() {
                return (this.bottom = $('footer').outerHeight(true) + $('.chapter-nav').outerHeight(true) + $('.related-tutorial').outerHeight(true) + 500);
              }
            }
          });
        }, 100);

        $('td.gutter').each(function(index)
        {
          $(this).parents('.language-swift').closest('pre').addClass('has-gutter');
        });

        $('.tutorial img').each(function()
        {
          var img = $(this).attr('src');
          $(this).attr('src', '/images/tutorials/processing/' + img + '').addClass('img-responsive');
        });

        $('.tutorial p img').unwrap().wrap('<figure></figure>').after(function() {
            return '<figcaption>'+this.alt+'</figcaption>';
        });

        $('.footnotes').prepend('<h4>Footnotes</h4>');
      });
    </script>
  </body>
</html>
