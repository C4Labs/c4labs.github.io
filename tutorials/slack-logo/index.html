<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
	

  <title>Slack Logo</title>
  <meta name="description" content="Slack Animation Example">
  <meta property="og:image" content="http://www.c4ios.com/images/banner.jpg">
  <meta property="og:url"   content="http://c4ios.com" />
  <meta property="og:title" content="Slack Logo"/>
  <meta name="og:description" content="Slack Animation Example">
  <meta property="og:type"  content="website"/>
  <meta property="og:site_name"  content="C4"/>

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@c4framework">
  <meta name="twitter:creator" content="@c4framework">
  <meta name="twitter:title" content="Slack Logo">
  <meta name="twitter:description" content="Slack Animation Example">
  <meta name="twitter:image" content="http://www.c4ios.com/images/banner.jpg">


  <link rel="stylesheet" type="text/css" href="/css/style.css" >
  <link rel="stylesheet" href="/css/syntax.css">
  <link href='https://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>

  <link rel="canonical" href="www.c4ios.com/tutorials/slack-logo/">
  <link rel="alternate" type="application/rss+xml" title="C4 website" href="www.c4ios.com/feed.xml">
</head>

    <body class="slack logo" data-spy="scroll" data-target="#toc">

    <header>
  <nav class="navbar navbar-default" role="navigation"> 
    <div class="navbar-header container">
      <div class="row"> 
        <div class="col-xs-12 col-sm-12 col-md-12 navlist">
          <a class="navbar-brand" href="/">
            <span><img src="/images/c4logo.png"></span>
          </a>
          <ul class="nav navbar-nav navbar-left">
            <li><a href="/install" >Install</a></li>
            <li><a href="/tutorials" class='active'>Tutorials</a></li>
            <li><a href="/cosmos" >COSMOS</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/examples" >Examples</a></li>
            <li><a href="http://discourse.c4ios.com">Forums</a></li>
            <li><a href="http://cocoadocs.org/docsets/C4/1.1.0/">Documentation</a></li>
          </ul>
        </div>
      </div>  
    </div>        
  </nav>      
</header>

    <div class="container content slack logo" >
      <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 breadcrumb">
          <h1><a href="/tutorials">Tutorials</a><div class="bread-caret">></div>Slack Logo</h1>
        </div>
      </div>

      <div class="row">
        <div class="col-xs-3 col-sm-3 col-md-3">
          <span class="img large">
            <img src="/images/tutorials/slack-logo/poster.png" />
          </span>
          <p>Author<br /><span class="lighter"></span></p>
          <p>Tags<br /><a href="/tag/getting started">getting started</a>, <a href="/tag/basics">basics</a>, <a href="/tag/introduction">introduction</a>, <a href="/tag/easy">easy</a>, <a href="/tag/c4">c4</a>, </p>
          <p>Estimated Time<br /><span class="lighter">10 - 20 minutes</span></p>

          <hr />

          <div id="toc"></div>
        </div>

        <div class="col-xs-9 col-sm-9 col-md-9 tutorial">
          <h1 id="slack-animation-example">Slack Animation Example</h1>

<p>In this tutorial, we’re going to recreate the Slack loading animation.</p>

<p><img src="dasLogo.png" alt="" /></p>

<p>This is the second in a series of loading animation tutorials. In the last installment, we covered the <a href="http://www.c4ios.com/tutorials/skype">Skype loading animation</a>. This example has some similarities but is a little more complex. So no slacking, let’s get started.</p>

<blockquote>
  <p>If you haven’t already done so, install C4 by following the instructions on our <a href="http://www.c4ios.com/install">install tutorial</a>. The easiest is to use the first option.</p>
</blockquote>

<h2 id="the-slackline">The SlackLine</h2>
<p>The slack logo is made up of 4 lines that animate in all kinds of funky ways: rotations, movements, translations, overlays, etc. But, despite the seeming complexity, there really is just 1 element. So, we’re going to build a class that represents the look and motion of a single line.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Create a new C4 Project
</code></pre>
</div>

<p>Then…</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Create a new file called SlackLine.swift
</code></pre>
</div>

<p>Make a subclass of <code class="highlighter-rouge">View</code> by adding this code:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="kd">class</span> <span class="kt">SlackLine</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>

<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<h3 id="properties">Properties</h3>
<p>Add the following two properties as class variables:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="k">var</span> <span class="nv">line</span><span class="p">:</span> <span class="kt">Line</span><span class="o">!</span>
<span class="k">var</span> <span class="nv">strokeColor</span><span class="p">:</span> <span class="kt">Color</span> <span class="o">=</span> <span class="kt">C4Blue</span> <span class="p">{</span>
    <span class="k">didSet</span> <span class="p">{</span>
        <span class="n">line</span><span class="o">.</span><span class="n">strokeColor</span> <span class="o">=</span> <span class="n">strokeColor</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Straightforward, each line needs a <code class="highlighter-rouge">Line</code> and a color.</p>

<h3 id="initialization">Initialization</h3>
<p>We need to create a line, position and style it properly.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></td><td class="code"><pre><span class="k">override</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">super</span><span class="o">.</span><span class="nf">init</span><span class="p">()</span>
    <span class="k">self</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="kt">Rect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">106</span><span class="p">,</span><span class="mf">18.0</span><span class="p">)</span>
    <span class="n">line</span> <span class="o">=</span> <span class="kt">Line</span><span class="p">(</span><span class="kt">Point</span><span class="p">(</span><span class="n">height</span><span class="o">/</span><span class="mf">2.0</span><span class="p">,</span><span class="n">height</span><span class="o">/</span><span class="mf">2.0</span><span class="p">),</span><span class="kt">Point</span><span class="p">(</span><span class="n">width</span><span class="o">-</span><span class="n">height</span><span class="o">/</span><span class="mf">2.0</span><span class="p">,</span><span class="n">height</span><span class="o">/</span><span class="mf">2.0</span><span class="p">))</span>
    <span class="n">line</span><span class="o">.</span><span class="n">lineWidth</span> <span class="o">=</span> <span class="n">height</span>
    <span class="nf">add</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

    <span class="n">square</span><span class="o">.</span><span class="n">corner</span> <span class="o">=</span> <span class="kt">Size</span><span class="p">()</span>
    <span class="n">square</span><span class="o">.</span><span class="n">lineWidth</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">square</span><span class="o">.</span><span class="n">hidden</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="nf">add</span><span class="p">(</span><span class="n">square</span><span class="p">)</span>

    <span class="n">squareMask</span><span class="o">.</span><span class="n">lineWidth</span> <span class="o">=</span> <span class="n">height</span>
    <span class="n">square</span><span class="o">.</span><span class="n">mask</span> <span class="o">=</span> <span class="n">squareMask</span>

    <span class="k">var</span> <span class="nv">anchor</span> <span class="o">=</span> <span class="n">square</span><span class="o">.</span><span class="n">center</span>
    <span class="n">anchor</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">height</span> <span class="o">*</span> <span class="mf">0.26</span>
    <span class="n">anchor</span><span class="o">.</span><span class="n">x</span> <span class="o">/=</span> <span class="n">width</span>
    <span class="n">anchor</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mf">0.5</span>
    <span class="n">squareMask</span><span class="o">.</span><span class="n">anchorPoint</span> <span class="o">=</span> <span class="n">anchor</span>

<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<h3 id="animate">animate()</h3>
<p>The timing of the Slack logo animation is a tricky one to pull apart. We spent a lot of time with our noses pressed up against our screens trying to figure out all the different steps (we even recorded the animation and stepped through it one frame at a time).</p>

<p>This is our initial breakdown of the steps in the animation:</p>

<ol>
  <li>The line’s stroke animates to a point.</li>
  <li>The line begins to rotate.</li>
  <li>As the line is rotating the point moves from one end of the line to the other.</li>
  <li>When the rotation ends the line animates from a point, back to a full line shape (in the opposite direction of step 1.).</li>
  <li>The line bounces a little bit before coming to a stop.</li>
</ol>

<blockquote>
  <p>This took a long time to figure out… There was a lot of iteration over the steps of the animation (in code) before finally feeling like we nailed the process.</p>
</blockquote>

<p>The following function is a basic version of the 5-step animation, add it to your class:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30</pre></td><td class="code"><pre><span class="kd">func</span> <span class="nf">animate</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">strokeOut</span> <span class="o">=</span> <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">strokeEnd</span> <span class="o">=</span> <span class="mf">0.01</span>
    <span class="p">}</span>
    <span class="n">strokeOut</span><span class="o">.</span><span class="n">curve</span> <span class="o">=</span> <span class="o">.</span><span class="kt">EaseOut</span>
    <span class="n">strokeOut</span><span class="o">.</span><span class="n">delay</span> <span class="o">=</span> <span class="mf">0.1</span>

    <span class="k">let</span> <span class="nv">shiftStroke</span> <span class="o">=</span> <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">strokeStart</span> <span class="o">=</span> <span class="mf">0.99</span>
        <span class="k">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">strokeEnd</span> <span class="o">=</span> <span class="mf">1.0</span>
    <span class="p">}</span>
    <span class="n">shiftStroke</span><span class="o">.</span><span class="n">delay</span> <span class="o">=</span> <span class="mf">0.35</span>
    <span class="n">shiftStroke</span><span class="o">.</span><span class="n">curve</span> <span class="o">=</span> <span class="o">.</span><span class="kt">EaseIn</span>

    <span class="k">let</span> <span class="nv">strokeIn</span> <span class="o">=</span> <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mf">0.15</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">lineWidth</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="k">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">strokeStart</span> <span class="o">=</span> <span class="mf">0.05</span>
        <span class="k">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="nf">scale</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mf">1.05</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">strokeIn</span><span class="o">.</span><span class="n">delay</span> <span class="o">=</span> <span class="mf">0.2</span>

    <span class="k">let</span> <span class="nv">bounceOut</span> <span class="o">=</span> <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mf">0.15</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="nf">scale</span><span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="k">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">lineWidth</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">strokeStart</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="p">}</span>

    <span class="k">let</span> <span class="nv">seq</span> <span class="o">=</span> <span class="kt">ViewAnimationSequence</span><span class="p">(</span><span class="nv">animations</span><span class="p">:</span> <span class="p">[</span><span class="n">strokeOut</span><span class="p">,</span> <span class="n">shiftStroke</span><span class="p">,</span> <span class="n">strokeIn</span><span class="p">,</span> <span class="n">bounceOut</span><span class="p">])</span>
    <span class="n">seq</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Here are a couple things to take note of:</p>

<ul>
  <li>Assigning <code class="highlighter-rouge">strokeEnd</code> to <code class="highlighter-rouge">0.01</code> and <code class="highlighter-rouge">0.99</code> preserves the circle / dot / point shape.</li>
  <li>In <code class="highlighter-rouge">shiftStroke</code> animating both the start and end points makes it look like the dot is actually moving from one end of the line to the other.</li>
  <li>In <code class="highlighter-rouge">strokeIn</code> animating the line width by <code class="highlighter-rouge">-1</code>, and the scale of <code class="highlighter-rouge">1/1.05</code> sets up for the bounce animation.</li>
  <li>The <code class="highlighter-rouge">bounceOut</code> resets the line to its original dimensions.</li>
</ul>

<h2 id="the-logo">The Logo</h2>
<p>Now that we have our basic line, let’s put four of them together into a logo. First…</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Create a new file called SlackLogo.swift
</code></pre>
</div>

<p>…and add the following class:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="kd">class</span> <span class="kt">SlackLogo</span><span class="p">:</span> <span class="kt">View</span><span class="p">{</span>

<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<h3 id="properties-1">Properties</h3>
<p>Next, add a few <code class="highlighter-rouge">Color</code> variables:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="k">let</span> <span class="nv">slackGreen</span> <span class="o">=</span> <span class="kt">Color</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="mf">0.31</span><span class="p">,</span> <span class="nv">green</span><span class="p">:</span> <span class="mf">0.76</span><span class="p">,</span> <span class="nv">blue</span><span class="p">:</span> <span class="mf">0.61</span><span class="p">,</span> <span class="nv">alpha</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">slackBlue</span> <span class="o">=</span> <span class="kt">Color</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="mf">0.51</span><span class="p">,</span> <span class="nv">green</span><span class="p">:</span> <span class="mf">0.80</span><span class="p">,</span> <span class="nv">blue</span><span class="p">:</span> <span class="mf">0.85</span><span class="p">,</span> <span class="nv">alpha</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">slackYellow</span> <span class="o">=</span> <span class="kt">Color</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="mf">0.91</span><span class="p">,</span> <span class="nv">green</span><span class="p">:</span> <span class="mf">0.70</span><span class="p">,</span> <span class="nv">blue</span><span class="p">:</span> <span class="mf">0.21</span><span class="p">,</span> <span class="nv">alpha</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="k">let</span> <span class="nv">slackPink</span> <span class="o">=</span> <span class="kt">Color</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="mf">0.87</span><span class="p">,</span> <span class="nv">green</span><span class="p">:</span> <span class="mf">0.10</span><span class="p">,</span> <span class="nv">blue</span><span class="p">:</span> <span class="mf">0.42</span><span class="p">,</span> <span class="nv">alpha</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<blockquote>
  <p>We eyedropped these using the Mac Color Picker… Don’t trust Sketch.</p>
</blockquote>

<p>Next, add an array of points, we’ll use these to position each line:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="k">var</span> <span class="nv">positions</span> <span class="o">=</span> <span class="p">[</span><span class="kt">Point</span><span class="p">(</span><span class="mf">53.0</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">),</span><span class="kt">Point</span><span class="p">(</span><span class="mf">76.0</span><span class="p">,</span> <span class="mf">53.0</span><span class="p">),</span><span class="kt">Point</span><span class="p">(</span><span class="mf">53.0</span><span class="p">,</span> <span class="mf">76.0</span><span class="p">),</span><span class="kt">Point</span><span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">53.0</span><span class="p">)]</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Finally, add an empty array to hold reference to the lines:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="k">var</span> <span class="nv">slackLines</span> <span class="o">=</span> <span class="p">[</span><span class="kt">SlackLine</span><span class="p">]()</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<h3 id="initialization-1">Initialization</h3>
<p>We’re now ready to create our logo. Add the following initializtion function:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></td><td class="code"><pre><span class="k">override</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">super</span><span class="o">.</span><span class="nf">init</span><span class="p">()</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="kt">Rect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">106</span><span class="p">,</span><span class="mi">106</span><span class="p">)</span>

    <span class="k">var</span> <span class="nv">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">slackGreen</span><span class="p">,</span> <span class="n">slackBlue</span><span class="p">,</span> <span class="n">slackYellow</span><span class="p">,</span> <span class="n">slackPink</span><span class="p">]</span>
    <span class="k">var</span> <span class="nv">smallSquareColors</span> <span class="o">=</span> <span class="p">[</span><span class="n">slackGreenOverlay</span><span class="p">,</span> <span class="n">slackBlueOverlay</span><span class="p">,</span> <span class="n">slackYellowOverlay</span><span class="p">,</span> <span class="n">slackPinkOverlay</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">0</span><span class="o">...</span><span class="mi">3</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">slackline</span> <span class="o">=</span> <span class="kt">SlackLine</span><span class="p">()</span>
        <span class="n">slackline</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">positions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">slackline</span><span class="o">.</span><span class="n">strokeColor</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">slackline</span><span class="o">.</span><span class="n">squareColor</span> <span class="o">=</span> <span class="n">smallSquareColors</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

        <span class="k">let</span> <span class="nv">dir</span> <span class="o">=</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">?</span> <span class="mf">1.0</span> <span class="p">:</span> <span class="o">-</span><span class="mf">1.0</span>
        <span class="n">slackline</span><span class="o">.</span><span class="n">transform</span> <span class="o">=</span> <span class="kt">Transform</span><span class="o">.</span><span class="nf">makeRotation</span><span class="p">(</span><span class="n">dir</span> <span class="o">*</span> <span class="kt">Double</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="kt">M_PI</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>

        <span class="n">slackLines</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="n">slackline</span><span class="p">)</span>
        <span class="nf">add</span><span class="p">(</span><span class="n">slackline</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">rotation</span> <span class="o">=</span> <span class="o">-</span><span class="kt">M_PI</span><span class="o">/</span><span class="mf">10.0</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>This function is pretty straightforward, but it has two important points:</p>

<ul>
  <li>The <code class="highlighter-rouge">slackline.transform = ..</code> rotates each line so that it is oriented in the right way</li>
  <li>The <code class="highlighter-rouge">rotation = -M_PI/10.0</code> is applied to the view that contains all the lines, this accounts for the rotated look of the hash tag</li>
</ul>

<h3 id="run-it">Run It!</h3>
<p>You’re at a point where you can see some good progress. So, pop on back over to <code class="highlighter-rouge">WorkSpace</code> and update its <code class="highlighter-rouge">setup()</code> to look like this:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre><span class="k">override</span> <span class="kd">func</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">sl</span> <span class="o">=</span> <span class="kt">SlackLogo</span><span class="p">()</span>
    <span class="n">sl</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">canvas</span><span class="o">.</span><span class="n">center</span>
    <span class="n">canvas</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">sl</span><span class="p">)</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Now, run the application and you should see this:</p>

<p><img src="basicSlackLogo.png" alt="" /></p>

<p>Notice the green line overlays 2 other lines?! Unfortunately iOS doesn’t have real-time overlay effects… So, we’ll have to handle this in a bit with a nice trick.</p>

<h4 id="pause">Pause.</h4>
<p>At this point your classes should look like:</p>

<h5 id="workspaceswift">Workspace.swift</h5>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre><span class="kd">class</span> <span class="kt">WorkSpace</span><span class="p">:</span> <span class="kt">CanvasController</span> <span class="p">{</span>
    <span class="k">override</span> <span class="kd">func</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">sl</span> <span class="o">=</span> <span class="kt">SlackLogo</span><span class="p">()</span>
        <span class="n">sl</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">canvas</span><span class="o">.</span><span class="n">center</span>
        <span class="n">canvas</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">sl</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<h5 id="slacklogoswift">SlackLogo.swift</h5>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31</pre></td><td class="code"><pre><span class="kd">class</span> <span class="kt">SlackLogo</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">slackGreen</span> <span class="o">=</span> <span class="kt">Color</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="mf">0.31</span><span class="p">,</span> <span class="nv">green</span><span class="p">:</span> <span class="mf">0.76</span><span class="p">,</span> <span class="nv">blue</span><span class="p">:</span> <span class="mf">0.61</span><span class="p">,</span> <span class="nv">alpha</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="k">let</span> <span class="nv">slackBlue</span> <span class="o">=</span> <span class="kt">Color</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="mf">0.51</span><span class="p">,</span> <span class="nv">green</span><span class="p">:</span> <span class="mf">0.80</span><span class="p">,</span> <span class="nv">blue</span><span class="p">:</span> <span class="mf">0.85</span><span class="p">,</span> <span class="nv">alpha</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="k">let</span> <span class="nv">slackYellow</span> <span class="o">=</span> <span class="kt">Color</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="mf">0.91</span><span class="p">,</span> <span class="nv">green</span><span class="p">:</span> <span class="mf">0.70</span><span class="p">,</span> <span class="nv">blue</span><span class="p">:</span> <span class="mf">0.21</span><span class="p">,</span> <span class="nv">alpha</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="k">let</span> <span class="nv">slackPink</span> <span class="o">=</span> <span class="kt">Color</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="mf">0.87</span><span class="p">,</span> <span class="nv">green</span><span class="p">:</span> <span class="mf">0.10</span><span class="p">,</span> <span class="nv">blue</span><span class="p">:</span> <span class="mf">0.42</span><span class="p">,</span> <span class="nv">alpha</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span>

    <span class="k">var</span> <span class="nv">positions</span> <span class="o">=</span> <span class="p">[</span><span class="kt">Point</span><span class="p">(</span><span class="mf">53.0</span><span class="p">,</span> <span class="mf">30.0</span><span class="p">),</span><span class="kt">Point</span><span class="p">(</span><span class="mf">76.0</span><span class="p">,</span> <span class="mf">53.0</span><span class="p">),</span><span class="kt">Point</span><span class="p">(</span><span class="mf">53.0</span><span class="p">,</span> <span class="mf">76.0</span><span class="p">),</span><span class="kt">Point</span><span class="p">(</span><span class="mf">30.0</span><span class="p">,</span> <span class="mf">53.0</span><span class="p">)]</span>

    <span class="k">var</span> <span class="nv">slackLines</span> <span class="o">=</span> <span class="p">[</span><span class="kt">SlackLine</span><span class="p">]()</span>

    <span class="k">override</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">init</span><span class="p">()</span>
        <span class="n">frame</span> <span class="o">=</span> <span class="kt">Rect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">106</span><span class="p">,</span><span class="mi">106</span><span class="p">)</span>

        <span class="k">var</span> <span class="nv">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">slackBlue</span><span class="p">,</span> <span class="n">slackYellow</span><span class="p">,</span> <span class="n">slackPink</span><span class="p">,</span> <span class="n">slackGreen</span><span class="p">]</span>

        <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">0</span><span class="o">...</span><span class="mi">3</span> <span class="p">{</span>
            <span class="k">let</span> <span class="nv">slackline</span> <span class="o">=</span> <span class="kt">SlackLine</span><span class="p">()</span>
            <span class="n">slackline</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">positions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">slackline</span><span class="o">.</span><span class="n">strokeColor</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

            <span class="k">let</span> <span class="nv">dir</span> <span class="o">=</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">?</span> <span class="mf">1.0</span> <span class="p">:</span> <span class="o">-</span><span class="mf">1.0</span>
            <span class="n">slackline</span><span class="o">.</span><span class="n">transform</span> <span class="o">=</span> <span class="kt">Transform</span><span class="o">.</span><span class="nf">makeRotation</span><span class="p">(</span><span class="n">dir</span> <span class="o">*</span> <span class="kt">Double</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="kt">M_PI</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>

            <span class="n">slackLines</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="n">slackline</span><span class="p">)</span>
            <span class="nf">add</span><span class="p">(</span><span class="n">slackline</span><span class="p">)</span>
        <span class="p">}</span>
        
        <span class="n">rotation</span> <span class="o">=</span> <span class="o">-</span><span class="kt">M_PI</span><span class="o">/</span><span class="mf">10.0</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<h5 id="slacklineswift">SlackLine.swift</h5>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48</pre></td><td class="code"><pre><span class="kd">class</span> <span class="kt">SlackLine</span><span class="p">:</span> <span class="kt">View</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">line</span><span class="p">:</span> <span class="kt">Line</span><span class="o">!</span>

    <span class="k">var</span> <span class="nv">strokeColor</span><span class="p">:</span> <span class="kt">Color</span> <span class="o">=</span> <span class="kt">C4Blue</span> <span class="p">{</span>
        <span class="k">didSet</span> <span class="p">{</span>
            <span class="n">line</span><span class="o">.</span><span class="n">strokeColor</span> <span class="o">=</span> <span class="n">strokeColor</span>
        <span class="p">}</span>
    <span class="p">}</span>

    <span class="k">override</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">super</span><span class="o">.</span><span class="nf">init</span><span class="p">()</span>
        <span class="k">self</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="kt">Rect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">106</span><span class="p">,</span><span class="mf">18.0</span><span class="p">)</span>
        <span class="n">line</span> <span class="o">=</span> <span class="kt">Line</span><span class="p">(</span><span class="kt">Point</span><span class="p">(</span><span class="n">height</span><span class="o">/</span><span class="mf">2.0</span><span class="p">,</span><span class="n">height</span><span class="o">/</span><span class="mf">2.0</span><span class="p">),</span><span class="kt">Point</span><span class="p">(</span><span class="n">width</span><span class="o">-</span><span class="n">height</span><span class="o">/</span><span class="mf">2.0</span><span class="p">,</span><span class="n">height</span><span class="o">/</span><span class="mf">2.0</span><span class="p">))</span>
        <span class="n">line</span><span class="o">.</span><span class="n">lineWidth</span> <span class="o">=</span> <span class="n">height</span>
        <span class="nf">add</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">animate</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">strokeOut</span> <span class="o">=</span> <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">strokeEnd</span> <span class="o">=</span> <span class="mf">0.01</span>
        <span class="p">}</span>
        <span class="n">strokeOut</span><span class="o">.</span><span class="n">curve</span> <span class="o">=</span> <span class="o">.</span><span class="kt">EaseOut</span>
        <span class="n">strokeOut</span><span class="o">.</span><span class="n">delay</span> <span class="o">=</span> <span class="mf">0.1</span>

        <span class="k">let</span> <span class="nv">shiftStroke</span> <span class="o">=</span> <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">strokeStart</span> <span class="o">=</span> <span class="mf">0.99</span>
            <span class="k">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">strokeEnd</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="p">}</span>
        <span class="n">shiftStroke</span><span class="o">.</span><span class="n">delay</span> <span class="o">=</span> <span class="mf">0.35</span>
        <span class="n">shiftStroke</span><span class="o">.</span><span class="n">curve</span> <span class="o">=</span> <span class="o">.</span><span class="kt">EaseIn</span>

        <span class="k">let</span> <span class="nv">strokeIn</span> <span class="o">=</span> <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mf">0.15</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">lineWidth</span> <span class="o">-=</span> <span class="mi">1</span>
            <span class="k">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">strokeStart</span> <span class="o">=</span> <span class="mf">0.05</span>
            <span class="k">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="nf">scale</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mf">1.05</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="p">}</span>
        <span class="n">strokeIn</span><span class="o">.</span><span class="n">delay</span> <span class="o">=</span> <span class="mf">0.2</span>

        <span class="k">let</span> <span class="nv">bounceOut</span> <span class="o">=</span> <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mf">0.15</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="nf">scale</span><span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
            <span class="k">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">lineWidth</span> <span class="o">+=</span> <span class="mi">1</span>
            <span class="k">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">strokeStart</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="p">}</span>

        <span class="k">let</span> <span class="nv">seq</span> <span class="o">=</span> <span class="kt">ViewAnimationSequence</span><span class="p">(</span><span class="nv">animations</span><span class="p">:</span> <span class="p">[</span><span class="n">strokeOut</span><span class="p">,</span> <span class="n">shiftStroke</span><span class="p">,</span> <span class="n">strokeIn</span><span class="p">,</span> <span class="n">bounceOut</span><span class="p">])</span>
        <span class="n">seq</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<h3 id="animating-the-logo">Animating the Logo</h3>
<p>Let’s get this logo rotating and doing all the nice things. Back in <code class="highlighter-rouge">SlackLogo.swift</code>, add the following function:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="kd">func</span> <span class="nf">animate</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span><span class="mf">0.85</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">rotation</span> <span class="o">+=</span> <span class="kt">M_PI</span> <span class="o">*</span> <span class="mi">2</span>
    <span class="p">}</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>

    <span class="k">for</span> <span class="n">line</span> <span class="k">in</span> <span class="n">slackLines</span> <span class="p">{</span>
        <span class="n">line</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>The animation of the logo is simple, it spins. Your line animations are already setup you just need to call their <code class="highlighter-rouge">animate</code> function. So, when <code class="highlighter-rouge">animate()</code> is called we simply need to fire off all the line animations.</p>

<h4 id="tap-it">Tap It.</h4>
<p>Add a tap gesture to the <code class="highlighter-rouge">setup()</code> in your <code class="highlighter-rouge">WorkSpace</code>:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre></td><td class="code"><pre><span class="k">override</span> <span class="kd">func</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">lines</span> <span class="o">=</span> <span class="kt">SlackLogo</span><span class="p">()</span>
    <span class="k">let</span> <span class="nv">squares</span> <span class="o">=</span> <span class="kt">SlackLogo</span><span class="p">()</span>
    <span class="n">squares</span><span class="o">.</span><span class="n">isSquares</span> <span class="o">=</span> <span class="kc">true</span>

    <span class="n">lines</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">canvas</span><span class="o">.</span><span class="n">center</span>
    <span class="n">canvas</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>

    <span class="n">squares</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">canvas</span><span class="o">.</span><span class="n">center</span>
    <span class="n">canvas</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">squares</span><span class="p">)</span>

    <span class="n">canvas</span><span class="o">.</span><span class="n">addTapGestureRecognizer</span> <span class="p">{</span> <span class="p">(</span><span class="n">locations</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">()</span> <span class="k">in</span>
        <span class="n">lines</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
        <span class="n">squares</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<h4 id="run-it-1">Run it!</h4>
<p>Wham. Lookit that:</p>

<p><img src="" alt="" data-id="DirtyGrayEnglishsetter" class="gfyitem" /></p>

<h2 id="handling-the-overlays">Handling the Overlays</h2>
<p>One drawback of iOS is that it’s Core Animation framework doesn’t handle real-time layer effects. Yeah, it’s possible to create layer effects between images using filters, but animated layers aren’t important enough to warrant such nice things.</p>

<p>So, we have to be sneaky…</p>

<h3 id="overlays-are-just-visual-effects">Overlays are Just Visual Effects</h3>
<p>If you look closely at the motion of the Slack logo you’ll notice that as each line is animating in or out and gets to the point where it crosses another line, you can see the overlay color take the shape of the lines round cap. With a deeper look at <a href="http://callmenick.com/post/building-the-slack-animating-logo-with-only-css">some examples of the logo that have been posted online</a> it’s pretty clear that someone, somewhere, at some point probably used an overlay effect… like this:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="o">.</span><span class="n">c</span><span class="o">-</span><span class="n">slack__dot</span> <span class="p">{</span>
  <span class="cm">/* other styles */</span>
  <span class="n">mix</span><span class="o">-</span><span class="n">blend</span><span class="o">-</span><span class="nv">mode</span><span class="p">:</span> <span class="n">multiply</span><span class="p">;</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<blockquote>
  <p>My guess is that the original logo was designed in After Effects</p>
</blockquote>

<p>Since iOS doesn’t have a multiply effect for layers, we’re going to to have to simulate the effect. This is going to require:</p>

<ul>
  <li>instantaneous animations (timed perfectly with the other <code class="highlighter-rouge">SlackLine</code> animations)</li>
  <li>overlay shapes</li>
  <li>masks</li>
</ul>

<p>Another thing to note is that at first glance we probably want the lines in the current logo to be the shapes that do the masking… We already have 4 lines, so why not use them?</p>

<p>Right?…</p>

<p>Wrong!</p>

<p>Since we already have the lines positioned and timed for the <code class="highlighter-rouge">SlackLogo</code>, why don’t we just approriate them?</p>

<p>Here’s what I mean…</p>

<h3 id="modify-slacklogo">Modify SlackLogo</h3>
<p>We’re going to add some overlay squares to our current logo (actually to each line), with the proper color to look like the multiply effect between two lines. Then, we’re going to the use the existing line shape as the mask.</p>

<p>You say:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>"Buuuuuut...... Waaaaaait a minute. How can we see a shape if it is being used as a mask?"
</code></pre>
</div>

<p>I say:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>You can't. But, you can use 2 different SlackLogo objects.
</code></pre>
</div>

<h4 id="modify-slackline">Modify SlackLine</h4>
<p>Pop on over to <code class="highlighter-rouge">SlackLine.swift</code> and add the following variables to the class:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13</pre></td><td class="code"><pre><span class="k">var</span> <span class="nv">square</span><span class="p">:</span> <span class="kt">Rectangle</span><span class="o">!</span>
<span class="k">var</span> <span class="nv">squareMask</span><span class="p">:</span> <span class="kt">Line</span><span class="o">!</span>
<span class="k">var</span> <span class="nv">isSquares</span> <span class="o">=</span> <span class="kc">false</span> <span class="p">{</span>
    <span class="k">didSet</span> <span class="p">{</span>
        <span class="n">line</span><span class="o">.</span><span class="n">hidden</span> <span class="o">=</span> <span class="n">isSquares</span>
        <span class="n">square</span><span class="o">.</span><span class="n">hidden</span> <span class="o">=</span> <span class="o">!</span><span class="n">isSquares</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="k">var</span> <span class="nv">squareColor</span><span class="p">:</span> <span class="kt">Color</span> <span class="o">=</span> <span class="kt">C4Pink</span> <span class="p">{</span>
    <span class="k">didSet</span> <span class="p">{</span>
        <span class="n">square</span><span class="o">.</span><span class="n">fillColor</span> <span class="o">=</span> <span class="n">squareColor</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<blockquote>
  <p>Essentially, we’ve created two states for the <code class="highlighter-rouge">SlackLine</code>, one where the main lines are visible and another where the overlay square is visible.</p>
</blockquote>

<p>Next, we need to create the overlay square and its mask and add them to the line object. After in <code class="highlighter-rouge">setup</code> after the call to <code class="highlighter-rouge">add(line)</code>, add the following code:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18</pre></td><td class="code"><pre><span class="k">let</span> <span class="nv">squareCenterOffset</span> <span class="o">=</span> <span class="n">width</span> <span class="o">-</span> <span class="mf">30.0</span>
<span class="n">square</span> <span class="o">=</span> <span class="kt">Rectangle</span><span class="p">(</span><span class="nv">frame</span><span class="p">:</span> <span class="kt">Rect</span><span class="p">(</span><span class="n">squareCenterOffset</span><span class="o">-</span><span class="n">height</span><span class="o">/</span><span class="mf">2.0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">height</span><span class="p">,</span><span class="n">height</span><span class="p">))</span>
<span class="k">let</span> <span class="nv">maskXOffset</span> <span class="o">=</span> <span class="n">square</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">x</span> <span class="o">-</span> <span class="n">line</span><span class="o">.</span><span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">x</span>
<span class="n">squareMask</span> <span class="o">=</span> <span class="kt">Line</span><span class="p">(</span><span class="kt">Point</span><span class="p">(</span><span class="o">-</span><span class="n">maskXOffset</span><span class="p">,</span><span class="n">height</span><span class="o">/</span><span class="mf">2.0</span><span class="p">),</span><span class="kt">Point</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">points</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">x</span><span class="o">-</span><span class="n">line</span><span class="o">.</span><span class="n">points</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">x</span><span class="o">-</span><span class="n">maskXOffset</span><span class="p">,</span><span class="n">height</span><span class="o">/</span><span class="mf">2.0</span><span class="p">))</span>

<span class="n">square</span><span class="o">.</span><span class="n">corner</span> <span class="o">=</span> <span class="kt">Size</span><span class="p">()</span>
<span class="n">square</span><span class="o">.</span><span class="n">lineWidth</span> <span class="o">=</span> <span class="mi">0</span>
<span class="n">square</span><span class="o">.</span><span class="n">hidden</span> <span class="o">=</span> <span class="kc">true</span>
<span class="nf">add</span><span class="p">(</span><span class="n">square</span><span class="p">)</span>

<span class="n">squareMask</span><span class="o">.</span><span class="n">lineWidth</span> <span class="o">=</span> <span class="n">height</span>
<span class="n">square</span><span class="o">.</span><span class="n">mask</span> <span class="o">=</span> <span class="n">squareMask</span>

<span class="k">var</span> <span class="nv">anchor</span> <span class="o">=</span> <span class="n">square</span><span class="o">.</span><span class="n">center</span>
<span class="n">anchor</span><span class="o">.</span><span class="n">x</span> <span class="o">+=</span> <span class="n">height</span> <span class="o">*</span> <span class="mf">0.26</span>
<span class="n">anchor</span><span class="o">.</span><span class="n">x</span> <span class="o">/=</span> <span class="n">width</span>
<span class="n">anchor</span><span class="o">.</span><span class="n">y</span> <span class="o">=</span> <span class="mf">0.5</span>
<span class="n">squareMask</span><span class="o">.</span><span class="n">anchorPoint</span> <span class="o">=</span> <span class="n">anchor</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>The need for offsets and anchor points is because a mask object is positined in the coordinate space of the object to which it is being applied. To align a mask <strong>inside</strong> a <code class="highlighter-rouge">square</code> with the normal lines, we need to offset it start and end points relative to the square’s position compared to the line.</p>

<p>Furthermore, we want the mask to rotate around the center of the square, hence the need for the anchor point.</p>

<h4 id="run-it-2">Run It.</h4>
<p>Temporarily change <code class="highlighter-rouge">square.hidden = true</code> to <code class="highlighter-rouge">false</code> and run the app to see this:</p>

<p><img src="singleSquare.png" alt="" /></p>

<p>Looks like there’s only one square, right?</p>

<p>WRONG!</p>

<p>Tap it!</p>

<p><img src="" alt="" data-id="AdmirableHoarseChupacabra" class="gfyitem" /></p>

<p>All the squares are there, they’re just hidden by the overlaid lines.</p>

<h4 id="animate-the-masks">Animate the Masks</h4>
<p>The next step is really a bunch of tiny little steps woven into our already existing code for animating the <code class="highlighter-rouge">SlackLine</code>. Instead of walking through it all, you can replace the current <code class="highlighter-rouge">animate()</code> with the following:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46</pre></td><td class="code"><pre><span class="kd">func</span> <span class="nf">animate</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">strokeOut</span> <span class="o">=</span> <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">strokeEnd</span> <span class="o">=</span> <span class="mf">0.01</span>
        <span class="k">self</span><span class="o">.</span><span class="n">squareMask</span><span class="o">.</span><span class="n">strokeEnd</span> <span class="o">=</span> <span class="mf">0.01</span>
    <span class="p">}</span>
    <span class="n">strokeOut</span><span class="o">.</span><span class="n">curve</span> <span class="o">=</span> <span class="o">.</span><span class="kt">EaseOut</span>
    <span class="n">strokeOut</span><span class="o">.</span><span class="n">delay</span> <span class="o">=</span> <span class="mf">0.1</span>

    <span class="k">let</span> <span class="nv">rotateMask</span> <span class="o">=</span> <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">square</span><span class="o">.</span><span class="n">hidden</span> <span class="o">=</span> <span class="kc">true</span>
        <span class="k">self</span><span class="o">.</span><span class="n">squareMask</span><span class="o">.</span><span class="n">transform</span> <span class="o">=</span> <span class="kt">Transform</span><span class="o">.</span><span class="nf">makeRotation</span><span class="p">(</span><span class="kt">M_PI</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">let</span> <span class="nv">shiftStroke</span> <span class="o">=</span> <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">strokeStart</span> <span class="o">=</span> <span class="mf">0.99</span>
        <span class="k">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">strokeEnd</span> <span class="o">=</span> <span class="mf">1.0</span>
    <span class="p">}</span>
    <span class="n">shiftStroke</span><span class="o">.</span><span class="n">delay</span> <span class="o">=</span> <span class="mf">0.35</span>
    <span class="n">shiftStroke</span><span class="o">.</span><span class="n">curve</span> <span class="o">=</span> <span class="o">.</span><span class="kt">EaseIn</span>

    <span class="k">let</span> <span class="nv">revealSquare</span> <span class="o">=</span> <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">square</span><span class="o">.</span><span class="n">hidden</span> <span class="o">=</span> <span class="kc">false</span>
    <span class="p">}</span>

    <span class="k">let</span> <span class="nv">strokeIn</span> <span class="o">=</span> <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mf">0.15</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">lineWidth</span> <span class="o">-=</span> <span class="mi">1</span>
        <span class="k">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">strokeStart</span> <span class="o">=</span> <span class="mf">0.05</span>
        <span class="k">self</span><span class="o">.</span><span class="n">squareMask</span><span class="o">.</span><span class="n">strokeEnd</span> <span class="o">=</span> <span class="mf">0.95</span>
        <span class="k">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="nf">scale</span><span class="p">(</span><span class="mi">1</span><span class="o">/</span><span class="mf">1.05</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">strokeIn</span><span class="o">.</span><span class="n">delay</span> <span class="o">=</span> <span class="mf">0.2</span>

    <span class="k">let</span> <span class="nv">bounceOut</span> <span class="o">=</span> <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mf">0.15</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="nf">scale</span><span class="p">(</span><span class="mf">1.05</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="k">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">lineWidth</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">self</span><span class="o">.</span><span class="n">line</span><span class="o">.</span><span class="n">strokeStart</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="k">self</span><span class="o">.</span><span class="n">squareMask</span><span class="o">.</span><span class="n">strokeEnd</span> <span class="o">=</span> <span class="mf">1.0</span>
    <span class="p">}</span>

    <span class="k">let</span> <span class="nv">revertMaskRotation</span> <span class="o">=</span> <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">squareMask</span><span class="o">.</span><span class="n">transform</span> <span class="o">=</span> <span class="kt">Transform</span><span class="p">()</span>
    <span class="p">}</span>
    
    <span class="k">let</span> <span class="nv">seq</span> <span class="o">=</span> <span class="kt">ViewAnimationSequence</span><span class="p">(</span><span class="nv">animations</span><span class="p">:</span> <span class="p">[</span><span class="n">strokeOut</span><span class="p">,</span> <span class="n">rotateMask</span><span class="p">,</span> <span class="n">shiftStroke</span><span class="p">,</span> <span class="n">revealSquare</span><span class="p">,</span> <span class="n">strokeIn</span><span class="p">,</span> <span class="n">bounceOut</span><span class="p">,</span> <span class="n">revertMaskRotation</span><span class="p">])</span>
    <span class="n">seq</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Here’s what happens with the masking animations:</p>

<p><img src="" alt="" data-id="FrigidSaneHuia" class="gfyitem" /></p>

<blockquote>
  <p>I had to tweak a few things to get this appearance. Don’t worry about doing it yourself, just trust me! Everything’s going to be just fine.</p>
</blockquote>

<h4 id="give-the-logo-a-little-toggle">Give the Logo a Little Toggle</h4>
<p>In <code class="highlighter-rouge">SlackLogo</code> add the following property:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre><span class="k">var</span> <span class="nv">isSquares</span> <span class="o">=</span> <span class="kc">false</span> <span class="p">{</span>
    <span class="k">didSet</span> <span class="p">{</span>
        <span class="k">for</span> <span class="n">slackline</span> <span class="k">in</span> <span class="k">self</span><span class="o">.</span><span class="n">slackLines</span> <span class="p">{</span>
            <span class="n">slackline</span><span class="o">.</span><span class="n">isSquares</span> <span class="o">=</span> <span class="n">isSquares</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Toggling this value will switch a logo from showing its main lines to showing only its overlay squares.</p>

<h4 id="add-a-dash-of-color">Add a Dash of Color</h4>
<p>Now, add these color properties to <code class="highlighter-rouge">SlackLogo</code>:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="k">var</span> <span class="nv">slackGreenOverlay</span> <span class="o">=</span> <span class="kt">Color</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="mf">0.18</span><span class="p">,</span> <span class="nv">green</span><span class="p">:</span> <span class="mf">0.62</span><span class="p">,</span> <span class="nv">blue</span><span class="p">:</span> <span class="mf">0.53</span><span class="p">,</span> <span class="nv">alpha</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="k">var</span> <span class="nv">slackBlueOverlay</span> <span class="o">=</span> <span class="kt">Color</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="mf">0.47</span><span class="p">,</span> <span class="nv">green</span><span class="p">:</span> <span class="mf">0.58</span><span class="p">,</span> <span class="nv">blue</span><span class="p">:</span> <span class="mf">0.16</span><span class="p">,</span> <span class="nv">alpha</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="k">var</span> <span class="nv">slackYellowOverlay</span> <span class="o">=</span> <span class="kt">Color</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="mf">0.81</span><span class="p">,</span> <span class="nv">green</span><span class="p">:</span> <span class="mf">0.05</span><span class="p">,</span> <span class="nv">blue</span><span class="p">:</span> <span class="mf">0.11</span><span class="p">,</span> <span class="nv">alpha</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span>
<span class="k">var</span> <span class="nv">slackPinkOverlay</span> <span class="o">=</span> <span class="kt">Color</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="mf">0.24</span><span class="p">,</span> <span class="nv">green</span><span class="p">:</span> <span class="mf">0.03</span><span class="p">,</span> <span class="nv">blue</span><span class="p">:</span> <span class="mf">0.24</span><span class="p">,</span> <span class="nv">alpha</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Then, replace <code class="highlighter-rouge">init()</code> with:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22</pre></td><td class="code"><pre><span class="k">override</span> <span class="nf">init</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">super</span><span class="o">.</span><span class="nf">init</span><span class="p">()</span>
    <span class="n">frame</span> <span class="o">=</span> <span class="kt">Rect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">106</span><span class="p">,</span><span class="mi">106</span><span class="p">)</span>

    <span class="k">var</span> <span class="nv">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">slackBlue</span><span class="p">,</span> <span class="n">slackYellow</span><span class="p">,</span> <span class="n">slackPink</span><span class="p">,</span> <span class="n">slackGreen</span><span class="p">]</span>
    <span class="k">var</span> <span class="nv">smallSquareColors</span> <span class="o">=</span> <span class="p">[</span><span class="n">slackBlueOverlay</span><span class="p">,</span> <span class="n">slackYellowOverlay</span><span class="p">,</span> <span class="n">slackPinkOverlay</span><span class="p">,</span> <span class="n">slackGreenOverlay</span><span class="p">]</span>

    <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">0</span><span class="o">...</span><span class="mi">3</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">slackline</span> <span class="o">=</span> <span class="kt">SlackLine</span><span class="p">()</span>
        <span class="n">slackline</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">positions</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">slackline</span><span class="o">.</span><span class="n">strokeColor</span> <span class="o">=</span> <span class="n">colors</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
        <span class="n">slackline</span><span class="o">.</span><span class="n">squareColor</span> <span class="o">=</span> <span class="n">smallSquareColors</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>

        <span class="k">let</span> <span class="nv">dir</span> <span class="o">=</span> <span class="n">i</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="p">?</span> <span class="mf">1.0</span> <span class="p">:</span> <span class="o">-</span><span class="mf">1.0</span>
        <span class="n">slackline</span><span class="o">.</span><span class="n">transform</span> <span class="o">=</span> <span class="kt">Transform</span><span class="o">.</span><span class="nf">makeRotation</span><span class="p">(</span><span class="n">dir</span> <span class="o">*</span> <span class="kt">Double</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="kt">M_PI</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>

        <span class="n">slackLines</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="n">slackline</span><span class="p">)</span>
        <span class="nf">add</span><span class="p">(</span><span class="n">slackline</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">rotation</span> <span class="o">=</span> <span class="o">-</span><span class="kt">M_PI</span><span class="o">/</span><span class="mf">10.0</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>This step gives each line’s overlay the proper color.</p>

<h3 id="add-another-logo">Add Another Logo</h3>
<p>To see the overlays, simply add another logo on top of the one we already have. In the main <code class="highlighter-rouge">WorkSpace</code> modify the <code class="highlighter-rouge">setup()</code> to look like this:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre></td><td class="code"><pre><span class="k">override</span> <span class="kd">func</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">lines</span> <span class="o">=</span> <span class="kt">SlackLogo</span><span class="p">()</span>
    <span class="k">let</span> <span class="nv">squares</span> <span class="o">=</span> <span class="kt">SlackLogo</span><span class="p">()</span>
    <span class="n">squares</span><span class="o">.</span><span class="n">isSquares</span> <span class="o">=</span> <span class="kc">true</span>

    <span class="n">lines</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">canvas</span><span class="o">.</span><span class="n">center</span>
    <span class="n">canvas</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>

    <span class="n">squares</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">canvas</span><span class="o">.</span><span class="n">center</span>
    <span class="n">canvas</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">squares</span><span class="p">)</span>

    <span class="n">canvas</span><span class="o">.</span><span class="n">addTapGestureRecognizer</span> <span class="p">{</span> <span class="p">(</span><span class="n">locations</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">()</span> <span class="k">in</span>
        <span class="n">lines</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
        <span class="n">squares</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Now your canvas will have all the lines and squares on it and when you tap it the animation will happen.
And, this is what you get:</p>

<p><img src="" alt="" data-id="SpitefulUnawareIndianrhinoceros" class="gfyitem" /></p>

<p>Try running the app and trying for yourself!</p>

<h2 id="that-was-a-long-one">That was a long one…</h2>
<p>Honestly, when we started we thought this example would be straightforward. In the end we realized how intricate the motion of the Slack logo really is.</p>

<h3 id="code">Code</h3>
<p>You can grab a copy of the code for this project from <a href="https://gist.github.com/C4Framework/a7b4bb933016dbf27f44">HERE</a></p>

        </div>
      </div>
    </div>

    <div class="container">
      <div class="row related-tutorial">
        <div class="col-xs-12 col-md-12">
          <h1 class="text-center blue">Nice Work! Explore More Tutorials?</h1>
          <ul class="examples-list list-unstyled">
            
            
              <li>
                <a href="/tutorials/slack-logo/">
                  <div>
                    <span class="img">
                      <img src="/images/tutorials/slack-logo/poster.png" />
                    </span>
                    <div class="text">
                      <p><span>Slack Logo</span><br />Animating the Slack Logo.</p>
                    </div>                    
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/tutorials/customizing-switch/">
                  <div>
                    <span class="img">
                      <img src="/images/tutorials/customizing-switch/poster.png" />
                    </span>
                    <div class="text">
                      <p><span>Customizing A Switch</span><br />We've already hacked UISwitch, now let's add animations!</p>
                    </div>                    
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/tutorials/skype/">
                  <div>
                    <span class="img">
                      <img src="/images/tutorials/skype/poster.png" />
                    </span>
                    <div class="text">
                      <p><span>Skype Loader</span><br />A View within a View within a View.</p>
                    </div>                    
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/tutorials/checkmark/">
                  <div>
                    <span class="img">
                      <img src="/images/tutorials/checkmark/poster.png" />
                    </span>
                    <div class="text">
                      <p><span>Checkmark</span><br />An sweetly timed animation.</p>
                    </div>                    
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/tutorials/hacking-uiswitch/">
                  <div>
                    <span class="img">
                      <img src="/images/tutorials/hacking-uiswitch/poster.png" />
                    </span>
                    <div class="text">
                      <p><span>Hacking UISwitch</span><br />How to hack a UIKit component.</p>
                    </div>                    
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/tutorials/processing/">
                  <div>
                    <span class="img">
                      <img src="/images/tutorials/processing/poster.png" />
                    </span>
                    <div class="text">
                      <p><span>Processing Examples</span><br />A brief comparison of Processing and C4.</p>
                    </div>                    
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/tutorials/basics/">
                  <div>
                    <span class="img">
                      <img src="/images/tutorials/basics/poster.png" />
                    </span>
                    <div class="text">
                      <p><span>Basics</span><br />An intro to C4's basic objects and features.</p>
                    </div>                    
                  </div>
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-md-3 col-sm-3 col-xs-6">
        <ul class="list-unstyled">
          <li class="title"><a href="/#overview">About</a></li>
          <li><a href="/#overview">Features</a></li>
          <!-- <li><a href="/about#history">History</a></li> -->
          <!-- <li><a href="/about/contributors">Contributors</a></li> -->
        </ul>
      </div>
      <div class="col-md-3 col-sm-3 col-xs-6">
        <ul class="list-unstyled">
          <li class="title"><a href="/learn">Learn + Explore</a></li>
          <li><a href="/install">Install C4</a></li>
          <li><a href="/examples">Examples</a></li>
          <li><a href="/tutorials">Tutorials</a></li>
          <li><a href="http://cocoadocs.org/docsets/C4/1.1.0/">Docs</a></li>
        </ul>
      </div>
      <div class="col-md-3 col-sm-3 col-xs-6">
        <ul class="list-unstyled">
          <li class="title"><a href="/contact">Connect</a></li>
          <li><a href="http://discourse.c4ios.com">Forums</a></li>
          <li><a href="http://www.medium.com/@c4framework" target="_blank">Medium</a></li>
          <li><a href="http://www.twitter.com/c4framework" target="_blank">Twitter</a></li>
          <li><a href="https://join-c4.herokuapp.com/" target="_blank">Slack</a></li>
          <li><a href="https://vimeo.com/c4ios" target="_blank">Vimeo</a></li>
          <li><a href="http://github.com/c4framework" target="_blank">GitHub</a></li>
        </ul>
      </div>
      <div class="col-md-3 col-sm-3 col-xs-6">
        <ul class="list-unstyled">
          <!-- <li class="title"><a href="/about">Sign Up for Newsletter</a></li>
          <li><input type="text" placeholder="Enter Email + Press Enter"></li> -->
          <li>© 2016 C4</li>
          <li><a href="/terms">Terms of Use</a></li>
          <li><a href="mailto:info@c4ios.com">Contact</a></li>
        </ul>    
      </div>
    </div>
  </div>
</footer>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-18444113-4', 'auto');
  ga('send', 'pageview');
</script>


    <script type="text/javascript" src="/js/toc.js"></script>
    <script>
     (function(d, t) {
        var g = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        g.src = 'http://assets.gfycat.com/js/gfyajax-0.517d.js';
        s.parentNode.insertBefore(g, s);
      }(document, 'script'));
    </script>
    <script type="text/javascript">
      $(document).ready(function() {
        $('#toc').width($('#toc').parents().width());

        $('#toc').toc({
          elementClass: 'toc',
          ulClass: 'nav',
          heading: 'Contents',
          indexingFormats: 'number',
          selector: 'h2:not(.toc-omit), h3:not(.toc-omit), h4:not(.toc-omit)'
        });

        $('body').scrollspy({
          target: '#toc',
          offset: $('#headerNav').outerHeight(true)
        });

        setTimeout(function() {
          var $sideBar = $('#toc');
          $sideBar.affix({
            offset: {
              top: function() {
                var offsetTop = $sideBar.offset().top,
                sideBarMargin  = parseInt($sideBar.children(0).css('margin-top'), 10),
                navOuterHeight = $('#headerNav').height();
                return (this.top = offsetTop - navOuterHeight - sideBarMargin);
              },
              bottom: function() {
                return (this.bottom = $('footer').outerHeight(true) + $('.chapter-nav').outerHeight(true) + $('.related-tutorial').outerHeight(true) + 500);
              }
            }
          });
        }, 100);

        $('td.gutter').each(function(index)
        {
          $(this).parents('.language-swift').closest('pre').addClass('has-gutter');
        });

        $('.tutorial img').each(function()
        {
          var img = $(this).attr('src');
          $(this).attr('src', '/images/tutorials/slack-logo/' + img + '').addClass('img-responsive');
        });

        $('.tutorial p img').unwrap().wrap('<figure></figure>').after(function() {
            return '<figcaption>'+this.alt+'</figcaption>';
        });

        $('.footnotes').prepend('<h4>Footnotes</h4>');
      });
    </script>
  </body>
</html>
