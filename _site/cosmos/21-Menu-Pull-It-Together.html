<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
	

  <title>The Menu – Pull it Together</title>
  <meta name="description" content="We’re now going to work in the Menu.swift file, and our plan is this:">
  <meta property="og:image" content="http://www.c4ios.com/images/banner.jpg">
  <meta property="og:url"   content="http://c4ios.com" />
  <meta property="og:title" content="The Menu – Pull it Together"/>
  <meta name="og:description" content="We’re now going to work in the Menu.swift file, and our plan is this:">
  <meta property="og:type"  content="website"/>
  <meta property="og:site_name"  content="C4"/>

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@c4framework">
  <meta name="twitter:creator" content="@c4framework">
  <meta name="twitter:title" content="The Menu – Pull it Together">
  <meta name="twitter:description" content="We’re now going to work in the Menu.swift file, and our plan is this:">
  <meta name="twitter:image" content="http://www.c4ios.com/images/banner.jpg">


  <link rel="stylesheet" type="text/css" href="/css/style.css" >
  <link rel="stylesheet" href="/css/syntax.css">
  <link href='https://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>

  <link rel="canonical" href="www.c4ios.com/cosmos/21-Menu-Pull-It-Together">
  <link rel="alternate" type="application/rss+xml" title="C4 website" href="www.c4ios.com/feed.xml">
</head>

    <body class="the-menu-–-pull-it-together" data-spy="scroll" data-target="#toc">

    <header>
  <nav class="navbar navbar-default" role="navigation"> 
    <div class="navbar-header container">
      <div class="row"> 
        <div class="col-xs-12 col-sm-12 col-md-12 navlist">
          <a class="navbar-brand" href="/">
            <span><img src="/images/c4logo.png"></span>
          </a>
          <ul class="nav navbar-nav navbar-left">
            <li><a href="/install" >Install</a></li>
            <li><a href="/tutorials" >Tutorials</a></li>
            <li><a href="/cosmos" class='active'>COSMOS</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/examples" >Examples</a></li>
            <li><a href="http://discourse.c4ios.com">Forums</a></li>
            <li><a href="http://cocoadocs.org/docsets/C4/1.1.0/">Documentation</a></li>
          </ul>
        </div>
      </div>  
    </div>        
  </nav>      
</header>

    <div class="container content the-menu-–-pull-it-together" >
      <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 breadcrumb">
          <h1><a href="/tutorials">Tutorials</a><div class="bread-caret">></div><a href="/cosmos">COSMOS</a><div class="bread-caret">></div>The Menu – Pull it Together</h1>
        </div>
      </div>

      <div class="row">
        <div class="col-xs-3 col-sm-3 col-md-3">
          <span class="img large">
            <img src="/images/cosmos/1/poster.png" />
          </span>
          <p class="title">Chapter 21<br /><span class="lighter">The Menu – Pull it Together</span></p>
          <p class="post-tags">
  Tags<br /> 
  
  
  <a href="/tags/#getting started">getting started</a>,
  
  <a href="/tags/#basics">basics</a>,
  
  <a href="/tags/#introduction">introduction</a>,
  
  <a href="/tags/#easy">easy</a>,
  
  <a href="/tags/#c4">c4</a>
  
</p>
          <p>Estimated Time<br /><span class="lighter"></span></p>

          <hr />

          <div id="toc"></div>
        </div>

        <div class="col-xs-9 col-sm-9 col-md-9 tutorial">
          <p>We’re now going to work in the <code class="highlighter-rouge">Menu.swift</code> file, and our plan is this:</p>

<ol>
  <li>add all the layers to this class’ canvas</li>
  <li>attach a gesture to this class’ canvas</li>
  <li>add methods for revealing and hiding the menu’s layers</li>
  <li>add sounds that play when the menu opens and closes</li>
  <li>add a little instruction label to help the user</li>
</ol>

<h2 id="add-the-layers">Add the Layers</h2>

<p>Create the following class variables:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre><span class="k">var</span> <span class="nv">menuRings</span> <span class="p">:</span> <span class="kt">MenuRings</span><span class="o">!</span>
<span class="k">var</span> <span class="nv">menuIcons</span> <span class="p">:</span> <span class="kt">MenuIcons</span><span class="o">!</span>
<span class="k">var</span> <span class="nv">menuSelector</span> <span class="p">:</span> <span class="kt">MenuSelector</span><span class="o">!</span>
<span class="k">var</span> <span class="nv">menuShadow</span> <span class="p">:</span> <span class="kt">MenuShadow</span><span class="o">!</span>
<span class="k">var</span> <span class="nv">shouldRevert</span> <span class="o">=</span> <span class="kc">false</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Then, modify <code class="highlighter-rouge">setup()</code> to look like this:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25</pre></td><td class="code"><pre><span class="k">override</span> <span class="kd">func</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//clear the background</span>
    <span class="n">canvas</span><span class="o">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="n">clear</span>
    <span class="c1">//make the canvas frame fairly small</span>
    <span class="n">canvas</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="kt">Rect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">80</span><span class="p">,</span><span class="mi">80</span><span class="p">)</span>

    <span class="c1">//create the rings</span>
    <span class="n">menuRings</span> <span class="o">=</span> <span class="kt">MenuRings</span><span class="p">()</span>
    
    <span class="c1">//create the selector</span>
    <span class="n">menuSelector</span> <span class="o">=</span> <span class="kt">MenuSelector</span><span class="p">()</span>
    
    <span class="c1">//create the icons</span>
    <span class="n">menuIcons</span> <span class="o">=</span> <span class="kt">MenuIcons</span><span class="p">()</span>

    <span class="c1">//create the shadow</span>
    <span class="n">menuShadow</span> <span class="o">=</span> <span class="kt">MenuShadow</span><span class="p">()</span>
    <span class="n">menuShadow</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">canvas</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">center</span>
    
    <span class="c1">//add the canvases of each object in specific order (back to front)</span>
    <span class="n">canvas</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">menuShadow</span><span class="o">.</span><span class="n">canvas</span><span class="p">)</span>
    <span class="n">canvas</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">menuRings</span><span class="o">.</span><span class="n">canvas</span><span class="p">)</span>
    <span class="n">canvas</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">menuSelector</span><span class="o">.</span><span class="n">canvas</span><span class="p">)</span>
    <span class="n">canvas</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">menuIcons</span><span class="o">.</span><span class="n">canvas</span><span class="p">)</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Then, modify <code class="highlighter-rouge">setup()</code> in your project’s <code class="highlighter-rouge">WorkSpace</code> to look like:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="k">override</span> <span class="kd">func</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">canvas</span><span class="o">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="kt">COSMOSbkgd</span>
    <span class="k">let</span> <span class="nv">menu</span> <span class="o">=</span> <span class="kt">Menu</span><span class="p">()</span>
    <span class="n">menu</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">canvas</span><span class="o">.</span><span class="n">center</span>
    <span class="n">canvas</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">menu</span><span class="o">.</span><span class="n">canvas</span><span class="p">)</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>If you run the app now you should see this:</p>

<p><img src="01.png" alt="" /></p>

<p>It’s subtle, but you can actually see that the layers are there… Both the rings and the icons are visible.</p>

<h2 id="add-the-gesture">Add the Gesture</h2>

<p>Now, go back to <code class="highlighter-rouge">MenuSelector.swift</code>, cut the entire <code class="highlighter-rouge">createGesture()</code> method and add it to this class.</p>

<p>You’ll see Xcode is going to complain about this:</p>

<p><img src="02.png" alt="" /></p>

<p>To fix these, all you need to do is change:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="k">self</span><span class="o">.</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>to</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="k">self</span><span class="o">.</span><span class="n">menuSelector</span><span class="o">.</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Your method should now look like:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre></td><td class="code"><pre><span class="kd">func</span> <span class="nf">createGesture</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">canvas</span><span class="o">.</span><span class="n">addLongPressGestureRecognizer</span> <span class="p">{</span> <span class="p">(</span><span class="n">locations</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">()</span> <span class="k">in</span>
        <span class="k">switch</span> <span class="n">state</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="kt">Changed</span><span class="p">:</span>
            <span class="k">self</span><span class="o">.</span><span class="n">menuSelector</span><span class="o">.</span><span class="nf">update</span><span class="p">(</span><span class="n">center</span><span class="p">)</span>
        <span class="k">case</span> <span class="o">.</span><span class="kt">Cancelled</span><span class="p">,</span> <span class="o">.</span><span class="kt">Ended</span><span class="p">,</span> <span class="o">.</span><span class="kt">Failed</span><span class="p">:</span>
            <span class="k">self</span><span class="o">.</span><span class="n">menuSelector</span><span class="o">.</span><span class="n">currentSelection</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">self</span><span class="o">.</span><span class="n">menuSelector</span><span class="o">.</span><span class="n">highlight</span><span class="o">.</span><span class="n">hidden</span> <span class="o">=</span> <span class="kc">true</span>
            <span class="k">self</span><span class="o">.</span><span class="n">menuSelector</span><span class="o">.</span><span class="n">menuLabel</span><span class="o">.</span><span class="n">hidden</span> <span class="o">=</span> <span class="kc">true</span>
        <span class="k">default</span><span class="p">:</span>
            <span class="n">_</span> <span class="o">=</span> <span class="s">""</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>The gesture is now a part of the menu’s canvas and not anymore part of the selector.</p>

<h2 id="reveal-the-menu">Reveal the Menu</h2>

<p>Now, we want the menu to open and close with all the animations in proper order and timed nicely. To do this, add the following two methods to your class:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34</pre></td><td class="code"><pre><span class="kd">func</span> <span class="nf">revealMenu</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">menuShadow</span><span class="o">.</span><span class="n">reveal</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="n">menuRings</span><span class="o">.</span><span class="n">thickRingOut</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="n">menuRings</span><span class="o">.</span><span class="n">thinRingsOut</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="n">menuIcons</span><span class="o">.</span><span class="n">signIconsOut</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    
    <span class="nf">delay</span><span class="p">(</span><span class="mf">0.33</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">menuRings</span><span class="o">.</span><span class="nf">revealHideDividingLines</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
        <span class="k">self</span><span class="o">.</span><span class="n">menuIcons</span><span class="o">.</span><span class="n">revealSignIcons</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="nf">delay</span><span class="p">(</span><span class="mf">0.66</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">menuRings</span><span class="o">.</span><span class="n">revealDashedRings</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
        <span class="k">self</span><span class="o">.</span><span class="n">menuSelector</span><span class="o">.</span><span class="n">revealInfoButton</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">hideMenu</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">menuRings</span><span class="o">.</span><span class="n">hideDashedRings</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="n">menuSelector</span><span class="o">.</span><span class="n">hideInfoButton</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="n">menuRings</span><span class="o">.</span><span class="nf">revealHideDividingLines</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
    
    <span class="nf">delay</span><span class="p">(</span><span class="mf">0.16</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">menuIcons</span><span class="o">.</span><span class="n">hideSignIcons</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="nf">delay</span><span class="p">(</span><span class="mf">0.57</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">menuRings</span><span class="o">.</span><span class="n">thinRingsIn</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="nf">delay</span><span class="p">(</span><span class="mf">0.66</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">menuIcons</span><span class="o">.</span><span class="n">signIconsIn</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
        <span class="k">self</span><span class="o">.</span><span class="n">menuRings</span><span class="o">.</span><span class="n">thickRingIn</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
        <span class="k">self</span><span class="o">.</span><span class="n">menuShadow</span><span class="o">.</span><span class="n">hide</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
        <span class="k">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">interactionEnabled</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<h3 id="menuisvisible">menuIsVisible</h3>

<p>Most of the interaction requires the menu to be open, so we’ll create a variable that we can check as needed. Add the following to your class:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="k">var</span> <span class="nv">menuIsVisible</span> <span class="o">=</span> <span class="kc">false</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>At the end of <code class="highlighter-rouge">revealMenu()</code> add:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="nf">delay</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span> <span class="p">{</span>
   <span class="k">self</span><span class="o">.</span><span class="n">menuIsVisible</span> <span class="o">=</span> <span class="kc">true</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>We know that the animations take a total of 1 second to complete when revealing the menu, so we delay until this point to set the menu as visible.</p>

<p>At the top of <code class="highlighter-rouge">hideMenu()</code> add:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="k">self</span><span class="o">.</span><span class="n">menuIsVisible</span> <span class="o">=</span> <span class="kc">false</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>… because we know that as soon as the hide method starts executing, the menu is not fully visible anymore.</p>

<p>You should also add the same line to the top of <code class="highlighter-rouge">revealMenu()</code>, because it forces the state to be correct when you reveal.</p>

<p>Your reveal/hide methods should look like:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39</pre></td><td class="code"><pre><span class="kd">func</span> <span class="nf">revealMenu</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">menuIsVisible</span> <span class="o">=</span> <span class="kc">false</span>
    <span class="n">menuShadow</span><span class="o">.</span><span class="n">reveal</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="n">menuRings</span><span class="o">.</span><span class="n">thickRingOut</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="n">menuRings</span><span class="o">.</span><span class="n">thinRingsOut</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="n">menuIcons</span><span class="o">.</span><span class="n">signIconsOut</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    
    <span class="nf">delay</span><span class="p">(</span><span class="mf">0.33</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">menuRings</span><span class="o">.</span><span class="nf">revealHideDividingLines</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
        <span class="k">self</span><span class="o">.</span><span class="n">menuIcons</span><span class="o">.</span><span class="n">revealSignIcons</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="nf">delay</span><span class="p">(</span><span class="mf">0.66</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">menuRings</span><span class="o">.</span><span class="n">revealDashedRings</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
        <span class="k">self</span><span class="o">.</span><span class="n">menuSelector</span><span class="o">.</span><span class="n">revealInfoButton</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="nf">delay</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">menuIsVisible</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">hideMenu</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">self</span><span class="o">.</span><span class="n">menuIsVisible</span> <span class="o">=</span> <span class="kc">false</span>
    <span class="n">menuRings</span><span class="o">.</span><span class="n">hideDashedRings</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="n">menuSelector</span><span class="o">.</span><span class="n">hideInfoButton</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="n">menuRings</span><span class="o">.</span><span class="nf">revealHideDividingLines</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
    
    <span class="nf">delay</span><span class="p">(</span><span class="mf">0.16</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">menuIcons</span><span class="o">.</span><span class="n">hideSignIcons</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="nf">delay</span><span class="p">(</span><span class="mf">0.57</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">menuRings</span><span class="o">.</span><span class="n">thinRingsIn</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="nf">delay</span><span class="p">(</span><span class="mf">0.66</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">menuIcons</span><span class="o">.</span><span class="n">signIconsIn</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
        <span class="k">self</span><span class="o">.</span><span class="n">menuRings</span><span class="o">.</span><span class="n">thickRingIn</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
        <span class="k">self</span><span class="o">.</span><span class="n">menuShadow</span><span class="o">.</span><span class="n">hide</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
        <span class="k">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">interactionEnabled</span> <span class="o">=</span> <span class="kc">true</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<h2 id="behavioural-logic">Behavioural Logic</h2>

<p>We’ll add the first bit of logic to the gesture. Under the <code class="highlighter-rouge">.Cancelled</code> state in the switch statement, and after the first <code class="highlighter-rouge">if</code>, add the following:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre><span class="k">if</span> <span class="k">self</span><span class="o">.</span><span class="n">menuIsVisible</span> <span class="p">{</span>
    <span class="k">self</span><span class="o">.</span><span class="nf">hideMenu</span><span class="p">()</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">self</span><span class="o">.</span><span class="n">shouldRevert</span> <span class="o">=</span> <span class="kc">true</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>If the gesture ends, is canceled, or fails then this logic will check two things. If the menu is visible then it will revert, otherwise it flags <code class="highlighter-rouge">shouldRevert</code> so that when the menu finishes opening it will know to close automatically.</p>

<p>Then, in the <code class="highlighter-rouge">delay(1.0)</code> block of <code class="highlighter-rouge">revealMenu()</code>, add the following:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4</pre></td><td class="code"><pre><span class="k">if</span> <span class="k">self</span><span class="o">.</span><span class="n">shouldRevert</span> <span class="p">{</span>
    <span class="k">self</span><span class="o">.</span><span class="nf">hideMenu</span><span class="p">()</span>
    <span class="k">self</span><span class="o">.</span><span class="n">shouldRevert</span> <span class="o">=</span> <span class="kc">false</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Once the menu has fully revealed itself it will check to see if it should revert.</p>

<p>Add the following case to the top of the switch statement:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="k">case</span> <span class="o">.</span><span class="kt">Began</span><span class="p">:</span>
   <span class="k">self</span><span class="o">.</span><span class="nf">revealMenu</span><span class="p">()</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>When the gesture begins (after a default 0.25s of being pressed) it will open the menu.</p>

<p>Finally, in <code class="highlighter-rouge">hideMenu()</code> add the following to the <code class="highlighter-rouge">delay(0.66)</code> block:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="k">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">interactionEnabled</span> <span class="o">=</span> <span class="kc">true</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>And add the following to the <code class="highlighter-rouge">.Cancelled</code> state of the switch statement in the gesture block:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="k">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">interactionEnabled</span> <span class="o">=</span> <span class="kc">false</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>This prevents the user from being able to interact with the canvas while the menu is reverting to the closed state. And, sets the interaction to true when we know the menu has fully closed.</p>

<p>Your <code class="highlighter-rouge">createGesture()</code> should now look like this:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></td><td class="code"><pre><span class="kd">func</span> <span class="nf">createGesture</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//add a long press gesture to the menu's canvas</span>
    <span class="n">canvas</span><span class="o">.</span><span class="n">addLongPressGestureRecognizer</span> <span class="p">{</span> <span class="p">(</span><span class="n">locations</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="p">()</span> <span class="k">in</span>
        <span class="k">switch</span> <span class="n">state</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="kt">Began</span><span class="p">:</span>
            <span class="k">self</span><span class="o">.</span><span class="nf">revealMenu</span><span class="p">()</span>
        <span class="k">case</span> <span class="o">.</span><span class="kt">Changed</span><span class="p">:</span>
            <span class="k">self</span><span class="o">.</span><span class="n">menuSelector</span><span class="o">.</span><span class="nf">update</span><span class="p">(</span><span class="n">center</span><span class="p">)</span>
        <span class="k">case</span> <span class="o">.</span><span class="kt">Cancelled</span><span class="p">,</span> <span class="o">.</span><span class="kt">Ended</span><span class="p">,</span> <span class="o">.</span><span class="kt">Failed</span><span class="p">:</span>
            <span class="k">self</span><span class="o">.</span><span class="n">menuSelector</span><span class="o">.</span><span class="n">currentSelection</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
            <span class="k">self</span><span class="o">.</span><span class="n">menuSelector</span><span class="o">.</span><span class="n">highlight</span><span class="o">.</span><span class="n">hidden</span> <span class="o">=</span> <span class="kc">true</span>
            <span class="k">self</span><span class="o">.</span><span class="n">menuSelector</span><span class="o">.</span><span class="n">menuLabel</span><span class="o">.</span><span class="n">hidden</span> <span class="o">=</span> <span class="kc">true</span>
            <span class="k">if</span> <span class="k">self</span><span class="o">.</span><span class="n">menuIsVisible</span> <span class="p">{</span>
                <span class="k">self</span><span class="o">.</span><span class="nf">hideMenu</span><span class="p">()</span>
            <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
                <span class="k">self</span><span class="o">.</span><span class="n">shouldRevert</span> <span class="o">=</span> <span class="kc">true</span>
            <span class="p">}</span>
            <span class="k">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">interactionEnabled</span> <span class="o">=</span> <span class="kc">false</span>
        <span class="k">default</span><span class="p">:</span>
            <span class="n">_</span> <span class="o">=</span> <span class="s">""</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Now, make damn sure you’re calling this from the <code class="highlighter-rouge">Menu</code> class’ setup:</p>

<p><img src="" alt="" data-id="EnragedLimpDungenesscrab" class="gfyitem" /></p>

<p>HAWT.</p>

<h2 id="sounds">Sounds</h2>

<p>Add the reveal and hide sounds to the menu. Create the following two class variables:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="k">let</span> <span class="nv">hideMenuSound</span> <span class="o">=</span> <span class="kt">AudioPlayer</span><span class="p">(</span><span class="s">"menuClose.mp3"</span><span class="p">)</span><span class="o">!</span>
<span class="k">let</span> <span class="nv">revealMenuSound</span> <span class="o">=</span> <span class="kt">AudioPlayer</span><span class="p">(</span><span class="s">"menuOpen.mp3"</span><span class="p">)</span><span class="o">!</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>In <code class="highlighter-rouge">setup()</code>, tune the sounds like this:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="n">hideMenuSound</span><span class="o">.</span><span class="n">volume</span> <span class="o">=</span> <span class="mf">0.64</span>
<span class="n">revealMenuSound</span><span class="o">.</span><span class="n">volume</span> <span class="o">=</span> <span class="mf">0.64</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Then, at the top of <code class="highlighter-rouge">revealMenu()</code> call:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="n">revealMenuSound</span><span class="o">.</span><span class="nf">play</span><span class="p">()</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>And, at the top of <code class="highlighter-rouge">hideMenu()</code> call:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="n">hideMenuSound</span><span class="o">.</span><span class="nf">play</span><span class="p">()</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Run it. Listen. It’s so lovely.</p>

<h2 id="hidden-instruction">Hidden Instruction</h2>

<p>Let’s add an instruction label that tells the user to press and hold on the menu.</p>

<blockquote>
  <p>We found that people needed a prompt to press and hold on the menu before they could figure out how to use the app. So, we added this label to help them. We also assumed that after reading the instruction for the first time they wouldn’t have to read it again, so we decided to prevent it from reappearing after the first time it disappears.</p>
</blockquote>

<p>Create the following class-level variable:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="k">var</span> <span class="nv">instructionLabel</span> <span class="p">:</span> <span class="kt">UILabel</span><span class="o">!</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<blockquote>
  <p>Note we’re using <code class="highlighter-rouge">UILabel</code> because we want to have 2 lines of text that are center-aligned, and <code class="highlighter-rouge">TextShape</code> doesn’t have these functionalities.</p>
</blockquote>

<p>Add the following method to create the instruction:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12</pre></td><td class="code"><pre><span class="kd">func</span> <span class="nf">createInstructionLabel</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">instructionLabel</span> <span class="o">=</span> <span class="kt">UILabel</span><span class="p">(</span><span class="nv">frame</span><span class="p">:</span> <span class="kt">CGRect</span><span class="p">(</span><span class="nv">x</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span><span class="nv">y</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span><span class="nv">width</span><span class="p">:</span> <span class="mi">320</span><span class="p">,</span> <span class="nv">height</span><span class="p">:</span> <span class="mi">44</span><span class="p">))</span>
    <span class="n">instructionLabel</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="s">"press and hold to open menu</span><span class="se">\n</span><span class="s">then drag to choose a sign"</span>
    <span class="n">instructionLabel</span><span class="o">.</span><span class="n">font</span> <span class="o">=</span> <span class="kt">UIFont</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="s">"Menlo-Regular"</span><span class="p">,</span> <span class="nv">size</span><span class="p">:</span> <span class="mi">13</span><span class="p">)</span>
    <span class="n">instructionLabel</span><span class="o">.</span><span class="n">textAlignment</span> <span class="o">=</span> <span class="o">.</span><span class="kt">Center</span>
    <span class="n">instructionLabel</span><span class="o">.</span><span class="n">textColor</span> <span class="o">=</span> <span class="o">.</span><span class="nf">whiteColor</span><span class="p">()</span>
    <span class="n">instructionLabel</span><span class="o">.</span><span class="n">userInteractionEnabled</span> <span class="o">=</span> <span class="kc">false</span>
    <span class="n">instructionLabel</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="kt">CGPointMake</span><span class="p">(</span><span class="n">view</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">view</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">y</span> <span class="o">-</span> <span class="mi">128</span><span class="p">)</span>
    <span class="n">instructionLabel</span><span class="o">.</span><span class="n">numberOfLines</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="n">instructionLabel</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">canvas</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">instructionLabel</span><span class="p">)</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Next create a timer that will control when the label will appear:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="k">var</span> <span class="nv">timer</span> <span class="p">:</span> <span class="kt">Timer</span><span class="o">!</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Then, create two methods to reveal and hide the instruction:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11</pre></td><td class="code"><pre><span class="kd">func</span> <span class="nf">showInstruction</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mf">2.5</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">instructionLabel</span><span class="p">?</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="mf">1.0</span>
        <span class="p">}</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">hideInstruction</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">instructionLabel</span><span class="p">?</span><span class="o">.</span><span class="n">alpha</span> <span class="o">=</span> <span class="mf">0.0</span>
        <span class="p">}</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>In the <code class="highlighter-rouge">show()</code> method notice that we stop the timer. We do this because we only want the timer to fire once. You might be thinking: “then why not trigger the reveal from a delay?”… Because we want to be able to stop the timer before it first fires if the user has already opened the menu… and we can’t stop a delay</p>

<p>Next, create the timer and call <code class="highlighter-rouge">createInstructionLabel()</code> at the end of <code class="highlighter-rouge">setup()</code> like so:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="nf">createInstructionLabel</span><span class="p">()</span>

<span class="n">timer</span> <span class="o">=</span> <span class="kt">Timer</span><span class="p">(</span><span class="nv">interval</span><span class="p">:</span> <span class="mf">5.0</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">self</span><span class="o">.</span><span class="nf">showInstruction</span><span class="p">()</span>
<span class="p">}</span>
<span class="n">timer</span><span class="p">?</span><span class="o">.</span><span class="nf">start</span><span class="p">()</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>This sets the reveal to happen 5 seconds after the main canvas has set up, which is definitely enough time for someone who knows how to use the app to press on the menu and short enough that it appears in time for a user who doesn’t know how to use the menu.</p>

<p>Now, add a call to <code class="highlighter-rouge">hideInstruction()</code> to execute at the top of the <code class="highlighter-rouge">revealMenu()</code> method, with a bit of logic to run it only if the instruction label is visible:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="k">if</span> <span class="n">instructionLabel</span><span class="p">?</span><span class="o">.</span><span class="n">alpha</span> <span class="o">&gt;</span> <span class="mf">0.0</span> <span class="p">{</span>
    <span class="nf">hideInstruction</span><span class="p">()</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>And, add this to the top of <code class="highlighter-rouge">revealMenu()</code>:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="n">timer</span><span class="o">.</span><span class="nf">stop</span><span class="p">()</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Run it, and wait.</p>

<p><img src="" alt="" data-id="ConventionalDistantHartebeest" class="gfyitem" /></p>

<p>Hoooo-ahhh.</p>

<h2 id="the-shadow">The Shadow</h2>

<p>Simple.</p>

<p>At the top of <code class="highlighter-rouge">revealMenu()</code> add the following line:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="n">menuShadow</span><span class="o">.</span><span class="n">reveal</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Then, in the <code class="highlighter-rouge">delay(0.66)</code> of <code class="highlighter-rouge">hideMenu()</code> add the following line:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="k">self</span><span class="o">.</span><span class="n">menuShadow</span><span class="o">.</span><span class="n">hide</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Now the background gets dark when the menu opens.</p>

<h2 id="fin">Fin.</h2>

<p>That’s “it” the menu is 98% complete. The next chapter will go through pulling everything together, including adding controls for the menu to interact with the info panel and the parallax background.</p>

<p>Here’s a copy of <a href="https://gist.github.com/C4Framework/2235949aec0fddd3b8da">Menu.swift</a></p>

<p>Take a break.</p>

<p>Have a beer.</p>

        </div>
      </div>
    </div>

    <div class="container">
      <div class="row chapter-nav">
        <div class="col-xs-12 col-sm-12 col-md-12">
          <h1 class="text-center blue">Well done! Continue COSMOS?</h1>
          <ul class="examples-list next-prev list-unstyled">
            
              <li class="pull-left">
                <a class="more" href="/cosmos/20-Menu-Shadow" title="Earlier article: Menu Shadow">
                  <div>
                    <span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span>
                    <span class="img">
                      <img src="/images/cosmos/20/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 20<br />Menu Shadow</p>
                      <p>Give a little visual pop to the radial menu with a simple shadow.</p>
                    </div>
                  </div>
                </a>
              </li>
            
            
              <li class="pull-right">
                <a class="more" href="/cosmos/22-Info-Panel" title="Later article: Info Panel">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/22/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 22<br />Info Panel</p>
                      <p>A straightforward info panel with push controllers, popups and external links.</p>
                    </div>
                    <span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span>
                  </div>
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="row related">
        <div class="col-xs-12 col-md-12">
          <h1 class="text-center blue">All COSMOS Chapters</h1>
          <ul class="examples-list list-unstyled">
            
            
              <li>
                <a href="/cosmos/0-getting-started">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/0/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 0<br />Getting Started</p>
                      <p>Get up and running quickly with the COSMOS Xcode project files.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/1-prelude-to-design">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/1/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 1<br />Prelude To Design</p>
                      <p>An overview explaining why & how we chose to create COSMOS in the first place.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/2-designing-the-cosmos">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/2/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 2<br />Designing the COSMOS</p>
                      <p>Where to start? Defining the visual concept and deciding the functionality.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/3-plan-it">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/3/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 3<br />Plan It!</p>
                      <p>Get your goggles on as we start diving into the code with C4.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/4-Infinite-Scrollview">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/4/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 4<br />Infinite Scrollview</p>
                      <p>Implementing the idea of an infinite scrollview that loops around rather than stopping at the end.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/5-Infinite-Scrollview-Build">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/5/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 5<br />Infinite Scrollview</p>
                      <p>Time to code – get that infinite scrollview looping.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/6-Astrological-Sign-Provider">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/6/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 6<br />Astrological Sign Provider</p>
                      <p>How to go about wrangling all the data for the 12 astrological signs.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/7-Astrological-Sign-Provider-Build">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/7/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 7<br />Astrological Sign Provider - Build it!</p>
                      <p>We've wrangled all that data, now let's do something with it.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/8-Stars">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/8/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 8<br />Stars</p>
                      <p>Start bringing the COSMOS to life with some nice visual work.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/9-Parallax-Testing">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/9/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 9<br />Parallax Testing (Optional)</p>
                      <p>This optional chapter will walk you through how I originally tested the background.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/10-Stars-Background">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/10/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 10<br />Stars Background</p>
                      <p>Time to stargaze – we're going to build some constellations.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/11-Sign-Lines">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/11/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 11<br />Sign Lines</p>
                      <p>Time to stargaze – we're going to build some constellations.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/12-Small-Stars">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/12/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 12<br />Small Stars</p>
                      <p>Bring those constellations to life with stars. We're starting small.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/13-Big-Stars">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/13/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 13<br />Big Stars</p>
                      <p>We've got the small constellation stars, let's keep going with the big ones.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/14-Assembling-The-Stars">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/14/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 14<br />Assembling the Stars</p>
                      <p>Small stars, meet big stars. Time to unite them all.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/15-Radial-Menu">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/15/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 15<br />Radial Menu</p>
                      <p>Building the heart of the app - a radial menu with embedded animation that reacts to different gestures.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/16-Menu-Rings">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/16/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 16<br />Menu Rings</p>
                      <p>It's time to build the backbone of our radial menu.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/17-Menu-Rings">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/17/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 17<br />Animating the Menu Rings</p>
                      <p>Time to bring the radial menu to life with embedded animation.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/18-Menu-Icons">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/18/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 18<br />Menu Icons</p>
                      <p>Time to flesh out the radial menu with some animated icons.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/19-Menu-Selector">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/19/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 19<br />Menu Selector</p>
                      <p>Give the radial menu interaction and responsiveness with some programming wizardry.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/20-Menu-Shadow">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/20/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 20<br />Menu Shadow</p>
                      <p>Give a little visual pop to the radial menu with a simple shadow.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/21-Menu-Pull-It-Together">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/21/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 21<br />The Menu – Pull it Together</p>
                      <p>We've got all the components, let's get this beast put together now.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/22-Info-Panel">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/22/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 22<br />Info Panel</p>
                      <p>A straightforward info panel with push controllers, popups and external links.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/23-Pulling-It-All-Together">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/23/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 23<br />Pulling It All Together</p>
                      <p>Time to weave all the components into a unified app.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/24-Pulling-It-All-Together">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/24/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 24<br />Submitting to App Store</p>
                      <p>Our last task is to get COSMOS on the App Store. Seriously.</p>
                    </div>
                  </div>
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-md-3 col-sm-3 col-xs-6">
        <ul class="list-unstyled">
          <li class="title"><a href="/#overview">About</a></li>
          <li><a href="/#overview">Features</a></li>
          <!-- <li><a href="/about#history">History</a></li> -->
          <!-- <li><a href="/about/contributors">Contributors</a></li> -->
        </ul>
      </div>
      <div class="col-md-3 col-sm-3 col-xs-6">
        <ul class="list-unstyled">
          <li class="title"><a href="/learn">Learn + Explore</a></li>
          <li><a href="/install">Install C4</a></li>
          <li><a href="/examples">Examples</a></li>
          <li><a href="/tutorials">Tutorials</a></li>
          <li><a href="http://cocoadocs.org/docsets/C4/1.1.0/">Docs</a></li>
        </ul>
      </div>
      <div class="col-md-3 col-sm-3 col-xs-6">
        <ul class="list-unstyled">
          <li class="title"><a href="/contact">Connect</a></li>
          <li><a href="http://discourse.c4ios.com">Forums</a></li>
          <li><a href="http://www.medium.com/@c4framework" target="_blank">Medium</a></li>
          <li><a href="http://www.twitter.com/c4framework" target="_blank">Twitter</a></li>
          <li><a href="https://join-c4.herokuapp.com/" target="_blank">Slack</a></li>
          <li><a href="https://vimeo.com/c4ios" target="_blank">Vimeo</a></li>
          <li><a href="http://github.com/c4framework" target="_blank">GitHub</a></li>
        </ul>
      </div>
      <div class="col-md-3 col-sm-3 col-xs-6">
        <ul class="list-unstyled">
          <!-- <li class="title"><a href="/about">Sign Up for Newsletter</a></li>
          <li><input type="text" placeholder="Enter Email + Press Enter"></li> -->
          <li>© 2016 C4</li>
          <li><a href="/terms">Terms of Use</a></li>
          <li><a href="mailto:info@c4ios.com">Contact</a></li>
        </ul>    
      </div>
    </div>
  </div>
</footer>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-18444113-4', 'auto');
  ga('send', 'pageview');
</script>


    <script type="text/javascript" src="/js/toc.js"></script>
    <script>
     (function(d, t) {
        var g = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        g.src = 'http://assets.gfycat.com/js/gfyajax-0.517d.js';
        s.parentNode.insertBefore(g, s);
      }(document, 'script'));
    </script>
    <script type="text/javascript">
      $(document).ready(function() {
        $('#toc').width($('#toc').parents().width());

        $('#toc').toc({
          elementClass: 'toc',
          ulClass: 'nav',
          heading: 'Contents',
          indexingFormats: 'number',
          selector: 'h2, h3, h4',
        });

        $('body').scrollspy({
          target: '#toc',
          offset: $('#headerNav').outerHeight(true)
        });

        setTimeout(function() {
          var $sideBar = $('#toc');
          $sideBar.affix({
            offset: {
              top: function() {
                var offsetTop      = $sideBar.offset().top,
                sideBarMargin  = parseInt($sideBar.children(0).css('margin-top'), 10),
                navOuterHeight = $('#headerNav').height();
                return (this.top = offsetTop - navOuterHeight - sideBarMargin);
              },
              bottom: function() {
                return (this.bottom = $('footer').outerHeight(true) + $('.chapter-nav').outerHeight(true) + $('.related').outerHeight(true) + 60);
              }
            }
          });
        }, 100);

        $('td.gutter').each(function(index)
        {
          $(this).parents('.language-swift').closest('pre').addClass('has-gutter');
        });

        $('.tutorial img').each(function()
        {
          console.log($(this).parent());
          var img = $(this).attr('src');
          $(this).attr('src', '/images/cosmos/21/' + img + '').addClass('img-responsive');
        });

        $('.tutorial p img').unwrap().wrap('<figure></figure>').after(function() {
            return '<figcaption>'+this.alt+'</figcaption>';
        });

        $('.footnotes').prepend('<h4>Footnotes</h4>');
      });
    </script>
  </body>
</html>