<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
	

  <title>Animating the Menu Rings</title>
  <meta name="description" content="Even though I’ve separated this chapter from the previous one, we’re still going to be working in MenuRings.swift. Run the app again and make sure that you s...">
  <meta property="og:image" content="http://www.c4ios.com/images/banner.jpg">
  <meta property="og:url"   content="http://c4ios.com" />
  <meta property="og:title" content="Animating the Menu Rings"/>
  <meta name="og:description" content="Even though I’ve separated this chapter from the previous one, we’re still going to be working in MenuRings.swift. Run the app again and make sure that you s...">
  <meta property="og:type"  content="website"/>
  <meta property="og:site_name"  content="C4"/>

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@c4framework">
  <meta name="twitter:creator" content="@c4framework">
  <meta name="twitter:title" content="Animating the Menu Rings">
  <meta name="twitter:description" content="Even though I’ve separated this chapter from the previous one, we’re still going to be working in MenuRings.swift. Run the app again and make sure that you s...">
  <meta name="twitter:image" content="http://www.c4ios.com/images/banner.jpg">


  <link rel="stylesheet" type="text/css" href="/css/style.css" >
  <link rel="stylesheet" href="/css/syntax.css">
  <link href='https://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>

  <link rel="canonical" href="www.c4ios.com/cosmos/17-Menu-Rings">
  <link rel="alternate" type="application/rss+xml" title="C4 website" href="www.c4ios.com/feed.xml">
</head>

    <body class="animating-the-menu-rings" data-spy="scroll" data-target="#toc">

    <header>
  <nav class="navbar navbar-default" role="navigation"> 
    <div class="navbar-header container">
      <div class="row"> 
        <div class="col-xs-12 col-sm-12 col-md-12 navlist">
          <a class="navbar-brand" href="/">
            <span><img src="/images/c4logo.png"></span>
          </a>
          <ul class="nav navbar-nav navbar-left">
            <li><a href="/install" >Install</a></li>
            <li><a href="/tutorials" >Tutorials</a></li>
            <li><a href="/cosmos" class='active'>COSMOS</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/examples" >Examples</a></li>
            <li><a href="http://discourse.c4ios.com">Forums</a></li>
            <li><a href="http://cocoadocs.org/docsets/C4/1.1.0/">Documentation</a></li>
          </ul>
        </div>
      </div>  
    </div>        
  </nav>      
</header>

    <div class="container content animating-the-menu-rings" >
      <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 breadcrumb">
          <h1><a href="/tutorials">Tutorials</a><div class="bread-caret">></div><a href="/cosmos">COSMOS</a><div class="bread-caret">></div>Animating the Menu Rings</h1>
        </div>
      </div>

      <div class="row">
        <div class="col-xs-3 col-sm-3 col-md-3">
          <span class="img large">
            <img src="/images/cosmos/1/poster.png" />
          </span>
          <p class="title">Chapter 17<br /><span class="lighter">Animating the Menu Rings</span></p>
          <p class="post-tags">
  Tags<br /> 
  
  
  <a href="/tags/#getting started">getting started</a>,
  
  <a href="/tags/#basics">basics</a>,
  
  <a href="/tags/#introduction">introduction</a>,
  
  <a href="/tags/#easy">easy</a>,
  
  <a href="/tags/#c4">c4</a>
  
</p>
          <p>Estimated Time<br /><span class="lighter"></span></p>

          <hr />

          <div id="toc"></div>
        </div>

        <div class="col-xs-9 col-sm-9 col-md-9 tutorial">
          <p>Even though I’ve separated this chapter from the previous one, we’re still going to be working in <code class="highlighter-rouge">MenuRings.swift</code>. Run the app again and make sure that you see this:</p>

<p><img src="01.png" alt="" /></p>

<blockquote>
  <p>If you don’t, then go back to the previous chapter and make sure all the variables are set for the inner state of each line / ring component of the menu.</p>
</blockquote>

<h2 id="thick-ring-animations">Thick Ring Animations</h2>

<p>For each component we’re going to create a specific animation object for the out and in transitions. Starting with the thick ring, add the following two variables to your class:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="k">var</span> <span class="nv">thickRingOut</span> <span class="p">:</span> <span class="kt">ViewAnimation</span><span class="p">?</span>
<span class="k">var</span> <span class="nv">thickRingIn</span> <span class="p">:</span> <span class="kt">ViewAnimation</span><span class="p">?</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Now, create a method that sets them up:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11</pre></td><td class="code"><pre><span class="kd">func</span> <span class="nf">createThickRingAnimations</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">thickRingOut</span> <span class="o">=</span> <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">thickRing</span><span class="p">?</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">thickRingFrames</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="p">}</span>
    <span class="n">thickRingOut</span><span class="p">?</span><span class="o">.</span><span class="n">curve</span> <span class="o">=</span> <span class="o">.</span><span class="kt">EaseOut</span>
    
    <span class="n">thickRingIn</span> <span class="o">=</span> <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">thickRing</span><span class="p">?</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">thickRingFrames</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="p">}</span>
    <span class="n">thickRingIn</span><span class="p">?</span><span class="o">.</span><span class="n">curve</span> <span class="o">=</span> <span class="o">.</span><span class="kt">EaseOut</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>This method sets up two animations, the first “out” sets the new frame of the thick ring and tells the shape to update its path which forces the shape to redraw its path to fit the frame. The second is simply the opposite.</p>

<p>Let’s test it out.</p>

<p>I create these two methods:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17</pre></td><td class="code"><pre><span class="kd">func</span> <span class="nf">animOut</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">delay</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">thickRingOut</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="nf">delay</span><span class="p">(</span><span class="mf">2.0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="nf">animIn</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">animIn</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">delay</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">thickRingIn</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="nf">delay</span><span class="p">(</span><span class="mf">2.0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="nf">animOut</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Then in setup I run:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="k">self</span><span class="o">.</span><span class="nf">createThickRingAnimations</span><span class="p">()</span>
<span class="nf">animOut</span><span class="p">()</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>And I get this:</p>

<p><img src="" alt="" data-id="OldWindyKiwi" class="gfyitem" /></p>

<h2 id="thin-ring-animations-out">Thin Ring Animations (OUT)</h2>

<p>Let’s start by building the out animations for our thin rings. This step differs a bit from the previous because we have to coordinate 5 lines instead of one, so we use a loop to build them and an array to store them.</p>

<p>Add the following variable to your class:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="k">var</span> <span class="nv">thinRingsOut</span> <span class="p">:</span> <span class="kt">ViewAnimationSequence</span><span class="p">?</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Then, add this method:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20</pre></td><td class="code"><pre><span class="kd">func</span> <span class="nf">createThinRingsOutAnimations</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">animationArray</span> <span class="o">=</span> <span class="p">[</span><span class="kt">ViewAnimation</span><span class="p">]()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">0</span><span class="o">..&lt;</span><span class="k">self</span><span class="o">.</span><span class="n">thinRings</span><span class="o">.</span><span class="n">count</span><span class="o">-</span><span class="mi">1</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">anim</span> <span class="o">=</span> <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mf">0.075</span> <span class="o">+</span> <span class="kt">Double</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.01</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">let</span> <span class="nv">circle</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">thinRings</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="c1">//for each animation greatre than the first</span>
            <span class="k">if</span> <span class="p">(</span><span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
                <span class="c1">//animate the opacity of the ring to 1.0</span>
                <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mf">0.0375</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">circle</span><span class="o">.</span><span class="n">opacity</span> <span class="o">=</span> <span class="mf">1.0</span>
                    <span class="p">}</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
            <span class="p">}</span>
            
            <span class="n">circle</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">thinRingFrames</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">]</span>
        <span class="p">}</span>
        <span class="n">anim</span><span class="o">.</span><span class="n">curve</span> <span class="o">=</span> <span class="o">.</span><span class="kt">EaseOut</span>
        <span class="n">animationArray</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="n">anim</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">thinRingsOut</span> <span class="o">=</span> <span class="kt">ViewAnimationSequence</span><span class="p">(</span><span class="nv">animations</span><span class="p">:</span> <span class="n">animationArray</span><span class="p">)</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>This creates an animation sequence variable, and then populates that by setting up animations based on the target frames we set waaaaay back in the previous chapter.</p>

<p>The method creates an animation array, then runs a loop that:</p>

<ol>
  <li>Grabs each of the thin rings from smallest to largest</li>
  <li>Creates an animation whose duration is based on the current index <code class="highlighter-rouge">(0.075+Double(i) + 0.01)</code></li>
  <li>Checks if the index of each lines is more than 0, i.e. not the inner ring</li>
  <li>Creates an opacity animation for each of the non-inner circles that fades them in and executes this immediately</li>
  <li>Grabs the current target frame which is <code class="highlighter-rouge">+1</code> from the current index.</li>
  <li>Sets the frame of the current ring and calls <code class="highlighter-rouge">updatePath</code></li>
  <li>Sets the animation curve of the main animation <code class="highlighter-rouge">.EaseOut</code></li>
  <li>Adds the animation to the array</li>
</ol>

<p>When the loop completes it constructs the <code class="highlighter-rouge">thinRingsOut</code> sequence.</p>

<h2 id="thin-rings-animation-in">Thin Rings Animation (IN)</h2>

<p>Animating back in is pretty much the same process as out, but with only a few simple changes.</p>

<p>Add the following variable to your class:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="k">var</span> <span class="nv">thinRingsIn</span> <span class="p">:</span> <span class="kt">ViewAnimationSequence</span><span class="p">?</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Then add this method:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17</pre></td><td class="code"><pre><span class="kd">func</span> <span class="nf">createThinRingsInAnimations</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">animationArray</span> <span class="o">=</span> <span class="p">[</span><span class="kt">ViewAnimation</span><span class="p">]()</span>
    <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">1</span><span class="o">...</span><span class="k">self</span><span class="o">.</span><span class="n">thinRings</span><span class="o">.</span><span class="n">count</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">anim</span> <span class="o">=</span> <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mf">0.075</span> <span class="o">+</span> <span class="kt">Double</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">*</span> <span class="mf">0.01</span><span class="p">,</span> <span class="nv">animations</span><span class="p">:</span> <span class="p">{</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Void</span> <span class="k">in</span>
            <span class="k">let</span> <span class="nv">circle</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">thinRings</span><span class="p">[</span><span class="k">self</span><span class="o">.</span><span class="n">thinRings</span><span class="o">.</span><span class="n">count</span> <span class="o">-</span> <span class="n">i</span><span class="p">]</span>
            <span class="k">if</span> <span class="k">self</span><span class="o">.</span><span class="n">thinRings</span><span class="o">.</span><span class="n">count</span> <span class="o">-</span> <span class="n">i</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">{</span>
                <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mf">0.0375</span><span class="p">)</span> <span class="p">{</span>
                    <span class="n">circle</span><span class="o">.</span><span class="n">opacity</span> <span class="o">=</span> <span class="mf">0.0</span>
                    <span class="p">}</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
            <span class="p">}</span>
            <span class="n">circle</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">thinRingFrames</span><span class="p">[</span><span class="k">self</span><span class="o">.</span><span class="n">thinRings</span><span class="o">.</span><span class="n">count</span> <span class="o">-</span> <span class="n">i</span><span class="p">]</span>
        <span class="p">})</span>
        <span class="n">anim</span><span class="o">.</span><span class="n">curve</span> <span class="o">=</span> <span class="o">.</span><span class="kt">EaseOut</span>
        <span class="n">animationArray</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="n">anim</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">thinRingsIn</span> <span class="o">=</span> <span class="kt">ViewAnimationSequence</span><span class="p">(</span><span class="nv">animations</span><span class="p">:</span> <span class="n">animationArray</span><span class="p">)</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Here are the differences:</p>

<ol>
  <li>This bit of math means the loop works backwards from the outer ring to the inner: <code class="highlighter-rouge">self.thinRings.count - i</code></li>
  <li>Animates the opacities to <code class="highlighter-rouge">0.0</code></li>
  <li>Since we always want to grab the “previous” number for our arrays (e.g. <code class="highlighter-rouge">-1</code>) this is why the loop executes like this: <code class="highlighter-rouge">for i in 1...self.thinRings.count</code></li>
</ol>

<h2 id="dashed-ring-animations">Dashed Ring Animations</h2>

<p>To finish these animations off, create two new animation variables:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="k">var</span> <span class="nv">revealDashedRings</span> <span class="p">:</span> <span class="kt">ViewAnimation</span><span class="p">?</span>
<span class="k">var</span> <span class="nv">hideDashedRings</span> <span class="p">:</span> <span class="kt">ViewAnimation</span><span class="p">?</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Add the following method:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13</pre></td><td class="code"><pre><span class="kd">func</span> <span class="nf">createDashedRingAnimations</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">revealDashedRings</span> <span class="o">=</span> <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">dashedRings</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lineWidth</span> <span class="o">=</span> <span class="mi">4</span>
        <span class="k">self</span><span class="o">.</span><span class="n">dashedRings</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lineWidth</span> <span class="o">=</span> <span class="mi">12</span>
    <span class="p">}</span>
    <span class="n">revealDashedRings</span><span class="p">?</span><span class="o">.</span><span class="n">curve</span> <span class="o">=</span> <span class="o">.</span><span class="kt">EaseOut</span>
    
    <span class="n">hideDashedRings</span> <span class="o">=</span> <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">dashedRings</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">lineWidth</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">self</span><span class="o">.</span><span class="n">dashedRings</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lineWidth</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="p">}</span>
    <span class="n">hideDashedRings</span><span class="p">?</span><span class="o">.</span><span class="n">curve</span> <span class="o">=</span> <span class="o">.</span><span class="kt">EaseOut</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<h3 id="check-it">Check It.</h3>

<p>To see the animate out / in, modify the <code class="highlighter-rouge">animOut</code> and <code class="highlighter-rouge">animIn</code> methods to look like this:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21</pre></td><td class="code"><pre><span class="kd">func</span> <span class="nf">animOut</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">delay</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">thickRingOut</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
        <span class="k">self</span><span class="o">.</span><span class="n">thinRingsOut</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
        <span class="k">self</span><span class="o">.</span><span class="n">revealDashedRings</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="nf">delay</span><span class="p">(</span><span class="mf">2.0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="nf">animIn</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">animIn</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">delay</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">thickRingIn</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
        <span class="k">self</span><span class="o">.</span><span class="n">thinRingsIn</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
        <span class="k">self</span><span class="o">.</span><span class="n">hideDashedRings</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="nf">delay</span><span class="p">(</span><span class="mf">2.0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="nf">animOut</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Then, add the following to setup() before calling animOut():</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="nf">createThinRingsOutAnimations</span><span class="p">()</span>
<span class="nf">createThinRingsInAnimations</span><span class="p">()</span>
<span class="nf">createDashedRingAnimations</span><span class="p">()</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Run it and you should see this:</p>

<p><img src="" alt="" data-id="OldNastyJaguarundi" class="gfyitem" /></p>

<p>By now you may have noticed that the timing is strange for the rings and dashes. Don’t worry about that now, we’ll deal with timing when we pull everything together at the end.</p>

<p>Nearly there.</p>

<h2 id="dividing-lines">Dividing Lines</h2>

<p>Animating the dividing lines is simple, except for the fact that Jake’s concept is for them to randomly animate the order in which they appear. Translation: every time the lines animate in or out the sequence should be different than the previous time.</p>

<p>This is how I solved the issue:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre></td><td class="code"><pre><span class="kd">func</span> <span class="nf">revealHideDividingLines</span><span class="p">(</span><span class="nv">target</span><span class="p">:</span> <span class="kt">Double</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">indices</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">8</span><span class="p">,</span><span class="mi">9</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">11</span><span class="p">]</span>
    
    <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">0</span><span class="o">...</span><span class="mi">11</span> <span class="p">{</span>
        <span class="nf">delay</span><span class="p">(</span><span class="mf">0.05</span><span class="o">*</span><span class="kt">Double</span><span class="p">(</span><span class="n">i</span><span class="p">))</span> <span class="p">{</span>
            <span class="k">let</span> <span class="nv">randomIndex</span> <span class="o">=</span> <span class="nf">random</span><span class="p">(</span><span class="nv">below</span><span class="p">:</span> <span class="n">indices</span><span class="o">.</span><span class="n">count</span><span class="p">)</span>
            <span class="k">let</span> <span class="nv">index</span> <span class="o">=</span> <span class="n">indices</span><span class="p">[</span><span class="n">randomIndex</span><span class="p">]</span>
            
            <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">)</span> <span class="p">{</span>
                <span class="k">self</span><span class="o">.</span><span class="n">menuDividingLines</span><span class="p">[</span><span class="n">index</span><span class="p">]</span><span class="o">.</span><span class="n">strokeEnd</span> <span class="o">=</span> <span class="n">target</span>
            <span class="p">}</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
            
            <span class="n">indices</span><span class="o">.</span><span class="nf">removeAtIndex</span><span class="p">(</span><span class="n">randomIndex</span><span class="p">)</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Add that to your class.</p>

<p>This method does the following:</p>

<ol>
  <li>Takes a target (should be <code class="highlighter-rouge">0.0</code>, or <code class="highlighter-rouge">1.0</code>)</li>
  <li>Creates an array of indexes</li>
  <li>Runs a loop that executes 12 times</li>
  <li>Each iteration grabs a random entry from the indices array</li>
  <li>Then, it animates the <code class="highlighter-rouge">strokeEnd</code> of the dividing line for the retrieved index to the <code class="highlighter-rouge">target</code> value</li>
  <li>After executing the animation it removes the retrieved index from the indices array.</li>
</ol>

<p>Then, try it out:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29</pre></td><td class="code"><pre><span class="kd">func</span> <span class="nf">animOut</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">delay</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">thickRingOut</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
        <span class="k">self</span><span class="o">.</span><span class="n">thinRingsOut</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="nf">delay</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="nf">revealHideDividingLines</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="nf">delay</span><span class="p">(</span><span class="mf">2.5</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="nf">animIn</span><span class="p">()</span>
    <span class="p">}</span>

<span class="p">}</span>

<span class="kd">func</span> <span class="nf">animIn</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">delay</span><span class="p">(</span><span class="mf">0.25</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="nf">revealHideDividingLines</span><span class="p">(</span><span class="mf">0.0</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="nf">delay</span><span class="p">(</span><span class="mf">1.0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">thickRingIn</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
        <span class="k">self</span><span class="o">.</span><span class="n">thinRingsIn</span><span class="p">?</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="p">}</span>
    <span class="nf">delay</span><span class="p">(</span><span class="mf">2.0</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="nf">animOut</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Which gives me the following:</p>

<p><img src="" alt="" data-id="IdenticalLazyElectriceel" class="gfyitem" /></p>

<h2 id="cleaning-house">Cleaning House</h2>

<p>Now, scrap the call to <code class="highlighter-rouge">self.animOut()</code> and delete the two animation methods.</p>

<p>Next, create two new methods:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13</pre></td><td class="code"><pre><span class="kd">func</span> <span class="nf">createRingsLines</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">createThickRing</span><span class="p">()</span>
    <span class="nf">createThinRings</span><span class="p">()</span>
    <span class="nf">createDashedRings</span><span class="p">()</span>
    <span class="nf">createMenuDividingLines</span><span class="p">()</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nf">createRingsLinesAnimations</span><span class="p">()</span> <span class="p">{</span>
    <span class="nf">createThickRingAnimations</span><span class="p">()</span>
    <span class="nf">createThinRingsOutAnimations</span><span class="p">()</span>
    <span class="nf">createThinRingsInAnimations</span><span class="p">()</span>
    <span class="nf">createDashedRingAnimations</span><span class="p">()</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>And then update your <code class="highlighter-rouge">setup</code> to look like this:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="kd">public</span> <span class="k">override</span> <span class="kd">func</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">canvas</span><span class="o">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="n">clear</span>
  <span class="n">canvas</span><span class="o">.</span><span class="n">frame</span> <span class="o">=</span> <span class="kt">Rect</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">80</span><span class="p">,</span><span class="mi">80</span><span class="p">)</span>
  <span class="nf">createRingsLines</span><span class="p">()</span>
  <span class="nf">createRingsLinesAnimations</span><span class="p">()</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Finally, add one more variable to the class:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="k">var</span> <span class="nv">menuIsVisible</span> <span class="o">=</span> <span class="kc">false</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>This last variable will be used in a later chapter.</p>

<p>Grab a copy of <a href="https://gist.github.com/C4Framework/9d44e5800ed86446df4a">MenuRings.swift</a></p>

        </div>
      </div>
    </div>

    <div class="container">
      <div class="row chapter-nav">
        <div class="col-xs-12 col-sm-12 col-md-12">
          <h1 class="text-center blue">Well done! Continue COSMOS?</h1>
          <ul class="examples-list next-prev list-unstyled">
            
              <li class="pull-left">
                <a class="more" href="/cosmos/16-Menu-Rings" title="Earlier article: Menu Rings">
                  <div>
                    <span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span>
                    <span class="img">
                      <img src="/images/cosmos/16/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 16<br />Menu Rings</p>
                      <p>It's time to build the backbone of our radial menu.</p>
                    </div>
                  </div>
                </a>
              </li>
            
            
              <li class="pull-right">
                <a class="more" href="/cosmos/18-Menu-Icons" title="Later article: Menu Icons">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/18/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 18<br />Menu Icons</p>
                      <p>Time to flesh out the radial menu with some animated icons.</p>
                    </div>
                    <span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span>
                  </div>
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="row related">
        <div class="col-xs-12 col-md-12">
          <h1 class="text-center blue">All COSMOS Chapters</h1>
          <ul class="examples-list list-unstyled">
            
            
              <li>
                <a href="/cosmos/0-getting-started">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/0/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 0<br />Getting Started</p>
                      <p>Get up and running quickly with the COSMOS Xcode project files.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/1-prelude-to-design">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/1/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 1<br />Prelude To Design</p>
                      <p>An overview explaining why & how we chose to create COSMOS in the first place.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/2-designing-the-cosmos">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/2/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 2<br />Designing the COSMOS</p>
                      <p>Where to start? Defining the visual concept and deciding the functionality.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/3-plan-it">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/3/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 3<br />Plan It!</p>
                      <p>Get your goggles on as we start diving into the code with C4.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/4-Infinite-Scrollview">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/4/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 4<br />Infinite Scrollview</p>
                      <p>Implementing the idea of an infinite scrollview that loops around rather than stopping at the end.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/5-Infinite-Scrollview-Build">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/5/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 5<br />Infinite Scrollview</p>
                      <p>Time to code – get that infinite scrollview looping.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/6-Astrological-Sign-Provider">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/6/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 6<br />Astrological Sign Provider</p>
                      <p>How to go about wrangling all the data for the 12 astrological signs.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/7-Astrological-Sign-Provider-Build">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/7/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 7<br />Astrological Sign Provider - Build it!</p>
                      <p>We've wrangled all that data, now let's do something with it.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/8-Stars">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/8/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 8<br />Stars</p>
                      <p>Start bringing the COSMOS to life with some nice visual work.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/9-Parallax-Testing">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/9/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 9<br />Parallax Testing (Optional)</p>
                      <p>This optional chapter will walk you through how I originally tested the background.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/10-Stars-Background">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/10/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 10<br />Stars Background</p>
                      <p>Time to stargaze – we're going to build some constellations.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/11-Sign-Lines">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/11/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 11<br />Sign Lines</p>
                      <p>Time to stargaze – we're going to build some constellations.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/12-Small-Stars">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/12/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 12<br />Small Stars</p>
                      <p>Bring those constellations to life with stars. We're starting small.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/13-Big-Stars">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/13/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 13<br />Big Stars</p>
                      <p>We've got the small constellation stars, let's keep going with the big ones.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/14-Assembling-The-Stars">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/14/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 14<br />Assembling the Stars</p>
                      <p>Small stars, meet big stars. Time to unite them all.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/15-Radial-Menu">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/15/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 15<br />Radial Menu</p>
                      <p>Building the heart of the app - a radial menu with embedded animation that reacts to different gestures.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/16-Menu-Rings">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/16/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 16<br />Menu Rings</p>
                      <p>It's time to build the backbone of our radial menu.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/17-Menu-Rings">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/17/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 17<br />Animating the Menu Rings</p>
                      <p>Time to bring the radial menu to life with embedded animation.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/18-Menu-Icons">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/18/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 18<br />Menu Icons</p>
                      <p>Time to flesh out the radial menu with some animated icons.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/19-Menu-Selector">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/19/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 19<br />Menu Selector</p>
                      <p>Give the radial menu interaction and responsiveness with some programming wizardry.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/20-Menu-Shadow">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/20/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 20<br />Menu Shadow</p>
                      <p>Give a little visual pop to the radial menu with a simple shadow.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/21-Menu-Pull-It-Together">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/21/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 21<br />The Menu – Pull it Together</p>
                      <p>We've got all the components, let's get this beast put together now.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/22-Info-Panel">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/22/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 22<br />Info Panel</p>
                      <p>A straightforward info panel with push controllers, popups and external links.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/23-Pulling-It-All-Together">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/23/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 23<br />Pulling It All Together</p>
                      <p>Time to weave all the components into a unified app.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/24-Pulling-It-All-Together">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/24/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 24<br />Submitting to App Store</p>
                      <p>Our last task is to get COSMOS on the App Store. Seriously.</p>
                    </div>
                  </div>
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-md-3 col-sm-3 col-xs-6">
        <ul class="list-unstyled">
          <li class="title"><a href="/#overview">About</a></li>
          <li><a href="/#overview">Features</a></li>
          <!-- <li><a href="/about#history">History</a></li> -->
          <!-- <li><a href="/about/contributors">Contributors</a></li> -->
        </ul>
      </div>
      <div class="col-md-3 col-sm-3 col-xs-6">
        <ul class="list-unstyled">
          <li class="title"><a href="/learn">Learn + Explore</a></li>
          <li><a href="/install">Install C4</a></li>
          <li><a href="/examples">Examples</a></li>
          <li><a href="/tutorials">Tutorials</a></li>
          <li><a href="http://cocoadocs.org/docsets/C4/1.1.0/">Docs</a></li>
        </ul>
      </div>
      <div class="col-md-3 col-sm-3 col-xs-6">
        <ul class="list-unstyled">
          <li class="title"><a href="/contact">Connect</a></li>
          <li><a href="http://discourse.c4ios.com">Forums</a></li>
          <li><a href="http://www.medium.com/@c4framework" target="_blank">Medium</a></li>
          <li><a href="http://www.twitter.com/c4framework" target="_blank">Twitter</a></li>
          <li><a href="https://join-c4.herokuapp.com/" target="_blank">Slack</a></li>
          <li><a href="https://vimeo.com/c4ios" target="_blank">Vimeo</a></li>
          <li><a href="http://github.com/c4framework" target="_blank">GitHub</a></li>
        </ul>
      </div>
      <div class="col-md-3 col-sm-3 col-xs-6">
        <ul class="list-unstyled">
          <!-- <li class="title"><a href="/about">Sign Up for Newsletter</a></li>
          <li><input type="text" placeholder="Enter Email + Press Enter"></li> -->
          <li>© 2016 C4</li>
          <li><a href="/terms">Terms of Use</a></li>
          <li><a href="mailto:info@c4ios.com">Contact</a></li>
        </ul>    
      </div>
    </div>
  </div>
</footer>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-18444113-4', 'auto');
  ga('send', 'pageview');
</script>


    <script type="text/javascript" src="/js/toc.js"></script>
    <script>
     (function(d, t) {
        var g = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        g.src = 'http://assets.gfycat.com/js/gfyajax-0.517d.js';
        s.parentNode.insertBefore(g, s);
      }(document, 'script'));
    </script>
    <script type="text/javascript">
      $(document).ready(function() {
        $('#toc').width($('#toc').parents().width());

        $('#toc').toc({
          elementClass: 'toc',
          ulClass: 'nav',
          heading: 'Contents',
          indexingFormats: 'number',
          selector: 'h2, h3, h4',
        });

        $('body').scrollspy({
          target: '#toc',
          offset: $('#headerNav').outerHeight(true)
        });

        setTimeout(function() {
          var $sideBar = $('#toc');
          $sideBar.affix({
            offset: {
              top: function() {
                var offsetTop      = $sideBar.offset().top,
                sideBarMargin  = parseInt($sideBar.children(0).css('margin-top'), 10),
                navOuterHeight = $('#headerNav').height();
                return (this.top = offsetTop - navOuterHeight - sideBarMargin);
              },
              bottom: function() {
                return (this.bottom = $('footer').outerHeight(true) + $('.chapter-nav').outerHeight(true) + $('.related').outerHeight(true) + 60);
              }
            }
          });
        }, 100);

        $('td.gutter').each(function(index)
        {
          $(this).parents('.language-swift').closest('pre').addClass('has-gutter');
        });

        $('.tutorial img').each(function()
        {
          console.log($(this).parent());
          var img = $(this).attr('src');
          $(this).attr('src', '/images/cosmos/17/' + img + '').addClass('img-responsive');
        });

        $('.tutorial p img').unwrap().wrap('<figure></figure>').after(function() {
            return '<figcaption>'+this.alt+'</figcaption>';
        });

        $('.footnotes').prepend('<h4>Footnotes</h4>');
      });
    </script>
  </body>
</html>