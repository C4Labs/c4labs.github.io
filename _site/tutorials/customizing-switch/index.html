<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
	

  <title>Customizing A Switch</title>
  <meta name="description" content="Customizing A Switch">
  <meta property="og:image" content="http://www.c4ios.com/images/banner.jpg">
  <meta property="og:url"   content="http://c4ios.com" />
  <meta property="og:title" content="Customizing A Switch"/>
  <meta name="og:description" content="Customizing A Switch">
  <meta property="og:type"  content="website"/>
  <meta property="og:site_name"  content="C4"/>

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@c4framework">
  <meta name="twitter:creator" content="@c4framework">
  <meta name="twitter:title" content="Customizing A Switch">
  <meta name="twitter:description" content="Customizing A Switch">
  <meta name="twitter:image" content="http://www.c4ios.com/images/banner.jpg">


  <link rel="stylesheet" type="text/css" href="/css/style.css" >
  <link rel="stylesheet" href="/css/syntax.css">
  <link href='https://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>

  <link rel="canonical" href="www.c4ios.com/tutorials/customizing-switch/">
  <link rel="alternate" type="application/rss+xml" title="C4 website" href="www.c4ios.com/feed.xml">
</head>

    <body class="customizing a switch" data-spy="scroll" data-target="#toc">

    <header>
  <nav class="navbar navbar-default" role="navigation"> 
    <div class="navbar-header container">
      <div class="row"> 
        <div class="col-xs-12 col-sm-12 col-md-12 navlist">
          <a class="navbar-brand" href="/">
            <span><img src="/images/c4logo.png"></span>
          </a>
          <ul class="nav navbar-nav navbar-left">
            <li><a href="/install" >Install</a></li>
            <li><a href="/tutorials" class='active'>Tutorials</a></li>
            <li><a href="/cosmos" >COSMOS</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/examples" >Examples</a></li>
            <li><a href="http://discourse.c4ios.com">Forums</a></li>
            <li><a href="http://cocoadocs.org/docsets/C4/1.1.0/">Documentation</a></li>
          </ul>
        </div>
      </div>  
    </div>        
  </nav>      
</header>

    <div class="container content customizing a switch" >
      <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 breadcrumb">
          <h1><a href="/tutorials">Tutorials</a><div class="bread-caret">></div>Customizing A Switch</h1>
        </div>
      </div>

      <div class="row">
        <div class="col-xs-3 col-sm-3 col-md-3">
          <span class="img large">
            <img src="/images/tutorials/customizing-switch/poster.png" />
          </span>
          <p>Author<br /><span class="lighter">Ollie (with a little &#10084; from Travis)</span></p>
          <p class="post-tags">
  Tags<br /> 
  
  
  <a href="/tags/#getting started">getting started</a>,
  
  <a href="/tags/#basics">basics</a>,
  
  <a href="/tags/#introduction">introduction</a>,
  
  <a href="/tags/#easy">easy</a>,
  
  <a href="/tags/#c4">c4</a>
  
</p>
          <p>Estimated Time<br /><span class="lighter">10 - 20 minutes</span></p>

          <hr />

          <div id="toc"></div>
        </div>

        <div class="col-xs-9 col-sm-9 col-md-9 tutorial">
          <h1 id="customizing-a-switch">Customizing A Switch</h1>

<p>Travis recently <a href="http://127.0.0.1:4000/tutorials/hacking-uiswitch/">hacked <code class="highlighter-rouge">UISwitch</code></a> to make customizing standard UIKit switches easy and straightforward. I had this really cool switch example in mind that I found on <a href="https://www.pinterest.com/pin/453104412490096760/">this</a> pintrest board, and then jammed with Jake from <a href="www.pintrest.com/jakemakes">@jakesmakes</a> on the design and layout of our own version of that switch.</p>

<p><img src="" alt="This is what we're going to build!" data-id="ConfusedHideousHoneybee" class="gfyitem" /></p>

<p>The <code class="highlighter-rouge">Switch</code> consists of two components: The switch background and the switch button. In this tutorial, I’ll show you how to add the Switch to your <code class="highlighter-rouge">WorkSpace</code>, customize the components, and then make sure everything looks good.</p>

<blockquote>
  <p>If you haven’t already done so, install C4 by following the instructions on our <a href="http://www.c4ios.com/install">install tutorial</a>. The easiest is to use the first option.</p>
</blockquote>

<h2 id="not-your-old-switcheroo">Not Your Old Switcheroo</h2>
<p>In the following steps you’ll lay the groundwork for creating a custom version of a <code class="highlighter-rouge">UISwitch</code>. To make things a bit smoother you’ll have to incorporate some already made files. First…</p>

<p>Create a new C4 Project</p>

<h3 id="add-switch-files-to-project">Add Switch files to project</h3>
<p>You’ll be using 3 classes that were discussed in a <a href="http://www.c4ios.com/tutorials/hacking-uiswitch">previous tutorial</a>.</p>

<p>Grab a copy of the 3 files found <a href="https://gist.github.com/C4Framework/5dc3d3ba629454a9d474">HERE</a>.</p>

<p>The files you’ve just grabbed consist of a <code class="highlighter-rouge">Switch</code>, <code class="highlighter-rouge">SwitchThumb</code> and <code class="highlighter-rouge">SwitchBackground</code>.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Drag them into the file inspector of your project.
</code></pre>
</div>

<p>In the <code class="highlighter-rouge">WorkSpace</code> file add this line of code in <code class="highlighter-rouge">setup()</code>:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2</pre></td><td class="code"><pre><span class="k">var</span> <span class="nv">switch</span> <span class="o">=</span> <span class="kt">Switch</span><span class="p">(</span><span class="nv">thumb</span><span class="p">:</span> <span class="kt">SwitchThumb</span><span class="p">(),</span> <span class="nv">background</span><span class="p">:</span> <span class="kt">SwitchBackground</span><span class="p">())</span>
<span class="n">canvas</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="k">switch</span><span class="p">)</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>When you run it, you should see the switch with its default colors.</p>

<p><img src="switch.png" alt="A basic custom switch." /></p>

<h3 id="add-some-assets">Add Some Assets</h3>
<p>You’re going to need some assets that we’ve already prepared.</p>

<p><a href="http://www.c4ios.com/tutorials/moon-switch/assets.zip">Download the assets</a></p>

<p>After unzipping the file grab all of the assets and drag them into the <code class="highlighter-rouge">Images.xcassets</code> folder in your project, like so:</p>

<p><img src="" alt="" data-id="VelvetyIdealChipmunk" class="gfyitem" /></p>

<h2 id="customizing-the-switch">Customizing The Switch</h2>
<p>To create your own custom version switch your going to create a subclass of <code class="highlighter-rouge">Switch</code> which is already a subclass <code class="highlighter-rouge">UISwitch</code>. The <code class="highlighter-rouge">Switch</code> class has two major components:</p>

<ul>
  <li>A Background</li>
  <li>A Thumb</li>
</ul>

<p>To create the moon version, you’ll be subclassing these three objects:</p>

<ul>
  <li>Switch</li>
  <li>SwitchBackground</li>
  <li>SwitchThumb</li>
</ul>

<p>Let’s start with the background.</p>

<h3 id="create-moonbackground">Create MoonBackground</h3>
<p>The <code class="highlighter-rouge">SwitchBackground</code> is a subclass of <code class="highlighter-rouge">View</code> that allows us to customize the pill behind the thumbnail button.</p>

<p>Create a new file and name it <code class="highlighter-rouge">MoonBackground</code> then add the following code to it:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="kd">class</span> <span class="kt">MoonBackground</span><span class="p">:</span> <span class="kt">SwitchBackground</span> <span class="p">{</span>

    <span class="k">var</span> <span class="nv">sunColor</span> <span class="o">=</span> <span class="kt">Color</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="mi">164</span><span class="p">,</span> <span class="nv">green</span><span class="p">:</span> <span class="mi">245</span><span class="p">,</span> <span class="nv">blue</span><span class="p">:</span> <span class="mi">253</span><span class="p">,</span> <span class="nv">alpha</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="k">var</span> <span class="nv">moonColor</span> <span class="o">=</span> <span class="kt">Color</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="mi">19</span><span class="p">,</span> <span class="nv">green</span><span class="p">:</span> <span class="mi">44</span><span class="p">,</span> <span class="nv">blue</span><span class="p">:</span> <span class="mi">72</span><span class="p">,</span> <span class="nv">alpha</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span>

    <span class="k">override</span> <span class="kd">func</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="n">sunColor</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Here you’re making a new class, a subclass of <code class="highlighter-rouge">SwitchBackground</code> and then adding two colors as variables. You’ll create a way to switch the colors soon, but for now, just set the <code class="highlighter-rouge">backgroundColor</code> to <code class="highlighter-rouge">sunColor</code> in <code class="highlighter-rouge">setup()</code>, like this:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="k">override</span> <span class="kd">func</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">self</span><span class="o">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="n">sunColor</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<h4 id="on-and-off">On() and Off()</h4>
<p>You want the <code class="highlighter-rouge">backgroundColor</code> to change when the switch is pressed, so you’ll need to override the <code class="highlighter-rouge">on()</code> and <code class="highlighter-rouge">off()</code> functions.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7</pre></td><td class="code"><pre><span class="k">override</span> <span class="kd">func</span> <span class="nf">on</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">self</span><span class="o">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="n">moonColor</span>
<span class="p">}</span>

<span class="k">override</span> <span class="kd">func</span> <span class="nf">off</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">self</span><span class="o">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="n">sunColor</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<h4 id="place-small-stars">Place Small Stars</h4>
<p>All that’s left for this class is to create some functions to place all the stars. Below your two other class variables add this:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="k">var</span> <span class="nv">stars</span> <span class="o">=</span> <span class="p">[</span><span class="kt">Image</span><span class="p">]()</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Then add the following function, which will place all of the small stars and add them to your star’s array.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="kd">func</span> <span class="nf">placeSmallStars</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">centers</span> <span class="o">=</span> <span class="p">[</span><span class="kt">Point</span><span class="p">(</span><span class="mf">21.0</span><span class="p">,</span><span class="mf">5.75</span><span class="p">),</span> <span class="kt">Point</span><span class="p">(</span><span class="mf">6.5</span><span class="p">,</span><span class="mf">10.25</span><span class="p">),</span> <span class="kt">Point</span><span class="p">(</span><span class="mf">20.5</span><span class="p">,</span><span class="mf">20.75</span><span class="p">),</span> <span class="kt">Point</span><span class="p">(</span><span class="mf">17.0</span><span class="p">,</span><span class="mf">26.5</span><span class="p">),</span> <span class="kt">Point</span><span class="p">(</span><span class="mf">18.0</span><span class="p">,</span><span class="mf">13.0</span><span class="p">),</span> <span class="kt">Point</span><span class="p">(</span><span class="mf">17.0</span><span class="p">,</span><span class="mf">7.75</span><span class="p">)]</span>
    <span class="k">for</span> <span class="n">point</span> <span class="k">in</span> <span class="n">centers</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">smallStar</span> <span class="o">=</span> <span class="kt">Image</span><span class="p">(</span><span class="s">"StarSmall"</span><span class="p">)</span><span class="o">!</span>
        <span class="n">smallStar</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">point</span>
        <span class="n">stars</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="n">smallStar</span><span class="p">)</span>
        <span class="k">self</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">smallStar</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<h4 id="place-large-stars">Place Large Stars</h4>

<p>Just like the small stars, you’ll need a function to add all of the large stars.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9</pre></td><td class="code"><pre><span class="kd">func</span> <span class="nf">placeLargeStars</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">centers</span> <span class="o">=</span> <span class="p">[</span><span class="kt">Point</span><span class="p">(</span><span class="mf">9.5</span><span class="p">,</span> <span class="mf">18.5</span><span class="p">),</span> <span class="kt">Point</span><span class="p">(</span><span class="mf">12.0</span><span class="p">,</span> <span class="mf">13.0</span><span class="p">),</span> <span class="kt">Point</span><span class="p">(</span><span class="mf">17.0</span><span class="p">,</span> <span class="mf">27.25</span><span class="p">)]</span>
    <span class="k">for</span> <span class="n">point</span> <span class="k">in</span> <span class="n">centers</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">largeStar</span> <span class="o">=</span> <span class="kt">Image</span><span class="p">(</span><span class="s">"StarLarge"</span><span class="p">)</span><span class="o">!</span>
        <span class="n">largeStar</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">point</span>
        <span class="n">stars</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="n">largeStar</span><span class="p">)</span>
        <span class="k">self</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">largeStar</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<blockquote>
  <p>Remember to call both of these methods from <code class="highlighter-rouge">setup()</code></p>
</blockquote>

<h3 id="create-moonthumb">Create MoonThumb</h3>
<p>Customizing the thumbnail is a lot like the last section.</p>

<p>Create a new file called <code class="highlighter-rouge">MoonThumb.swift</code> and add the following code:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18</pre></td><td class="code"><pre><span class="kd">import</span> <span class="kt">UIKit</span>
<span class="kd">class</span> <span class="kt">MoonThumb</span><span class="p">:</span> <span class="kt">SwitchThumb</span> <span class="p">{</span>

    <span class="k">var</span> <span class="nv">moonTexture</span> <span class="o">=</span> <span class="kt">Image</span><span class="p">(</span><span class="s">"MoonTexture"</span><span class="p">)</span>
    <span class="k">var</span> <span class="nv">outerGlow</span> <span class="o">=</span> <span class="kt">Image</span><span class="p">(</span><span class="s">"OuterGlow"</span><span class="p">)</span>
    <span class="k">var</span> <span class="nv">sunColor</span> <span class="o">=</span> <span class="kt">Color</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="mi">255</span><span class="p">,</span> <span class="nv">green</span><span class="p">:</span> <span class="mi">238</span><span class="p">,</span> <span class="nv">blue</span><span class="p">:</span> <span class="mi">90</span><span class="p">,</span> <span class="nv">alpha</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="k">var</span> <span class="nv">moonColor</span> <span class="o">=</span> <span class="kt">Color</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="mi">251</span><span class="p">,</span> <span class="nv">green</span><span class="p">:</span> <span class="mi">246</span><span class="p">,</span> <span class="nv">blue</span><span class="p">:</span> <span class="mi">217</span><span class="p">,</span> <span class="nv">alpha</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span>

    <span class="k">override</span> <span class="kd">func</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">lineWidth</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">fillColor</span> <span class="o">=</span> <span class="n">sunColor</span>
        <span class="k">self</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">moonTexture</span><span class="p">)</span>

        <span class="n">outerGlow</span><span class="p">?</span><span class="o">.</span><span class="n">constrainsProportions</span> <span class="o">=</span> <span class="kc">true</span>
        <span class="n">outerGlow</span><span class="p">?</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">center</span>
        <span class="k">self</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">outerGlow</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>This snippet sets up the basic elements for the <code class="highlighter-rouge">MoonThumb</code> class. It does the following:</p>

<ul>
  <li>creates a moon texture</li>
  <li>creates an outer glow texture</li>
  <li>creates the colors for moon and sun</li>
  <li>styles the thumbnail to appear as the sun</li>
  <li>adds and positions the textures</li>
</ul>

<blockquote>
  <p>Since the assets for the thumbnail are already the proper size, we don’t neet to change their widths or frames.</p>
</blockquote>

<h4 id="on-and-off-1">On() and Off()</h4>
<p>Override the <code class="highlighter-rouge">on()</code> and <code class="highlighter-rouge">off()</code> super class functions so they look like this:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13</pre></td><td class="code"><pre><span class="k">override</span> <span class="kd">func</span> <span class="nf">on</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">fillColor</span> <span class="o">=</span> <span class="n">moonColor</span>
    <span class="n">moonTexture</span><span class="p">?</span><span class="o">.</span><span class="n">opacity</span> <span class="o">=</span> <span class="mf">0.66</span>
    <span class="n">moonTexture</span><span class="p">?</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="nf">rotate</span><span class="p">(</span><span class="o">-</span><span class="kt">M_PI_4</span><span class="p">)</span>
    <span class="n">outerGlow</span><span class="p">?</span><span class="o">.</span><span class="n">opacity</span> <span class="o">=</span> <span class="mf">1.0</span>
<span class="p">}</span>

<span class="k">override</span> <span class="kd">func</span> <span class="nf">off</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">fillColor</span> <span class="o">=</span> <span class="n">sunColor</span>
    <span class="n">moonTexture</span><span class="p">?</span><span class="o">.</span><span class="n">opacity</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="n">moonTexture</span><span class="p">?</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="nf">rotate</span><span class="p">(</span><span class="kt">M_PI_4</span><span class="p">)</span>
    <span class="n">outerGlow</span><span class="p">?</span><span class="o">.</span><span class="n">opacity</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<blockquote>
  <p>When triggering the switch, we want to see the moon “roll” into position. This is why we toggle its rotation between <code class="highlighter-rouge">-M_PI_4</code> and <code class="highlighter-rouge">M_PI_4</code>.</p>
</blockquote>

<h3 id="create-moonswitch">Create MoonSwitch</h3>
<p>In order to get your switch to use your newly made components you’ll need to subclass <code class="highlighter-rouge">Switch</code>.</p>

<p>Create a new file and call it <code class="highlighter-rouge">MoonSwitch.swift</code> and add the following code:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10</pre></td><td class="code"><pre><span class="kd">class</span> <span class="kt">MoonSwitch</span><span class="p">:</span> <span class="kt">Switch</span> <span class="p">{</span>

    <span class="k">override</span> <span class="kd">func</span> <span class="nf">awakeFromNib</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">self</span><span class="o">.</span><span class="n">thumb</span> <span class="o">=</span> <span class="kt">MoonThumb</span><span class="p">()</span>
        <span class="k">self</span><span class="o">.</span><span class="n">background</span> <span class="o">=</span> <span class="kt">MoonBackground</span><span class="p">()</span>
        <span class="nf">replaceViews</span><span class="p">()</span>
        <span class="nf">setup</span><span class="p">()</span>
        <span class="nf">toggle</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<h3 id="workspace-detour">WorkSpace detour</h3>

<p>At this point, you should be able to see you new switch when your app runs if you go back to your project’s <code class="highlighter-rouge">WorkSpace</code> and change it to this:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21</pre></td><td class="code"><pre><span class="kd">import</span> <span class="kt">UIKit</span>

<span class="kd">class</span> <span class="kt">WorkSpace</span><span class="p">:</span> <span class="kt">CanvasController</span> <span class="p">{</span>
    <span class="k">var</span> <span class="nv">dayColor</span> <span class="o">=</span> <span class="kt">Color</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="mi">122</span><span class="p">,</span> <span class="nv">green</span><span class="p">:</span> <span class="mi">232</span><span class="p">,</span> <span class="nv">blue</span><span class="p">:</span> <span class="mi">252</span><span class="p">,</span> <span class="nv">alpha</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="k">var</span> <span class="nv">nightColor</span> <span class="o">=</span> <span class="kt">Color</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="mi">12</span><span class="p">,</span> <span class="nv">green</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="nv">blue</span><span class="p">:</span> <span class="mi">50</span><span class="p">,</span> <span class="nv">alpha</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="k">var</span> <span class="nv">myswitch</span><span class="p">:</span> <span class="kt">MoonSwitch</span><span class="o">!</span>

    <span class="k">override</span> <span class="kd">func</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">myswitch</span> <span class="o">=</span> <span class="kt">MoonSwitch</span><span class="p">(</span><span class="nv">thumb</span><span class="p">:</span> <span class="kt">MoonThumb</span><span class="p">(),</span> <span class="nv">background</span><span class="p">:</span> <span class="kt">MoonBackground</span><span class="p">())</span>
        <span class="n">canvas</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">myswitch</span><span class="p">)</span>
        <span class="n">myswitch</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">canvas</span><span class="o">.</span><span class="n">view</span><span class="o">.</span><span class="n">center</span>
        <span class="n">myswitch</span><span class="o">.</span><span class="nf">addTarget</span><span class="p">(</span><span class="k">self</span><span class="p">,</span> <span class="nv">action</span><span class="p">:</span> <span class="s">"toggle"</span><span class="p">,</span> <span class="nv">forControlEvents</span><span class="p">:</span> <span class="kt">UIControlEvents</span><span class="o">.</span><span class="kt">ValueChanged</span><span class="p">)</span>
        <span class="nf">toggle</span><span class="p">()</span>
    <span class="p">}</span>

    <span class="kd">func</span> <span class="nf">toggle</span><span class="p">()</span> <span class="p">{</span>
        <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">myswitch</span><span class="o">.</span><span class="n">on</span> <span class="o">==</span> <span class="kc">true</span> <span class="p">?</span> <span class="k">self</span><span class="o">.</span><span class="nv">nightColor</span> <span class="p">:</span> <span class="k">self</span><span class="o">.</span><span class="n">dayColor</span>
            <span class="p">}</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>A couple things you should notice here:</p>

<ul>
  <li>The <code class="highlighter-rouge">myswitch.addTarget(...)</code> is the line of code that syncs up the <code class="highlighter-rouge">UISwitch</code> action with the toggle method. Attaching this action here doesn’t preclude you from attaching more actions in Interface Builder.</li>
  <li>The <code class="highlighter-rouge">self.myswitch.on == true ? self.nightColor : self.dayColor</code> is a simple technique for using a ternary conditional <code class="highlighter-rouge">?</code> to switch between different colors.</li>
</ul>

<p><img src="" alt="" data-id="ConsciousKeyGalago" class="gfyitem" /></p>

<h3 id="back-in-moonswitch">Back in MoonSwitch</h3>
<p>At this point, the only thing missing from your switch is the clouds. Let’s get them in there! Add the following class variables:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="k">var</span> <span class="nv">clouds</span> <span class="o">=</span> <span class="p">[</span><span class="kt">Image</span><span class="p">]()</span>
<span class="k">let</span> <span class="nv">cloudOpacities</span> <span class="o">=</span> <span class="p">[[</span><span class="mf">0.83</span><span class="p">,</span><span class="mf">0.15</span><span class="p">],[</span><span class="mf">0.58</span><span class="p">,</span><span class="mf">0.28</span><span class="p">],[</span><span class="mf">0.52</span><span class="p">,</span><span class="mf">0.07</span><span class="p">]]</span>
<span class="k">let</span> <span class="nv">cloudTargets</span> <span class="o">=</span> <span class="p">[[</span><span class="kt">Point</span><span class="p">(</span><span class="mf">17.0</span><span class="p">,</span> <span class="mf">28.5</span><span class="p">),</span><span class="kt">Point</span><span class="p">(</span><span class="mf">27.0</span><span class="p">,</span> <span class="mf">28.5</span><span class="p">)],[</span><span class="kt">Point</span><span class="p">(</span><span class="mf">15.775</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">),</span><span class="kt">Point</span><span class="p">(</span><span class="mf">21.0</span><span class="p">,</span> <span class="mf">9.0</span><span class="p">)],[</span><span class="kt">Point</span><span class="p">(</span><span class="mf">43.5</span><span class="p">,</span> <span class="mf">20.5</span><span class="p">),</span><span class="kt">Point</span><span class="p">(</span><span class="mf">5.0</span><span class="p">,</span> <span class="mf">20.5</span><span class="p">)]]</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Now override the superclass function <code class="highlighter-rouge">setup()</code> and in this function initialize a view to add your clouds to and a shape to use as a mask. With a for loop you can create the clouds and add them to the view you just made.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23</pre></td><td class="code"><pre><span class="k">override</span> <span class="kd">func</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">cloudsView</span> <span class="o">=</span> <span class="kt">View</span><span class="p">(</span><span class="nv">frame</span><span class="p">:</span> <span class="kt">Rect</span><span class="p">(</span><span class="k">self</span><span class="o">.</span><span class="n">bounds</span><span class="p">))</span>
    <span class="n">cloudsView</span><span class="o">.</span><span class="n">interactionEnabled</span> <span class="o">=</span> <span class="kc">false</span>

    <span class="k">let</span> <span class="nv">mask</span> <span class="o">=</span> <span class="kt">Rectangle</span><span class="p">(</span><span class="nv">frame</span><span class="p">:</span> <span class="kt">Rect</span><span class="p">(</span><span class="k">self</span><span class="o">.</span><span class="n">bounds</span><span class="p">))</span>
    <span class="n">mask</span><span class="o">.</span><span class="n">lineWidth</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="n">mask</span><span class="o">.</span><span class="n">corner</span> <span class="o">=</span> <span class="kt">Size</span><span class="p">(</span><span class="n">mask</span><span class="o">.</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span><span class="n">mask</span><span class="o">.</span><span class="n">height</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
    <span class="n">cloudsView</span><span class="o">.</span><span class="n">mask</span> <span class="o">=</span> <span class="n">mask</span>

    <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">0</span><span class="o">...</span><span class="mi">2</span> <span class="p">{</span>
        <span class="k">let</span> <span class="nv">image</span> <span class="o">=</span> <span class="kt">Image</span><span class="p">(</span><span class="s">"Cloud</span><span class="se">\(</span><span class="n">i</span><span class="se">)</span><span class="s">"</span><span class="p">)</span><span class="o">!</span>
        <span class="n">image</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="n">cloudTargets</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="kt">Int</span><span class="p">(</span><span class="n">on</span><span class="p">)]</span>
        <span class="n">image</span><span class="o">.</span><span class="n">opacity</span> <span class="o">=</span> <span class="n">cloudOpacities</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="kt">Int</span><span class="p">(</span><span class="n">on</span><span class="p">)]</span>
        <span class="n">clouds</span><span class="o">.</span><span class="nf">append</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
        <span class="n">cloudsView</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">image</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="n">clouds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="nf">scale</span><span class="p">(</span><span class="mf">0.5</span><span class="p">,</span><span class="mf">0.5</span><span class="p">)</span>
    <span class="k">self</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">cloudsView</span><span class="p">)</span>
    
    <span class="n">thumb</span><span class="p">?</span><span class="o">.</span><span class="nf">toggle</span><span class="p">(</span><span class="n">on</span><span class="p">)</span>
    <span class="n">background</span><span class="p">?</span><span class="o">.</span><span class="nf">toggle</span><span class="p">(</span><span class="n">on</span><span class="p">)</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>We want the clouds to be masked, but have the glow of the moon bleed over the edge of the switch. To get both effects it’s best to contain the clouds to their own view. This is why we add them to a view and then mask that view.</p>

<h4 id="override-toggle">Override toggle()</h4>
<p>In <code class="highlighter-rouge">setup()</code> set your thumb and background toggle to on; and while you’re at it, override toggle on this class.</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre></td><td class="code"><pre><span class="k">override</span> <span class="kd">func</span> <span class="nf">toggle</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">super</span><span class="o">.</span><span class="nf">toggle</span><span class="p">()</span>
    <span class="k">let</span> <span class="nv">a</span> <span class="o">=</span> <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">for</span> <span class="n">i</span> <span class="k">in</span> <span class="mi">0</span><span class="o">..&lt;</span><span class="k">self</span><span class="o">.</span><span class="n">clouds</span><span class="o">.</span><span class="n">count</span> <span class="p">{</span>
            <span class="k">self</span><span class="o">.</span><span class="n">clouds</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">opacity</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">cloudOpacities</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="kt">Int</span><span class="p">(</span><span class="k">self</span><span class="o">.</span><span class="n">on</span><span class="p">)]</span>
            <span class="k">self</span><span class="o">.</span><span class="n">clouds</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">cloudTargets</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="kt">Int</span><span class="p">(</span><span class="k">self</span><span class="o">.</span><span class="n">on</span><span class="p">)]</span>
        <span class="p">}</span>

        <span class="k">let</span> <span class="nv">scale</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">on</span> <span class="o">==</span> <span class="kc">true</span> <span class="p">?</span> <span class="mf">2.0</span> <span class="p">:</span> <span class="mf">0.5</span>
        <span class="k">self</span><span class="o">.</span><span class="n">clouds</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">transform</span><span class="o">.</span><span class="nf">scale</span><span class="p">(</span><span class="n">scale</span><span class="p">,</span><span class="n">scale</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">a</span><span class="o">.</span><span class="n">curve</span> <span class="o">=</span> <span class="o">.</span><span class="kt">EaseOut</span>
    <span class="n">a</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Now, whenever your switch is pressed you should see your clouds move and change opacities.</p>

<blockquote>
  <p>The <code class="highlighter-rouge">cloudOpacities</code> and <code class="highlighter-rouge">cloudTargets</code> arrays each have three elements(for each cloud) and each element is an array of two elements(for each state). The toggle state boolean is converted to an integer, <code class="highlighter-rouge">Int(self.on)</code>, so that it can be is used to ensure the correct state is accessed.</p>
</blockquote>

<p><img src="" alt="" data-id="ConfusedHideousHoneybee" class="gfyitem" /></p>

<h2 id="thats-it">That’s It.</h2>
<p>You’ve just added your own personalized touch to an actual <code class="highlighter-rouge">UISwitch</code> object. Though it looks different, it acts just the same as its native counterpart. The best part is that you can drop this object right into any other iOS app, and even work with it from Interface Builder.</p>

<h3 id="code">Code</h3>
<p>You can grab a copy of the code for this project from <a href="https://gist.github.com/C4Framework/cde73e54709a5a1f62ec">HERE</a></p>

<h2 id="switching-off">Switching Off</h2>
<p>That’s it! Try switching out the images and colors we used in this tutorial to create your own custom <code class="highlighter-rouge">UISwitch</code>. Just subclass the components of <code class="highlighter-rouge">Switch</code>, add your own style and initialize.</p>

<h3 id="code-1">Code</h3>
<p>To see the final version of this example</p>

        </div>
      </div>
    </div>

    <div class="container">
      <div class="row related-tutorial">
        <div class="col-xs-12 col-md-12">
          <h1 class="text-center blue">Nice Work! Explore More Tutorials?</h1>
          <ul class="examples-list list-unstyled">
            
            
              <li>
                <a href="/tutorials/slack-logo/">
                  <div>
                    <span class="img">
                      <img src="/images/tutorials/slack-logo/poster.png" />
                    </span>
                    <div class="text">
                      <p><span>Slack Logo</span><br />Animating the Slack Logo.</p>
                    </div>                    
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/tutorials/customizing-switch/">
                  <div>
                    <span class="img">
                      <img src="/images/tutorials/customizing-switch/poster.png" />
                    </span>
                    <div class="text">
                      <p><span>Customizing A Switch</span><br />We've already hacked UISwitch, now let's add animations!</p>
                    </div>                    
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/tutorials/skype/">
                  <div>
                    <span class="img">
                      <img src="/images/tutorials/skype/poster.png" />
                    </span>
                    <div class="text">
                      <p><span>Skype Loader</span><br />A View within a View within a View.</p>
                    </div>                    
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/tutorials/checkmark/">
                  <div>
                    <span class="img">
                      <img src="/images/tutorials/checkmark/poster.png" />
                    </span>
                    <div class="text">
                      <p><span>Checkmark</span><br />An sweetly timed animation.</p>
                    </div>                    
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/tutorials/hacking-uiswitch/">
                  <div>
                    <span class="img">
                      <img src="/images/tutorials/hacking-uiswitch/poster.png" />
                    </span>
                    <div class="text">
                      <p><span>Hacking UISwitch</span><br />How to hack a UIKit component.</p>
                    </div>                    
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/tutorials/processing/">
                  <div>
                    <span class="img">
                      <img src="/images/tutorials/processing/poster.png" />
                    </span>
                    <div class="text">
                      <p><span>Processing Examples</span><br />A brief comparison of Processing and C4.</p>
                    </div>                    
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/tutorials/basics/">
                  <div>
                    <span class="img">
                      <img src="/images/tutorials/basics/poster.png" />
                    </span>
                    <div class="text">
                      <p><span>Basics</span><br />An intro to C4's basic objects and features.</p>
                    </div>                    
                  </div>
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-md-3 col-sm-3 col-xs-6">
        <ul class="list-unstyled">
          <li class="title"><a href="/#overview">About</a></li>
          <li><a href="/#overview">Features</a></li>
          <!-- <li><a href="/about#history">History</a></li> -->
          <!-- <li><a href="/about/contributors">Contributors</a></li> -->
        </ul>
      </div>
      <div class="col-md-3 col-sm-3 col-xs-6">
        <ul class="list-unstyled">
          <li class="title"><a href="/learn">Learn + Explore</a></li>
          <li><a href="/install">Install C4</a></li>
          <li><a href="/examples">Examples</a></li>
          <li><a href="/tutorials">Tutorials</a></li>
          <li><a href="http://cocoadocs.org/docsets/C4/1.1.0/">Docs</a></li>
        </ul>
      </div>
      <div class="col-md-3 col-sm-3 col-xs-6">
        <ul class="list-unstyled">
          <li class="title"><a href="/contact">Connect</a></li>
          <li><a href="http://discourse.c4ios.com">Forums</a></li>
          <li><a href="http://www.medium.com/@c4framework" target="_blank">Medium</a></li>
          <li><a href="http://www.twitter.com/c4framework" target="_blank">Twitter</a></li>
          <li><a href="https://join-c4.herokuapp.com/" target="_blank">Slack</a></li>
          <li><a href="https://vimeo.com/c4ios" target="_blank">Vimeo</a></li>
          <li><a href="http://github.com/c4framework" target="_blank">GitHub</a></li>
        </ul>
      </div>
      <div class="col-md-3 col-sm-3 col-xs-6">
        <ul class="list-unstyled">
          <!-- <li class="title"><a href="/about">Sign Up for Newsletter</a></li>
          <li><input type="text" placeholder="Enter Email + Press Enter"></li> -->
          <li>© 2016 C4</li>
          <li><a href="/terms">Terms of Use</a></li>
          <li><a href="mailto:info@c4ios.com">Contact</a></li>
        </ul>    
      </div>
    </div>
  </div>
</footer>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-18444113-4', 'auto');
  ga('send', 'pageview');
</script>


    <script type="text/javascript" src="/js/toc.js"></script>
    <script>
     (function(d, t) {
        var g = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        g.src = 'http://assets.gfycat.com/js/gfyajax-0.517d.js';
        s.parentNode.insertBefore(g, s);
      }(document, 'script'));
    </script>
    <script type="text/javascript">
      $(document).ready(function() {
        $('#toc').width($('#toc').parents().width());

        $('#toc').toc({
          elementClass: 'toc',
          ulClass: 'nav',
          heading: 'Contents',
          indexingFormats: 'number',
          selector: 'h2:not(.toc-omit), h3:not(.toc-omit), h4:not(.toc-omit)'
        });

        $('body').scrollspy({
          target: '#toc',
          offset: $('#headerNav').outerHeight(true)
        });

        setTimeout(function() {
          var $sideBar = $('#toc');
          $sideBar.affix({
            offset: {
              top: function() {
                var offsetTop = $sideBar.offset().top,
                sideBarMargin  = parseInt($sideBar.children(0).css('margin-top'), 10),
                navOuterHeight = $('#headerNav').height();
                return (this.top = offsetTop - navOuterHeight - sideBarMargin);
              },
              bottom: function() {
                return (this.bottom = $('footer').outerHeight(true) + $('.chapter-nav').outerHeight(true) + $('.related-tutorial').outerHeight(true) + 500);
              }
            }
          });
        }, 100);

        $('td.gutter').each(function(index)
        {
          $(this).parents('.language-swift').closest('pre').addClass('has-gutter');
        });

        $('.tutorial img').each(function()
        {
          var img = $(this).attr('src');
          $(this).attr('src', '/images/tutorials/customizing-switch/' + img + '').addClass('img-responsive');
        });

        $('.tutorial p img').unwrap().wrap('<figure></figure>').after(function() {
            return '<figcaption>'+this.alt+'</figcaption>';
        });

        $('.footnotes').prepend('<h4>Footnotes</h4>');
      });
    </script>
  </body>
</html>