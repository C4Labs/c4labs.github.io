<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
	

  <title>Info Panel</title>
  <meta name="description" content="Compared to what we just went through, this chapter is going to be simple. Since we didn’t want to put a ton of effort into explaining COSMOS in the app, and...">
  <meta property="og:image" content="http://www.c4ios.com/images/banner.jpg">
  <meta property="og:url"   content="http://c4ios.com" />
  <meta property="og:title" content="Info Panel"/>
  <meta name="og:description" content="Compared to what we just went through, this chapter is going to be simple. Since we didn’t want to put a ton of effort into explaining COSMOS in the app, and...">
  <meta property="og:type"  content="website"/>
  <meta property="og:site_name"  content="C4"/>

  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:site" content="@c4framework">
  <meta name="twitter:creator" content="@c4framework">
  <meta name="twitter:title" content="Info Panel">
  <meta name="twitter:description" content="Compared to what we just went through, this chapter is going to be simple. Since we didn’t want to put a ton of effort into explaining COSMOS in the app, and...">
  <meta name="twitter:image" content="http://www.c4ios.com/images/banner.jpg">


  <link rel="stylesheet" type="text/css" href="/css/style.css" >
  <link rel="stylesheet" href="/css/syntax.css">
  <link href='https://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>

  <link rel="canonical" href="www.c4ios.com/cosmos/22-Info-Panel">
  <link rel="alternate" type="application/rss+xml" title="C4 website" href="www.c4ios.com/feed.xml">
</head>

    <body class="info-panel" data-spy="scroll" data-target="#toc">

    <header>
  <nav class="navbar navbar-default" role="navigation"> 
    <div class="navbar-header container">
      <div class="row"> 
        <div class="col-xs-12 col-sm-12 col-md-12 navlist">
          <a class="navbar-brand" href="/">
            <span><img src="/images/c4logo.png"></span>
          </a>
          <ul class="nav navbar-nav navbar-left">
            <li><a href="/install" >Install</a></li>
            <li><a href="/tutorials" >Tutorials</a></li>
            <li><a href="/cosmos" class='active'>COSMOS</a></li>
          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li><a href="/examples" >Examples</a></li>
            <li><a href="http://discourse.c4ios.com">Forums</a></li>
            <li><a href="http://cocoadocs.org/docsets/C4/1.1.0/">Documentation</a></li>
          </ul>
        </div>
      </div>  
    </div>        
  </nav>      
</header>

    <div class="container content info-panel" >
      <div class="row">
        <div class="col-xs-12 col-sm-12 col-md-12 breadcrumb">
          <h1><a href="/tutorials">Tutorials</a><div class="bread-caret">></div><a href="/cosmos">COSMOS</a><div class="bread-caret">></div>Info Panel</h1>
        </div>
      </div>

      <div class="row">
        <div class="col-xs-3 col-sm-3 col-md-3">
          <span class="img large">
            <img src="/images/cosmos/1/poster.png" />
          </span>
          <p class="title">Chapter 22<br /><span class="lighter">Info Panel</span></p>
          <p>Tags<br /><a href="/tag/getting started">getting started</a>, <a href="/tag/basics">basics</a>, <a href="/tag/introduction">introduction</a>, <a href="/tag/easy">easy</a>, <a href="/tag/c4">c4</a>, </p>
          <p>Estimated Time<br /><span class="lighter"></span></p>

          <hr />

          <div id="toc"></div>
        </div>

        <div class="col-xs-9 col-sm-9 col-md-9 tutorial">
          <p>Compared to what we just went through, this chapter is going to be simple. Since we didn’t want to put a ton of effort into explaining COSMOS in the app, and because we were going to write this long tutorial, we thought it would be best to just link back to where one could find all the info they need.</p>

<p>The info panel is a single-view popup with some text and an external link that points back to C4’s main site. We’re basically going to code the panel by following the design from top to bottom.</p>

<p>This is the goal:</p>

<p><img src="01.png" alt="" /></p>

<p>Head over to your InfoPanel.swift file in your project and let’s get started.</p>

<h2 id="canvas">Canvas</h2>

<p>We set up the canvas by changing its background color:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3</pre></td><td class="code"><pre><span class="kd">public</span> <span class="k">override</span> <span class="kd">func</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">canvas</span><span class="o">.</span><span class="n">backgroundColor</span> <span class="o">=</span> <span class="kt">Color</span><span class="p">(</span><span class="nv">red</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">green</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">blue</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="nv">alpha</span><span class="p">:</span> <span class="mf">0.33</span><span class="p">)</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<h2 id="logo">Logo</h2>

<p>Create the following method:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6</pre></td><td class="code"><pre><span class="kd">func</span> <span class="nf">createLogo</span><span class="p">()</span> <span class="p">{</span>
    <span class="c1">//creates an image and positions it before adding it to the screen</span>
    <span class="k">let</span> <span class="nv">logo</span> <span class="o">=</span> <span class="kt">Image</span><span class="p">(</span><span class="s">"logo"</span><span class="p">)</span><span class="o">!</span>
    <span class="n">logo</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="kt">Point</span><span class="p">(</span><span class="n">canvas</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">canvas</span><span class="o">.</span><span class="n">height</span><span class="o">/</span><span class="mf">6.0</span><span class="p">)</span>
    <span class="n">canvas</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">logo</span><span class="p">)</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Then call that method at the end of <code class="highlighter-rouge">setup()</code></p>

<p>Modify your project’s <code class="highlighter-rouge">WorkSpace</code> to look like this:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre><span class="kd">class</span> <span class="kt">WorkSpace</span><span class="p">:</span> <span class="kt">CanvasController</span> <span class="p">{</span>
    <span class="k">override</span> <span class="kd">func</span> <span class="nf">setup</span><span class="p">()</span> <span class="p">{</span>
        <span class="n">canvas</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="kt">InfoPanel</span><span class="p">()</span><span class="o">.</span><span class="n">canvas</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Check it out:</p>

<p><img src="02.png" alt="" /></p>

<p>Pretty simple. A basic black overlay to darken whatever is behind the panel, and a logo floating in the top-center of the screen.</p>

<h2 id="text">Text</h2>

<p>Next, create a method to set up the text label:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14</pre></td><td class="code"><pre><span class="kd">func</span> <span class="nf">createLabel</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">message</span> <span class="o">=</span> <span class="s">"COSMOS is a lovingly</span><span class="se">\n</span><span class="s">built app created</span><span class="se">\n</span><span class="s">by the C4 team.</span><span class="se">\n\n\n</span><span class="s">We hope you enjoy</span><span class="se">\n</span><span class="s">cruising the COSMOS.</span><span class="se">\n\n\n</span><span class="s">You can learn how</span><span class="se">\n</span><span class="s">to build this app</span><span class="se">\n</span><span class="s"> on our site at:"</span>

    <span class="k">let</span> <span class="nv">text</span> <span class="o">=</span> <span class="kt">UILabel</span><span class="p">()</span>
    <span class="n">text</span><span class="o">.</span><span class="n">font</span> <span class="o">=</span> <span class="kt">UIFont</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="s">"Menlo-Regular"</span><span class="p">,</span> <span class="nv">size</span><span class="p">:</span> <span class="mi">18</span><span class="p">)</span>
    <span class="n">text</span><span class="o">.</span><span class="n">numberOfLines</span> <span class="o">=</span> <span class="mi">40</span>
    <span class="n">text</span><span class="o">.</span><span class="n">text</span> <span class="o">=</span> <span class="n">message</span>
    <span class="n">text</span><span class="o">.</span><span class="n">textColor</span> <span class="o">=</span> <span class="o">.</span><span class="nf">whiteColor</span><span class="p">()</span>
    <span class="n">text</span><span class="o">.</span><span class="n">textAlignment</span> <span class="o">=</span> <span class="o">.</span><span class="kt">Center</span>
    <span class="n">text</span><span class="o">.</span><span class="nf">sizeToFit</span><span class="p">()</span>
    <span class="n">text</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="kt">CGPoint</span><span class="p">(</span><span class="n">canvas</span><span class="o">.</span><span class="n">center</span><span class="p">)</span>

    <span class="n">canvas</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>This method creates a <code class="highlighter-rouge">UILabel</code> because we’re going to have multiple lines of text that are center-aligned. It places the entire label in the center of the screen as well.</p>

<p>Call the method at the end of <code class="highlighter-rouge">setup()</code>, and run it:</p>

<p><img src="03.png" alt="" /></p>

<h2 id="link">Link</h2>

<p>Next, create a method that builds and styles a text shape that we’ll use as a link to the C4 site. But first, add the following class variable:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="k">var</span> <span class="nv">link</span> <span class="p">:</span> <span class="kt">TextShape</span><span class="p">?</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Then add this method:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre></td><td class="code"><pre><span class="kd">func</span> <span class="nf">createLink</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">text</span> <span class="o">=</span> <span class="kt">TextShape</span><span class="p">(</span><span class="nv">text</span><span class="p">:</span><span class="s">"http://www.c4ios.com/docs"</span><span class="p">,</span> <span class="nv">font</span><span class="p">:</span> <span class="kt">Font</span><span class="p">(</span><span class="nv">name</span><span class="p">:</span> <span class="s">"Menlo-Regular"</span><span class="p">,</span> <span class="nv">size</span><span class="p">:</span> <span class="mi">24</span><span class="p">))</span>
    <span class="n">text</span><span class="o">.</span><span class="n">fillColor</span> <span class="o">=</span> <span class="n">white</span>
    <span class="n">text</span><span class="o">.</span><span class="n">center</span> <span class="o">=</span> <span class="kt">Point</span><span class="p">(</span><span class="n">canvas</span><span class="o">.</span><span class="n">center</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">canvas</span><span class="o">.</span><span class="n">height</span> <span class="o">*</span> <span class="mf">5.0</span><span class="o">/</span><span class="mf">6.0</span><span class="p">)</span>

    <span class="k">let</span> <span class="nv">a</span> <span class="o">=</span> <span class="kt">Point</span><span class="p">(</span><span class="n">text</span><span class="o">.</span><span class="n">origin</span><span class="o">.</span><span class="n">x</span><span class="p">,</span><span class="n">text</span><span class="o">.</span><span class="n">frame</span><span class="o">.</span><span class="n">max</span><span class="o">.</span><span class="n">y</span><span class="o">+</span><span class="mi">8</span><span class="p">)</span>
    <span class="k">let</span> <span class="nv">b</span> <span class="o">=</span> <span class="kt">Point</span><span class="p">(</span><span class="n">a</span><span class="o">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">text</span><span class="o">.</span><span class="n">width</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">a</span><span class="o">.</span><span class="n">y</span><span class="p">)</span>

    <span class="k">let</span> <span class="nv">line</span> <span class="o">=</span> <span class="kt">Line</span><span class="p">((</span><span class="n">a</span><span class="p">,</span><span class="n">b</span><span class="p">))</span>
    <span class="n">line</span><span class="o">.</span><span class="n">lineWidth</span> <span class="o">=</span> <span class="mf">2.0</span>
    <span class="n">line</span><span class="o">.</span><span class="n">strokeColor</span> <span class="o">=</span> <span class="kt">C4Pink</span>

    <span class="n">link</span> <span class="o">=</span> <span class="n">text</span>
    <span class="n">canvas</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
    <span class="n">canvas</span><span class="o">.</span><span class="nf">add</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>… and call that from <code class="highlighter-rouge">setup()</code></p>

<p>This method creates a text shape and then grabs the bottom corners of the shape’s frame to position a pink link underneath the text. The frame (a <code class="highlighter-rouge">Rect</code>) has a nice little property called <code class="highlighter-rouge">max</code> which returns the bottom-right corner of the frame. This makes it easy to find out where the bottom (e.g. <code class="highlighter-rouge">y</code>) of the frame sits so we can add a line just a few points below that.</p>

<blockquote>
  <p>I add a +1 to the width of the line because it looks better</p>
</blockquote>

<p>Check it out:</p>

<p><img src="04.png" alt="" /></p>

<h2 id="gestures">Gestures</h2>

<p>Now that we’ve got everything laid out properly it’s time to add a bit of behaviour to the panel. There are two things we need to add:</p>

<ol>
  <li>Linking to the C4 site</li>
  <li>Closing the panel</li>
</ol>

<h3 id="link-gesture">Link Gesture</h3>

<p>We want the text label to act like a button, so we’re going to add a <code class="highlighter-rouge">longPress</code> gesture to it, which gives the functionality of being able to press and hold before releasing.</p>

<p>Here’s a basic setup for the gesture:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10</pre></td><td class="code"><pre><span class="kd">func</span> <span class="nf">linkGesture</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">press</span> <span class="o">=</span> <span class="n">link</span><span class="p">?</span><span class="o">.</span><span class="n">addLongPressGestureRecognizer</span> <span class="p">{</span> <span class="n">locations</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">state</span> <span class="k">in</span>
        <span class="k">switch</span> <span class="n">state</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="kt">Began</span><span class="p">:</span>
            <span class="k">self</span><span class="o">.</span><span class="n">link</span><span class="p">?</span><span class="o">.</span><span class="n">fillColor</span> <span class="o">=</span> <span class="kt">C4Pink</span>
        <span class="k">default</span><span class="p">:</span>
            <span class="k">self</span><span class="o">.</span><span class="n">link</span><span class="p">?</span><span class="o">.</span><span class="n">fillColor</span> <span class="o">=</span> <span class="n">white</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Add that to your class and test it. You’ll notice that after pressing and holding on the text shape it will turn pink. When you release it, it will go back to white. This is basically what we want, except for that delay in turning pink…</p>

<p>To get rid of the delay, add the following after <code class="highlighter-rouge">let press = link?.addLongPressGestureRecognizer{ ... }:</code></p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1</pre></td><td class="code"><pre><span class="n">press</span><span class="p">?</span><span class="o">.</span><span class="n">minimumPressDuration</span> <span class="o">=</span> <span class="mf">0.0</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>So, we can press the link and it changes. Great. Now we need to make it useful. First, let’s revisit how gesture work. There are 5 states to a gesture:</p>

<ol>
  <li><code class="highlighter-rouge">.Began</code></li>
  <li><code class="highlighter-rouge">.Changed</code></li>
  <li><code class="highlighter-rouge">.Ended</code></li>
  <li><code class="highlighter-rouge">.Cancelled</code></li>
  <li><code class="highlighter-rouge">.Failed</code></li>
</ol>

<p>For this gesture in particular we want to track when the starts and ends (or fails or cancels). And then we’ll execute the following logic:</p>

<ol>
  <li>When it starts: turn pink</li>
  <li>When it changes: stay pink</li>
  <li>When it ends: check if the user released the gesture over top of the link, if so then open the C4 site, otherwise they dragged the touch off of the link and intend not to open the C4 site</li>
</ol>

<p>To handle this logic, modify the gesture code to look like this:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16</pre></td><td class="code"><pre><span class="kd">func</span> <span class="nf">linkGesture</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">let</span> <span class="nv">press</span> <span class="o">=</span> <span class="n">link</span><span class="p">?</span><span class="o">.</span><span class="n">addLongPressGestureRecognizer</span> <span class="p">{</span> <span class="n">locations</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">state</span> <span class="k">in</span>
        <span class="k">switch</span> <span class="n">state</span> <span class="p">{</span>
        <span class="k">case</span> <span class="o">.</span><span class="kt">Began</span><span class="p">,</span> <span class="o">.</span><span class="kt">Changed</span><span class="p">:</span>
            <span class="k">self</span><span class="o">.</span><span class="n">link</span><span class="p">?</span><span class="o">.</span><span class="n">fillColor</span> <span class="o">=</span> <span class="kt">C4Pink</span>
        <span class="k">case</span> <span class="o">.</span><span class="kt">Ended</span><span class="p">:</span>
            <span class="k">if</span> <span class="k">let</span> <span class="nv">l</span> <span class="o">=</span> <span class="k">self</span><span class="o">.</span><span class="n">link</span> <span class="k">where</span> <span class="n">l</span><span class="o">.</span><span class="nf">hitTest</span><span class="p">(</span><span class="n">center</span><span class="p">)</span> <span class="p">{</span> 
                <span class="kt">UIApplication</span><span class="o">.</span><span class="nf">sharedApplication</span><span class="p">()</span><span class="o">.</span><span class="nf">openURL</span><span class="p">(</span><span class="kt">NSURL</span><span class="p">(</span><span class="nv">string</span><span class="p">:</span><span class="s">"http://http://www.c4ios.com/cosmos/"</span><span class="p">)</span><span class="o">!</span><span class="p">)</span>
            <span class="p">}</span>
            <span class="k">fallthrough</span>
        <span class="k">default</span><span class="p">:</span>
            <span class="k">self</span><span class="o">.</span><span class="n">link</span><span class="p">?</span><span class="o">.</span><span class="n">fillColor</span> <span class="o">=</span> <span class="n">white</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">press</span><span class="p">?</span><span class="o">.</span><span class="n">minimumPressDuration</span> <span class="o">=</span> <span class="mf">0.0</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Here are some notes on what’s happening:</p>

<ol>
  <li>The case <code class="highlighter-rouge">.Began</code>, <code class="highlighter-rouge">.Changed</code>: satisfies points 1 and 2 in the previous list</li>
  <li>The <code class="highlighter-rouge">if let l = self.link where l.hitTest(center)</code> unwraps the link object and tests to see if the gesture has ended while the touch was still in the bounds of the link.</li>
  <li>If the touch ended over top of the link, then the application opens the C4 site by calling <code class="highlighter-rouge">.openURL()</code></li>
  <li>The <code class="highlighter-rouge">fallthrough</code> allows us to include the final default state in the <code class="highlighter-rouge">.Ended</code> case.</li>
  <li>The default state changes the link’s color back to white. So, if the gesture ends, fails or gets cancelled by the os then the link turns white again.</li>
</ol>

<p>Now, call <code class="highlighter-rouge">linkGesture()</code> from setup and we can move on to the last step.</p>

<h3 id="hide-gesture">Hide Gesture</h3>

<p>We want the info panel to disappear when we tap on it anywhere outside of the link. To do this we’ll create an animation and a gesture:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre><span class="kd">func</span> <span class="nf">hideGesture</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">canvas</span><span class="o">.</span><span class="n">addTapGestureRecognizer</span> <span class="p">{</span> <span class="n">locations</span><span class="p">,</span> <span class="n">center</span><span class="p">,</span> <span class="n">state</span> <span class="k">in</span>
        <span class="k">self</span><span class="o">.</span><span class="nf">hide</span><span class="p">()</span>
    <span class="p">}</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre><span class="kd">func</span> <span class="nf">hide</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">)</span> <span class="p">{</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Void</span> <span class="k">in</span>
        <span class="k">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">opacity</span> <span class="o">=</span> <span class="mf">0.0</span>
    <span class="p">}</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Straightforward. Call <code class="highlighter-rouge">hideGesture()</code> from <code class="highlighter-rouge">setup()</code> and you’re basically done.</p>

<p>Run it, and test the two gestures.</p>

<p><img src="" alt="" data-id="EasygoingAggressiveBergerpicard" class="gfyitem" /></p>

<h3 id="reveal">Reveal</h3>

<p>We also need a method for revealing the canvas, which we’ll use in the next chapter.</p>

<p>Add the following to your class:</p>

<figure class="highlight"><pre><code class="language-swift" data-lang="swift"><table style="border-spacing: 0"><tbody><tr><td class="gutter gl" style="text-align: right"><pre class="lineno">1
2
3
4
5</pre></td><td class="code"><pre><span class="kd">func</span> <span class="nf">show</span><span class="p">()</span> <span class="p">{</span>
    <span class="kt">ViewAnimation</span><span class="p">(</span><span class="nv">duration</span><span class="p">:</span> <span class="mf">0.25</span><span class="p">)</span> <span class="p">{</span> <span class="p">()</span> <span class="o">-&gt;</span> <span class="kt">Void</span> <span class="k">in</span>
        <span class="k">self</span><span class="o">.</span><span class="n">canvas</span><span class="o">.</span><span class="n">opacity</span> <span class="o">=</span> <span class="mf">1.0</span>
    <span class="p">}</span><span class="o">.</span><span class="nf">animate</span><span class="p">()</span>
<span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></pre></figure>

<h2 id="next">Next</h2>

<p>This was the last major object we needed to create for COSMOS. The next chapter deals with how to tie everything together into a single unified app.</p>

<p>Here’s a copy of <a href="https://gist.github.com/C4Framework/d14b7598cabc6ae95f8c">InfoPanel.swift</a></p>

<p>Well done.</p>

        </div>
      </div>
    </div>

    <div class="container">
      <div class="row chapter-nav">
        <div class="col-xs-12 col-sm-12 col-md-12">
          <h1 class="text-center blue">Well done! Continue COSMOS?</h1>
          <ul class="examples-list next-prev list-unstyled">
            
              <li class="pull-left">
                <a class="more" href="/cosmos/21-Menu-Pull-It-Together" title="Earlier article: The Menu – Pull it Together">
                  <div>
                    <span class="glyphicon glyphicon-menu-left" aria-hidden="true"></span>
                    <span class="img">
                      <img src="/images/cosmos/21/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 21<br />The Menu – Pull it Together</p>
                      <p>We've got all the components, let's get this beast put together now.</p>
                    </div>
                  </div>
                </a>
              </li>
            
            
              <li class="pull-right">
                <a class="more" href="/cosmos/23-Pulling-It-All-Together" title="Later article: Pulling It All Together">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/23/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 23<br />Pulling It All Together</p>
                      <p>Time to weave all the components into a unified app.</p>
                    </div>
                    <span class="glyphicon glyphicon-menu-right" aria-hidden="true"></span>
                  </div>
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>

    <div class="container">
      <div class="row related">
        <div class="col-xs-12 col-md-12">
          <h1 class="text-center blue">All COSMOS Chapters</h1>
          <ul class="examples-list list-unstyled">
            
            
              <li>
                <a href="/cosmos/0-getting-started">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/0/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 0<br />Getting Started</p>
                      <p>Get up and running quickly with the COSMOS Xcode project files.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/1-prelude-to-design">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/1/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 1<br />Prelude To Design</p>
                      <p>An overview explaining why & how we chose to create COSMOS in the first place.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/2-designing-the-cosmos">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/2/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 2<br />Designing the COSMOS</p>
                      <p>Where to start? Defining the visual concept and deciding the functionality.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/3-plan-it">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/3/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 3<br />Plan It!</p>
                      <p>Get your goggles on as we start diving into the code with C4.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/4-Infinite-Scrollview">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/4/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 4<br />Infinite Scrollview</p>
                      <p>Implementing the idea of an infinite scrollview that loops around rather than stopping at the end.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/5-Infinite-Scrollview-Build">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/5/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 5<br />Infinite Scrollview</p>
                      <p>Time to code – get that infinite scrollview looping.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/6-Astrological-Sign-Provider">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/6/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 6<br />Astrological Sign Provider</p>
                      <p>How to go about wrangling all the data for the 12 astrological signs.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/7-Astrological-Sign-Provider-Build">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/7/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 7<br />Astrological Sign Provider - Build it!</p>
                      <p>We've wrangled all that data, now let's do something with it.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/8-Stars">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/8/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 8<br />Stars</p>
                      <p>Start bringing the COSMOS to life with some nice visual work.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/9-Parallax-Testing">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/9/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 9<br />Parallax Testing (Optional)</p>
                      <p>This optional chapter will walk you through how I originally tested the background.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/10-Stars-Background">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/10/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 10<br />Stars Background</p>
                      <p>Time to stargaze – we're going to build some constellations.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/11-Sign-Lines">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/11/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 11<br />Sign Lines</p>
                      <p>Time to stargaze – we're going to build some constellations.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/12-Small-Stars">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/12/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 12<br />Small Stars</p>
                      <p>Bring those constellations to life with stars. We're starting small.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/13-Big-Stars">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/13/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 13<br />Big Stars</p>
                      <p>We've got the small constellation stars, let's keep going with the big ones.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/14-Assembling-The-Stars">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/14/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 14<br />Assembling the Stars</p>
                      <p>Small stars, meet big stars. Time to unite them all.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/15-Radial-Menu">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/15/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 15<br />Radial Menu</p>
                      <p>Building the heart of the app - a radial menu with embedded animation that reacts to different gestures.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/16-Menu-Rings">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/16/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 16<br />Menu Rings</p>
                      <p>It's time to build the backbone of our radial menu.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/17-Menu-Rings">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/17/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 17<br />Animating the Menu Rings</p>
                      <p>Time to bring the radial menu to life with embedded animation.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/18-Menu-Icons">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/18/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 18<br />Menu Icons</p>
                      <p>Time to flesh out the radial menu with some animated icons.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/19-Menu-Selector">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/19/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 19<br />Menu Selector</p>
                      <p>Give the radial menu interaction and responsiveness with some programming wizardry.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/20-Menu-Shadow">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/20/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 20<br />Menu Shadow</p>
                      <p>Give a little visual pop to the radial menu with a simple shadow.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/21-Menu-Pull-It-Together">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/21/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 21<br />The Menu – Pull it Together</p>
                      <p>We've got all the components, let's get this beast put together now.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/22-Info-Panel">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/22/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 22<br />Info Panel</p>
                      <p>A straightforward info panel with push controllers, popups and external links.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/23-Pulling-It-All-Together">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/23/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 23<br />Pulling It All Together</p>
                      <p>Time to weave all the components into a unified app.</p>
                    </div>
                  </div>
                </a>
              </li>
            
              <li>
                <a href="/cosmos/24-Pulling-It-All-Together">
                  <div>
                    <span class="img">
                      <img src="/images/cosmos/24/poster.png" />
                    </span>
                    <div class="text">
                      <p class="title">Chapter 24<br />Submitting to App Store</p>
                      <p>Our last task is to get COSMOS on the App Store. Seriously.</p>
                    </div>
                  </div>
                </a>
              </li>
            
          </ul>
        </div>
      </div>
    </div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-md-3 col-sm-3 col-xs-6">
        <ul class="list-unstyled">
          <li class="title"><a href="/#overview">About</a></li>
          <li><a href="/#overview">Features</a></li>
          <!-- <li><a href="/about#history">History</a></li> -->
          <!-- <li><a href="/about/contributors">Contributors</a></li> -->
        </ul>
      </div>
      <div class="col-md-3 col-sm-3 col-xs-6">
        <ul class="list-unstyled">
          <li class="title"><a href="/learn">Learn + Explore</a></li>
          <li><a href="/install">Install C4</a></li>
          <li><a href="/examples">Examples</a></li>
          <li><a href="/tutorials">Tutorials</a></li>
          <li><a href="http://cocoadocs.org/docsets/C4/1.1.0/">Docs</a></li>
        </ul>
      </div>
      <div class="col-md-3 col-sm-3 col-xs-6">
        <ul class="list-unstyled">
          <li class="title"><a href="/contact">Connect</a></li>
          <li><a href="http://discourse.c4ios.com">Forums</a></li>
          <li><a href="http://www.medium.com/@c4framework" target="_blank">Medium</a></li>
          <li><a href="http://www.twitter.com/c4framework" target="_blank">Twitter</a></li>
          <li><a href="https://join-c4.herokuapp.com/" target="_blank">Slack</a></li>
          <li><a href="https://vimeo.com/c4ios" target="_blank">Vimeo</a></li>
          <li><a href="http://github.com/c4framework" target="_blank">GitHub</a></li>
        </ul>
      </div>
      <div class="col-md-3 col-sm-3 col-xs-6">
        <ul class="list-unstyled">
          <!-- <li class="title"><a href="/about">Sign Up for Newsletter</a></li>
          <li><input type="text" placeholder="Enter Email + Press Enter"></li> -->
          <li>© 2016 C4</li>
          <li><a href="/terms">Terms of Use</a></li>
          <li><a href="mailto:info@c4ios.com">Contact</a></li>
        </ul>    
      </div>
    </div>
  </div>
</footer>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script src="/js/bootstrap.min.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-18444113-4', 'auto');
  ga('send', 'pageview');
</script>


    <script type="text/javascript" src="/js/toc.js"></script>
    <script>
     (function(d, t) {
        var g = d.createElement(t),
            s = d.getElementsByTagName(t)[0];
        g.src = 'http://assets.gfycat.com/js/gfyajax-0.517d.js';
        s.parentNode.insertBefore(g, s);
      }(document, 'script'));
    </script>
    <script type="text/javascript">
      $(document).ready(function() {
        $('#toc').width($('#toc').parents().width());

        $('#toc').toc({
          elementClass: 'toc',
          ulClass: 'nav',
          heading: 'Contents',
          indexingFormats: 'number',
          selector: 'h2, h3, h4',
        });

        $('body').scrollspy({
          target: '#toc',
          offset: $('#headerNav').outerHeight(true)
        });

        setTimeout(function() {
          var $sideBar = $('#toc');
          $sideBar.affix({
            offset: {
              top: function() {
                var offsetTop      = $sideBar.offset().top,
                sideBarMargin  = parseInt($sideBar.children(0).css('margin-top'), 10),
                navOuterHeight = $('#headerNav').height();
                return (this.top = offsetTop - navOuterHeight - sideBarMargin);
              },
              bottom: function() {
                return (this.bottom = $('footer').outerHeight(true) + $('.chapter-nav').outerHeight(true) + $('.related').outerHeight(true) + 60);
              }
            }
          });
        }, 100);

        $('td.gutter').each(function(index)
        {
          $(this).parents('.language-swift').closest('pre').addClass('has-gutter');
        });

        $('.tutorial img').each(function()
        {
          console.log($(this).parent());
          var img = $(this).attr('src');
          $(this).attr('src', '/images/cosmos/22/' + img + '').addClass('img-responsive');
        });

        $('.tutorial p img').unwrap().wrap('<figure></figure>').after(function() {
            return '<figcaption>'+this.alt+'</figcaption>';
        });

        $('.footnotes').prepend('<h4>Footnotes</h4>');
      });
    </script>
  </body>
</html>